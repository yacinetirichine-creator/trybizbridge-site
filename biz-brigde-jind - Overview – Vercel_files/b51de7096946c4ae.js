;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="a92330b4-4513-8037-7607-de9ac629af2d")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5143983,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(1286423),l=e.i(2504781),r=e.i(5255926),i=e.i(5468328),n=e.i(4161083),o=e.i(4756166),c=e.i(9584456),d=e.i(9386557),m=e.i(57106),u=e.i(4004502),x=e.i(7917902),h=e.i(1717203),g=e.i(7557283),j=e.i(7218483),p=e.i(9668517),f=e.i(9375869),v=e.i(6159310),y=e.i(2982888),b=e.i(1298796),N=e.i(1553329),C=e.i(8216525);function w(e){let{loading:a=!0,project:s,upcomingDeployment:l,onCancelUpcomingDeployment:i,previousDeployment:n,aliasError:o,projectLink:d,productionDeployment:m,productionDeploymentIsStale:x}=e;return(0,t.jsx)(b.DeploymentCardStatusBar,{"data-testid":(0,u.tid)("production-deployment-bar","container",a?"loading":""),variant:(0,b.getStatusBarVariant)({productionDeploymentIsStale:x,upcomingDeployment:l,isLoading:a}),children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.DeploymentCardStatusBarLeft,{children:(0,t.jsx)(r.Skeleton,{boxHeight:20,height:16,vcenter:!0,width:"40%"})}),(0,t.jsx)(b.DeploymentCardStatusBarRight,{children:(0,t.jsx)("div",{className:"flex h-auto items-center overflow-visible md:h-[20px]",children:(0,t.jsx)(r.Skeleton,{autoSize:!0,className:"h-[32px] w-full md:w-[32px]"})})})]}):o?(0,t.jsxs)(b.DeploymentCardStatusBarLeft,{children:[(0,t.jsx)(c.StopFill,{color:"red-900"}),"Failed to Assign Domain: ",o.message]}):x?(0,t.jsx)(z,{previousDeployment:n,productionDeployment:m,project:s}):l?(0,t.jsx)(D,{onCancelUpcomingDeployment:i,upcomingDeployment:l,project:s}):(0,t.jsx)(S,{project:s,projectLink:d})})}function z(e){let{project:r,productionDeployment:i,previousDeployment:n}=e,o=(0,p.useTeamSlug)(),c=r?.autoAssignCustomDomains??!0,u=r?.autoAssignCustomDomainsUpdatedBy==="system",x=`/${o??""}/${r?.name||""}/settings/environments/production`,[h,g]=(0,a.useState)(!1),j=(0,a.useCallback)(()=>c?(0,t.jsxs)("span",{className:"text-label-14",children:["Pushing a new deployment to production will remove the rollback."," ",(0,t.jsx)(m.Link,{className:"font-medium underline",external:!0,href:"https://vercel.com/docs/deployments/instant-rollback",children:"Learn More"})]}):u?(0,t.jsxs)("span",{className:"text-label-14",children:["To undo the rollback"," ",(0,t.jsx)(m.Link,{className:"font-medium underline",external:!0,href:"https://vercel.com/docs/deployments/promoting-a-deployment#promote-a-deployment-from-preview-to-production",children:"promote to production"})," ","or"," ",(0,t.jsx)(m.Link,{className:"font-medium underline",external:!0,href:x,children:"re-enable auto-assigning custom domains"})]}):(0,t.jsxs)("span",{className:"text-label-14",children:["Auto-assigning production domains is disabled for this project. To undo the rollback"," ",(0,t.jsx)(m.Link,{className:"font-medium underline",external:!0,href:"https://vercel.com/docs/deployments/promoting-a-deployment#promote-a-deployment-from-preview-to-production",children:"promote to production"})]}),[c,u,x,h]),f=new URLSearchParams;return f.set("environment","production"),f.set("status","ready,error,canceled"),n&&i&&f.set("range",JSON.stringify({start:new Date(i.createdAt).toISOString(),end:(0,s.addSeconds)(new Date(n.createdAt),1).toISOString()})),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.DeploymentCardStatusBarLeft,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.WarningFill,{color:"amber-900"}),(0,t.jsx)(j,{})]})}),(0,t.jsx)(b.DeploymentCardStatusBarRight,{children:(0,t.jsx)("div",{className:"flex h-auto items-center overflow-visible md:h-[20px]",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.UndoRollbackModal,{open:h,setOpen:g}),(0,t.jsx)(l.Button,{className:"w-full",onClick:()=>{g(e=>!e)},size:"small",type:"secondary",children:"Undo Rollback"})]})})})]})}function S(e){let{project:a,projectLink:s}=e,l=(0,x.useAccount)(),r=l.team?.slug||l.user?.username,i=r&&a?`/${r}/${a.name}/settings/git`:void 0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.DeploymentCardStatusBarLeft,{children:s?(0,t.jsxs)("span",{className:"text-gray-900",children:["To update your Production Deployment, push to the"," ",a?.link?.productionBranch?(0,t.jsx)("span",{className:"font-mono",children:a.link.productionBranch}):"Repository Default"," ","branch."]}):(0,t.jsxs)("span",{className:"text-gray-900",children:["To deploy to Production, connect to git, or run"," ",(0,t.jsx)("span",{className:"font-mono",children:"vercel --prod"})," via the CLI."]})}),(0,t.jsxs)(b.DeploymentCardStatusBarRight,{children:[(0,t.jsxs)("div",{className:"flex w-full items-center gap-3 md:hidden",children:[(0,t.jsx)(v.DashboardButtonLink,{className:"w-full shrink",prefix:(0,t.jsx)(o.ListFilter,{color:"gray-900"}),route:"/[teamSlug]/[project]/deployments",search:{environment:"production"},size:"small",type:"secondary",children:"Deployments"}),(0,t.jsx)(m.ButtonLink,{as:i,className:"w-full shrink",href:"/docs/git#production-branch",prefix:(0,t.jsx)(n.BookOpen,{color:"gray-900"}),size:"small",tab:!0,type:"secondary",children:"Learn More"})]}),(0,t.jsxs)("div",{className:"hidden h-[20px] shrink-0 items-center gap-2 overflow-visible md:flex",children:[(0,t.jsx)(v.DashboardButtonLink,{prefix:(0,t.jsx)(o.ListFilter,{color:"gray-900"}),route:"/[teamSlug]/[project]/deployments",search:{environment:"production"},size:"small",type:"secondary",children:"Deployments"}),(0,t.jsx)(m.ButtonLink,{"aria-label":"Learn more",as:i,href:"/docs/git#production-branch",shape:"square",size:"small",svgOnly:!0,tab:!0,type:"secondary",children:(0,t.jsx)(n.BookOpen,{color:"gray-900"})})]})]})]})}function D(e){let{upcomingDeployment:a,onCancelUpcomingDeployment:s,project:r}=e,{user:n,team:o}=(0,x.useAccount)(),c=(0,j.useAgo)(a.createdAt),{can:d,isLoading:m}=(0,h.default)({projectIdOrName:r?.name}),u=null!==a.target?g.Resource.DeploymentFromProductionBranch:g.Resource.DeploymentPreview,p=d(g.Action.Update,u),f=!m&&p&&("QUEUED"===a.readyState||"BUILDING"===a.readyState);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.DeploymentCardStatusBarLeft,{className:"md:truncate",children:(0,t.jsx)("div",{className:"text-label-14 flex min-w-0 flex-1 items-center gap-2",children:(0,t.jsxs)("div",{className:"flex min-w-0 flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-2",children:[(0,t.jsx)(C.DeploymentStatus,{deployment:a,label:!0,labelClassName:"[&>*]:font-normal"}),(0,t.jsx)("span",{children:"·"}),(0,t.jsx)(k,{deployment:a,team:o,user:n})]}),(0,t.jsx)("div",{className:"flex md:hidden",children:(0,t.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[(0,t.jsx)("span",{className:"text-gray-900",children:c}),(0,t.jsx)(y.DeploymentCreatorAvatar,{deployment:a,showIcon:!1,size:20}),(0,t.jsx)("span",{className:"text-gray-1000",children:(0,y.getDeploymentCreatorUsername)({deployment:a})})]})})]})})}),(0,t.jsx)(b.DeploymentCardStatusBarRight,{children:(0,t.jsxs)("div",{className:"text-label-14 flex flex-1 shrink-0 items-center gap-2",children:[(0,t.jsxs)("div",{className:"hidden items-center gap-1 md:flex",children:[(0,t.jsx)("span",{className:"text-gray-900",children:c}),(0,t.jsx)(y.DeploymentCreatorAvatar,{deployment:a,showIcon:!1,size:20}),(0,t.jsx)("span",{className:"text-gray-1000",children:(0,y.getDeploymentCreatorUsername)({deployment:a})})]}),(0,t.jsx)("div",{className:"flex h-auto w-full items-center overflow-visible md:h-[20px] md:w-auto",children:(0,t.jsx)(i.Tooltip,{className:"w-full md:w-auto",desktopOnly:!0,forceHide:f,text:"Missing permissions to cancel",children:(0,t.jsx)(l.Button,{className:"w-full md:w-auto",disabled:!f,onClick:s,size:"small",type:"secondary",children:"Cancel"})})})]})})]})}function k(e){let{deployment:s,user:l,team:r}=e,i=(0,f.pathFromDeployment)(s,{user:l,team:r}),n=(0,a.useMemo)(()=>{let{meta:e,source:t}=s;return e.githubDeployment&&e.githubCommitMessage?e.githubCommitMessage:e.bitbucketDeployment&&e.bitbucketCommitMessage?e.bitbucketCommitMessage:e.gitlabDeployment&&(e.gitlabCommitMessage||e.gitCommitMessage)?e.gitlabCommitMessage||e.gitCommitMessage:"cli"===t?"New Deployment created with Vercel CLI":t?null:"New Deployment created"},[s]);return(0,t.jsx)(m.Link,{className:"text-label-14 truncate",href:i,variant:"secondary",children:n})}e.s(["ProductionDeploymentBar",()=>w])},4040097,e=>{"use strict";var t=e.i(1146226),a=e.i(7137884),s=e.i(8517043),l=e.i(5255926),r=e.i(9318197),i=e.i(9722978),n=e.i(4450569),o=e.i(5566974);function c(e){let{visible:c=!0}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(s.Fieldset,{className:(0,i.clsx)("z-[1]","shadow-[0_1px_0_rgba(0,0,0,0.08),0_2px_2px_rgba(0,0,0,0.04)]","border-none","rounded-lg","bg-clip-padding","[&>div:first-child]:p-4",!c&&"invisible"),children:[(0,t.jsx)(a.FieldsetContent,{children:(0,t.jsxs)(n.default,{direction:["column","row"],children:[(0,t.jsx)(n.default,{className:"w-screen max-w-[38%] flex-none max-[860px]:max-w-full",children:(0,t.jsx)(l.Skeleton,{style:{paddingTop:"62.5%",minHeight:"100%"},width:"100%"})}),(0,t.jsx)(n.default,{className:"justify-start pt-2 max-[860px]:ml-0 max-[860px]:pl-1 max-[860px]:mt-[calc(var(--geist-gap)*var(--gap-ratio))]",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-5 flex-initial",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Deployment"}),(0,t.jsx)(l.Skeleton,{height:16,width:190})]}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:(0,t.jsx)(l.Skeleton,{boxHeight:32,height:32,rounded:!0,width:32,className:"mr-2"})})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Domains"}),(0,t.jsx)(l.Skeleton,{boxHeight:20,height:16,width:220})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Status"}),(0,t.jsx)(l.Skeleton,{boxHeight:22,height:16,width:60})]}),(0,t.jsx)(r.Spacer,{x:1,y:.75}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Created"}),(0,t.jsx)(l.Skeleton,{boxHeight:22,height:16,width:180})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Source"}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-0.5 flex-initial",children:[(0,t.jsx)(l.Skeleton,{boxHeight:22,height:16,width:120}),(0,t.jsx)(l.Skeleton,{boxHeight:22,height:16,width:240})]})]})]})})]})}),(0,t.jsx)(o.DeploymentConfigurationSkeleton,{className:"rounded-b"})]})})}e.s(["ProductionDeploymentCardSkeleton",()=>c])},7962521,2787659,7403962,5304964,4870968,8171146,e=>{"use strict";var t=e.i(9334638);let a=(0,t.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.125 9.67054V23.8179c0 3.7199 2.0648 7.1323 5.3599 8.8583L20 36.0889l6.5151-3.4127c3.2951-1.726 5.3599-5.1384 5.3599-8.8583V9.67054c-.6207-.181-1.2899-.35565-2.002-.54153-.3642-.09504-.7396-.19301-1.1254-.29626-1.4625-.39131-3.0324-.84866-4.4687-1.47955-1.4334-.62958-2.8155-1.46629-3.844-2.66311-.1542-.17947-.2994-.3658-.4349-.55915-.1355.19335-.2807.37968-.4349.55915-1.0285 1.19682-2.4106 2.03353-3.844 2.66311-1.4363.63089-3.0062 1.08824-4.4687 1.47955-.3858.10325-.7612.20122-1.1254.29626-.71213.18588-1.38133.36053-2.002.54153ZM18.75 0c0 1.31808-.4156 2.28639-1.0809 3.06066-.6904.80329-1.6991 1.4527-2.9534 2.00361-1.2512.54961-2.6657.96712-4.1095 1.35344-.344.09206-.69287.18307-1.0417.27408-1.07623.28078-2.15211.56146-3.08478.87236l-.85472.2849V23.8179c0 4.6498 2.58096 8.9154 6.6999 11.0729l7.0951 3.7165.58.3038.58-.3038 7.0951-3.7165c4.1189-2.1575 6.6999-6.4231 6.6999-11.0729V7.84905l-.8547-.2849c-.9327-.3109-2.0086-.59158-3.0848-.87236-.3488-.09101-.6977-.18202-1.0417-.27408-1.4438-.38632-2.8583-.80383-4.1095-1.35344-1.2543-.55091-2.263-1.20032-2.9534-2.00361C21.6656 2.28639 21.25 1.31808 21.25 0h-2.5Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"});e.s(["Shield",0,a],2787659);let s=(0,t.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.125 23.8179V9.67054c.62067-.18099 1.28985-.35565 2.002-.54152v-.00001c.3642-.09504.7396-.19301 1.1254-.29626 1.4625-.39131 3.0324-.84866 4.4687-1.47955 1.4334-.62958 2.8155-1.46629 3.844-2.66311.1542-.17947.2994-.3658.4349-.55915.1355.19335.2807.37968.4349.55915 1.0285 1.19682 2.4106 2.03353 3.844 2.66311 1.4363.63089 3.0062 1.08824 4.4687 1.47955.3857.10323.761.20118 1.1251.2962l.0003.00006c.7121.18588 1.3813.36053 2.002.54153V23.8179c0 3.7199-2.0648 7.1323-5.3599 8.8583L20 36.0889l-6.5151-3.4127c-3.2951-1.726-5.3599-5.1384-5.3599-8.8583Zm9.5441-20.75724C18.3344 2.28639 18.75 1.31808 18.75 0h2.5c0 1.31808.4156 2.28639 1.0809 3.06066.6904.80329 1.6991 1.4527 2.9534 2.00361 1.2512.54961 2.6657.96712 4.1095 1.35344.3439.09204.6927.18304 1.0415.27403l.0002.00005c1.0762.28078 2.1521.56146 3.0848.87236l.8547.2849V23.8179c0 4.6498-2.581 8.9154-6.6999 11.0729L20.58 38.6073l-.58.3038-.58-.3038-7.0951-3.7165C8.20596 32.7333 5.625 28.4677 5.625 23.8179V7.84905l.85472-.2849c.93267-.3109 2.00855-.59158 3.08478-.87236l.00019-.00005c.34877-.09099.69761-.18199 1.04151-.27403 1.4438-.38632 2.8583-.80383 4.1095-1.35344 1.2543-.55091 2.263-1.20032 2.9534-2.00361Zm9.7773 14.07324.8839-.8839-1.7678-1.7678-.8839.8839-9.1161 9.1161-2.2411-2.2411-.8839-.8839-1.7678 1.7678.8839.8839 3.125 3.125c.4882.4881 1.2796.4881 1.7678 0l10-10Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"});e.s(["ShieldCheck",0,s],7403962);let l=(0,t.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.22355 7.04658 3.38991 2.27895l-.88994-.87778L.720093 3.15674l.889937.87778L36.1782 38.1306l.8899.8778 1.7799-1.7556-.89-.8778-5.6898-5.6122c1.3492-2.0194 2.1068-4.4257 2.1068-6.9449V7.84905l-.8547-.2849c-.9327-.3109-2.0086-.59158-3.0848-.87236l-.0002-.00005c-.3488-.09099-.6976-.18199-1.0416-.27403-1.4437-.38632-2.8582-.80383-4.1095-1.35344-1.2542-.55091-2.2629-1.20032-2.9533-2.00361C21.6655 2.28639 21.25 1.31808 21.25 0h-2.5c0 1.31808-.4156 2.28639-1.081 3.06066-.6903.80329-1.699 1.4527-2.9533 2.00361-1.2513.54961-2.6657.96712-4.1095 1.35344-.344.09204-.69277.18304-1.04153.27403l-.00019.00005c-.45054.11754-.901.23506-1.34093.35479Zm2.06775 2.03954L30.4474 28.967c.9176-1.5276 1.4276-3.3004 1.4276-5.1491V9.67054c-.6207-.181-1.2899-.35565-2.0021-.54153l-.0002-.00006c-.3641-.09502-.7394-.19297-1.1252-.2962-1.4624-.39131-3.0323-.84866-4.4687-1.47955-1.4333-.62958-2.8154-1.46629-3.8439-2.66311-.1543-.17947-.2994-.3658-.4349-.55915-.1355.19335-.2807.37968-.4349.55915-1.0286 1.19682-2.4106 2.03353-3.844 2.66311-1.4363.63089-3.0063 1.08824-4.4687 1.47955-.3281.08779-.6486.17177-.9611.25337ZM5.62497 12.5712l2.5 2.4659v8.7808c0 3.7199 2.06473 7.1323 5.35993 8.8583L20 36.0889l6.1841-3.2393 1.8635 1.838c-.1227.0697-.2469.1374-.3725.2032L20.58 38.6073l-.58.3038-.58-.3038-7.0951-3.7165c-4.11897-2.1575-6.69993-6.4231-6.69993-11.0729V12.5712Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"});e.s(["ShieldOff",0,l],5304964);let r=(0,t.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.125 23.8179V9.67054c.62067-.18099 1.28985-.35565 2.002-.54152v-.00001c.3642-.09504.7396-.19301 1.1254-.29626 1.4625-.39131 3.0324-.84866 4.4687-1.47955 1.4334-.62958 2.8155-1.46629 3.844-2.66311.1542-.17947.2994-.3658.4349-.55915.1355.19335.2807.37968.4349.55915 1.0285 1.19682 2.4106 2.03353 3.844 2.66311 1.4363.63089 3.0062 1.08824 4.4687 1.47955.3857.10323.761.20118 1.1251.2962l.0003.00006c.7121.18588 1.3813.36053 2.002.54153V23.8179c0 3.7199-2.0648 7.1323-5.3599 8.8583L20 36.0889l-6.5151-3.4127c-3.2951-1.726-5.3599-5.1384-5.3599-8.8583Zm9.5441-20.75724C18.3344 2.28639 18.75 1.31808 18.75 0h2.5c0 1.31808.4156 2.28639 1.0809 3.06066.6904.80329 1.6991 1.4527 2.9534 2.00361 1.2512.54961 2.6657.96712 4.1095 1.35344.3439.09204.6927.18304 1.0415.27403l.0002.00005c1.0762.28078 2.1521.56146 3.0848.87236l.8547.2849V23.8179c0 4.6498-2.581 8.9154-6.6999 11.0729L20.58 38.6073l-.58.3038-.58-.3038-7.0951-3.7165C8.20596 32.7333 5.625 28.4677 5.625 23.8179V7.84905l.85472-.2849c.93267-.3109 2.00855-.59158 3.08478-.87236l.00019-.00005c.34877-.09099.69761-.18199 1.04151-.27403 1.4438-.38632 2.8583-.80383 4.1095-1.35344 1.2543-.55091 2.263-1.20032 2.9534-2.00361ZM21.25 12.5l-.3125 10h-1.875l-.3125-10h2.5Zm0 13.75c0 .6904-.5596 1.25-1.25 1.25s-1.25-.5596-1.25-1.25S19.3096 25 20 25s1.25.5596 1.25 1.25Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"});e.s(["ShieldWarning",0,r],4870968);let i=(0,t.withNewIcon)(`
<mask id="a" fill="#fff">
  <path
    fill-rule="evenodd"
    d="M1.25 0C.56 0 0 .56 0 1.25v11c0 .69.56 1.25 1.25 1.25H4.5V12h-3V9.5H6v-4h10V1.25C16 .56 15.44 0 14.75 0zM4.5 8h-3V5.5h3zm-3-4h3V1.5h-3zM6 4V1.5h4V4zm5.5 0h3V1.5h-3zm1.73 8c-.03.815-.136 1.628-.318 2.428a3.25 3.25 0 0 0 1.8-2.428zm-1.425 2.736a3.3 3.3 0 0 1-.61 0A12.2 12.2 0 0 1 10.77 12h1.46a12.2 12.2 0 0 1-.425 2.736M13.23 11a13 13 0 0 0-.319-2.428 3.25 3.25 0 0 1 1.8 2.428zm-1.001 0a12.2 12.2 0 0 0-.425-2.736 3.3 3.3 0 0 0-.61 0A12.2 12.2 0 0 0 10.77 11zm-2.46 0c.03-.815.136-1.628.318-2.428A3.25 3.25 0 0 0 8.288 11zm.318 3.428c-.182-.8-.288-1.613-.319-2.428H8.29a3.25 3.25 0 0 0 1.799 2.428M11.5 16a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9"
    clip-rule="evenodd"
  />
</mask>
<path
  fill="currentColor"
  fill-rule="evenodd"
  d="M1.25 0C.56 0 0 .56 0 1.25v11c0 .69.56 1.25 1.25 1.25H4.5V12h-3V9.5H6v-4h10V1.25C16 .56 15.44 0 14.75 0zM4.5 8h-3V5.5h3zm-3-4h3V1.5h-3zM6 4V1.5h4V4zm5.5 0h3V1.5h-3zm1.73 8c-.03.815-.136 1.628-.318 2.428a3.25 3.25 0 0 0 1.8-2.428zm-1.425 2.736a3.3 3.3 0 0 1-.61 0A12.2 12.2 0 0 1 10.77 12h1.46a12.2 12.2 0 0 1-.425 2.736M13.23 11a13 13 0 0 0-.319-2.428 3.25 3.25 0 0 1 1.8 2.428zm-1.001 0a12.2 12.2 0 0 0-.425-2.736 3.3 3.3 0 0 0-.61 0A12.2 12.2 0 0 0 10.77 11zm-2.46 0c.03-.815.136-1.628.318-2.428A3.25 3.25 0 0 0 8.288 11zm.318 3.428c-.182-.8-.288-1.613-.319-2.428H8.29a3.25 3.25 0 0 0 1.799 2.428M11.5 16a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9"
  clip-rule="evenodd"
/>
<path
  fill="currentColor"
  d="M4.5 13.5V15L6 13.5zm0-1.5H6l-1.5-1.5zm-3 0H0l1.5 1.5zm0-2.5V8L0 9.5zm4.5 0V11l1.5-1.5zm0-4V4L4.5 5.5zm10 0V7l1.5-1.5zM1.5 8H0l1.5 1.5zm3 0v1.5L6 8zm-3-2.5V4L0 5.5zm3 0H6L4.5 4zm0-1.5v1.5L6 4zm-3 0H0l1.5 1.5zm3-2.5H6L4.5 0zm-3 0V0L0 1.5zm4.5 0V0L4.5 1.5zM6 4H4.5L6 5.5zm4-2.5h1.5L10 0zM10 4v1.5L11.5 4zm4.5 0v1.5L16 4zm-3 0H10l1.5 1.5zm3-2.5H16L14.5 0zm-3 0V0L10 1.5zM13.23 12v-1.5l-1.498 1.443zm-.318 2.428-1.463-.332 2.116 1.682zm1.8-2.428 1.482.229-1.482-1.729zm-2.907 2.736.139 1.494 1.307-1.098zm-.61 0-1.446.396 1.307 1.098zM10.77 12v-1.5l-1.499 1.561zm1.46 0 1.499.061L12.23 10.5zm.682-3.428.653-1.35-2.115 1.682zM13.231 11l-1.5.057 1.5 1.443zm1.48 0v1.5l1.483-1.729zm-2.481 0v1.5l1.499-1.561zm-.425-2.736 1.446-.396-1.307-1.097zm-.61 0-.139-1.493L9.75 7.868zM10.77 11l-1.499-.061L10.77 12.5zm-.682-2.428 1.463.332-2.116-1.682zM9.769 11v1.5l1.5-1.443zm-1.48 0-1.483-.229L8.288 12.5zm1.48 1 1.5-.057-1.5-1.443zm.319 2.428-.653 1.35 2.115-1.682zM8.288 12v-1.5l-1.482 1.729zM1.5 1.25a.25.25 0 0 1-.25.25v-3A2.75 2.75 0 0 0-1.5 1.25zm0 11v-11h-3v11zM1.25 12a.25.25 0 0 1 .25.25h-3A2.75 2.75 0 0 0 1.25 15zm3.25 0H1.25v3H4.5zM3 12v1.5h3V12zm-1.5 1.5h3v-3h-3zM0 9.5V12h3V9.5zM5.25 8H1.5v3h3.75zM6 8h-.75v3H6zm-1.5.75v.75h3v-.75zm0-3.25v3.25h3V5.5zM15.25 4H6v3h9.25zM16 4h-.75v3H16zm-1.5.75v.75h3v-.75zm0-3.5v3.5h3v-3.5zm.25.25a.25.25 0 0 1-.25-.25h3a2.75 2.75 0 0 0-2.75-2.75zm-13.5 0h13.5v-3H1.25zm.25 8h3v-3h-3zM0 5.5V8h3V5.5zM4.5 4h-3v3h3zM6 8V5.5H3V8zM4.5 2.5h-3v3h3zM3 1.5V4h3V1.5zM1.5 3h3V0h-3zM3 4V1.5H0V4zm1.5-2.5V4h3V1.5zM10 0H6v3h4zm1.5 4V1.5h-3V4zM6 5.5h4v-3H6zm8.5-3h-3v3h3zm-1.5-1V4h3V1.5zM11.5 3h3V0h-3zM13 4V1.5h-3V4zm-1.268 7.943a11.7 11.7 0 0 1-.282 2.153l2.925.664c.202-.891.32-1.796.355-2.703zm1.497-.172a1.75 1.75 0 0 1-.97 1.306l1.306 2.701a4.75 4.75 0 0 0 2.63-3.55zm.002 1.729h1.48v-3h-1.48zm-1.565-.258a2 2 0 0 1-.166.008v3q.224 0 .444-.02zm-.166.008a2 2 0 0 1-.166-.008l-.278 2.988q.22.02.444.02zm1.142 1.09a10.7 10.7 0 0 1-.373-2.401l-2.998.122a13.7 13.7 0 0 0 .478 3.072zm-1.872-.84h1.46v-3h-1.46zm2.481 1.633c.276-1.007.436-2.038.478-3.072l-2.998-.122a10.7 10.7 0 0 1-.373 2.4zm-1.801-6.23c.16.71.255 1.431.282 2.154l2.998-.114a14.7 14.7 0 0 0-.355-2.703zm4.744 1.868a4.75 4.75 0 0 0-2.629-3.55L12.26 9.924c.51.246.88.733.97 1.306zM13.231 12.5h1.48v-3h-1.48zm.498-1.561a13.7 13.7 0 0 0-.478-3.071l-2.893.793c.216.787.34 1.592.373 2.4zM11.944 6.77a5 5 0 0 0-.444-.021v3q.084 0 .166.008zm-.444-.02q-.224 0-.444.02l.278 2.988a2 2 0 0 1 .166-.008zM9.749 7.868a13.7 13.7 0 0 0-.478 3.07l2.998.123c.033-.808.157-1.613.373-2.4zM10.77 12.5h1.46v-3h-1.46zM8.625 8.24c-.202.891-.32 1.796-.355 2.703l2.998.114a12 12 0 0 1 .282-2.153zm1.145 2.99c.088-.573.458-1.06.97-1.306L9.434 7.222a4.75 4.75 0 0 0-2.63 3.55zM9.769 9.5H8.29v3h1.48zM8.27 12.057c.035.907.153 1.812.355 2.703l2.925-.664q-.24-1.067-.282-2.153zm.018 1.443H9.77v-3H8.29zm2.452-.423a1.75 1.75 0 0 1-.97-1.306l-2.964.458a4.75 4.75 0 0 0 2.629 3.55zM14.5 11.5a3 3 0 0 1-3 3v3a6 6 0 0 0 6-6zm-3-3a3 3 0 0 1 3 3h3a6 6 0 0 0-6-6zm-3 3a3 3 0 0 1 3-3v-3a6 6 0 0 0-6 6zm3 3a3 3 0 0 1-3-3h-3a6 6 0 0 0 6 6z"
  mask="url(#a)"
/>`);e.s(["FirewallGlobe",0,i],8171146),e.s([],7962521)},745805,e=>{"use strict";var t=e.i(1146226),a=e.i(57106),s=e.i(199192),l=e.i(6143247),r=e.i(7073483);function i(e){let{allowOverflow:a=!1,children:s,className:r=""}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col isolate shadow-sm rounded-md bg-background-100 h-[240px]",r,a?"overflow-visible z-[1]":"overflow-hidden"),children:s})}function n(e){let{className:l,children:i,duration:n,href:o,title:c}=e;return(0,t.jsxs)("header",{className:`group relative z-[1] flex justify-between gap-x-0.5 px-4 py-3 pr-3 ${l}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-1.5 py-0.5",children:[(0,t.jsx)("p",{className:"text-label-14 m-0",children:(0,t.jsx)("strong",{children:c})}),n?(0,t.jsx)("time",{className:"text-label-14 m-0 text-gray-900",children:n}):null,i]}),o?(0,t.jsx)(a.ButtonLink,{"aria-label":"Go to page",className:"z-[2] !text-gray-800 group-hover:!text-gray-1000 group-[&:not(:has(a[target]:hover)):hover]:bg-gray-alpha-200",href:o,prefetch:!1,prefetchStrategy:"hover",shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",onClick:()=>{(0,r.track)("Project Card Clicked",{type:c})},children:(0,t.jsx)(s.ChevronRightSmall,{})}):null,o?(0,t.jsx)(a.Link,{className:"absolute inset-0 z-[1] block",href:o,tabIndex:-1,onClick:()=>{(0,r.track)("Project Card Clicked",{type:c})}}):null]})}function o(e){let{children:a,className:s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("relative h-full",s),children:a})}function c(e){let{icon:a,subtitle:s,cta:l}=e;return(0,t.jsxs)("div",{className:"flex h-5/6 flex-col items-center justify-center gap-x-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2 text-gray-900",children:[a,(0,t.jsx)("p",{className:"text-label-14",children:s})]}),l]})}e.s(["ProjectCardDetailsContent",()=>o,"ProjectCardDetailsEmptyState",()=>c,"ProjectCardDetailsHeader",()=>n,"ProjectDetailsCard",()=>i])},4766294,e=>{"use strict";var t=e.i(6060673),a=e.i(5610834);function s(e){let s=(0,a.useParams)();return(0,t.useProject)(s?.project,{config:e})}e.s(["useProjectPageProject",()=>s])},835922,e=>{"use strict";var t=e.i(1146226),a=e.i(57106),s=e.i(3306538),l=e.i(2504781),r=e.i(5255926),i=e.i(762945),n=e.i(4141852),o=e.i(2375916),c=e.i(3814652),d=e.i(5756088),m=e.i(9722978),u=e.i(818351),x=e.i(4244280),h=e.i(8042625),g=e.i(5338940),j=e.i(2405338),p=e.i(277234),f=e.i(7712782),v=e.i(4689018),y=e.i(5481907),b=e.i(8114130),N=e.i(8778858),C=e.i(4396019);e.i(7962521);var w=e.i(2787659),z=e.i(7403962),S=e.i(4870968),D=e.i(5304964),k=e.i(745805),P=e.i(2329363),L=e.i(594750),M=e.i(3774835),R=e.i(4766294),V=e.i(609109),A=e.i(1717203),F=e.i(7557283),_=e.i(4723202);function I(e){return new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0,compactDisplay:"short"}).format(e)}function B(e){let{teamSlug:l,projectSlug:r}=e,{data:n,isLoading:c}=(0,R.useProjectPageProject)(),{deployment:d,isLoading:m}=(0,C.useProjectProductionDeployment)(r),{team:v}=(0,g.useTeam)(l),{data:y,isLoading:w}=(0,u.useIsomorphicSWR)(`${x.API_FIREWALL}/proxy/status${(0,h.encode)({teamId:l,projectId:r})}`),{data:z,isLoading:S,error:D,mutate:V}=(0,j.default)(v&&n?`/api/firewall/project-overview-summary${(0,h.encode)({ownerId:v.id,projectId:n.id})}`:null,e=>(0,p.fetchAPI)(e,{throwOnHTTPError:!0})),{data:_,isLoading:I}=(0,N.useAttackStatus)({teamId:l,projectId:r}),{activeConfig:B,isLoadingConfig:H}=(0,L.useFirewallConfig)({projectId:n?.id}),{data:U,isLoading:W}=(0,M.useManagedRulesets)({projectIdOrName:r,teamIdOrSlug:l}),Q=_?.anomalies.find(e=>"active"===e.state&&!e.endTime),Y=(n?.latestDeployments??[]).length>0,X=!!(y&&y.length>0),K=n?.security?.attackModeEnabled??!1,J=(0,b.globalBypassStatus)(n),ee=w&&!y||S&&!z||c&&!n||I&&!_||H&&!B||W&&!U||m&&!d,{can:et,isLoading:ea}=(0,A.default)();if(!et(F.Action.Read,F.Resource.SeawallConfig)&&!ea)return(0,t.jsx)(Z,{});if(ee||ea)return(0,t.jsx)(q,{});if(D)return(0,t.jsx)(G,{onRetry:()=>{V()},projectSlug:r,teamSlug:l});if(!d)return(0,t.jsx)(O,{hasDeployments:Y,projectSlug:r,teamSlug:l});let es=null;return K?es=(0,t.jsx)(a.Link,{className:"z-[2] leading-none",external:!0,href:"/docs/attack-challenge-mode#attack-challenge-mode",icon:!1,children:(0,t.jsx)(s.Badge,{className:"border border-solid border-transparent transition hover:border-blue-400",icon:(0,t.jsx)(o.Shield,{size:12}),size:"sm",variant:"blue-subtle",children:"Attack Mode active"})}):X?es=(0,t.jsx)(a.Link,{className:"z-[2] leading-none",external:!0,href:"/kb/guide/can-i-use-a-proxy-on-top-of-my-vercel-deployment",icon:!1,children:(0,t.jsx)(s.Badge,{className:"border border-solid border-transparent transition hover:border-amber-400",icon:(0,t.jsx)(i.Warning,{size:12}),size:"sm",variant:"amber-subtle",children:"Reverse Proxy Detected"})}):U&&(es=(0,t.jsx)(P.BotProtectionStatusBadge,{config:B,rulesets:U})),(0,t.jsxs)(k.ProjectDetailsCard,{children:[(0,t.jsx)(k.ProjectCardDetailsHeader,{duration:Q?.startTime?`Past ${String((0,f.ago)(Date.now()-Q.startTime,{suffix:" ",alwaysRelative:!0}))}`:"24h",href:`/${l}/${r}/firewall?range=1d`,title:"Firewall",children:es}),(0,t.jsx)(k.ProjectCardDetailsContent,{className:"flex items-center justify-center",children:Q?(0,t.jsx)(T,{anomaly:Q}):J.enabled?(0,t.jsx)(E,{ttl:J.ttl}):(0,t.jsx)($,{summary:z})})]})}let H="flex flex-col gap-2 items-center justify-center relative mt-auto mb-9";function E(e){let{ttl:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"error"}),(0,t.jsxs)("div",{className:H,children:[(0,t.jsx)("p",{className:"text-label-14 font-medium text-red-900",children:"System Mitigations Disabled"}),(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"You are susceptible to attacks"}),a?(0,t.jsxs)("p",{className:"text-label-14",children:["Until ",(0,V.formatDateAndTime)(1e3*a)]}):""]})]})}function T(e){let{anomaly:a}=e,s=(0,v.useQuerySelect)({action:"all",filter:"sys_dos_mitigation",groupBy:"wafAction",range:`${new Date().getTime()-a.startTime}ms`}),{data:l,isLoading:i}=(0,y.useSonarLiveQuery)({...s,summaryOnly:!0}),n=l?.summary.reduce((e,t)=>(e[t.wafAction]=t.value??0,e),{});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"warning"}),(0,t.jsxs)("div",{className:H,children:[(0,t.jsx)("p",{className:"text-label-14 font-medium text-amber-900",children:"DDoS attack is being mitigated"}),i?(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(r.Skeleton,{height:20,width:120}),(0,t.jsx)(r.Skeleton,{height:20,width:120})]}):(0,t.jsx)(U,{summary:n})]})]})}function O(e){let{teamSlug:a,projectSlug:s,hasDeployments:l}=e;return(0,t.jsxs)(k.ProjectDetailsCard,{children:[(0,t.jsx)(k.ProjectCardDetailsHeader,{href:`/${a}/${s}/firewall?range=1d`,title:"Firewall"}),(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsxs)("div",{className:"relative -top-5 flex items-center gap-2 text-gray-900",children:[(0,t.jsx)(n.FirewallFlame,{}),(0,t.jsx)("p",{className:"text-label-14 font-medium text-gray-900",children:l?"Firewall is active":"No live deployments"})]})})]})}function $(e){let{summary:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"success"}),(0,t.jsxs)("div",{className:H,children:[(0,t.jsx)("p",{className:"text-label-14 font-medium text-blue-900",children:"Firewall is active"}),a&&0===a.deny&&0===a.challenge?(0,t.jsx)("p",{className:"text-copy-14",children:"All systems are normal"}):(0,t.jsx)(U,{summary:a})]})]})}function U(e){let{summary:a}=e;return(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2",children:[a?.deny&&a.deny>0?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.ShieldOff,{color:"gray-900"}),(0,t.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:[I(a.deny)," denied"]})]}):null,a?.challenge&&a.challenge>0?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(o.Shield,{color:"gray-900"}),(0,t.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:[I(a.challenge)," challenged"]})]}):null]})}function q(){return(0,t.jsxs)(k.ProjectDetailsCard,{children:[(0,t.jsx)(k.ProjectCardDetailsHeader,{duration:"24h",title:"Firewall",children:(0,t.jsx)(r.Skeleton,{height:24,width:160})}),(0,t.jsxs)("div",{className:"relative h-[188px] pt-[115px]",children:[(0,t.jsx)(Q,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"disabled"}),(0,t.jsxs)("div",{className:H,children:[(0,t.jsx)(r.Skeleton,{height:20,width:150}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(r.Skeleton,{height:20,width:120}),(0,t.jsx)(r.Skeleton,{height:20,width:120})]})]})]})]})}function Z(){return(0,t.jsxs)(k.ProjectDetailsCard,{children:[(0,t.jsx)(k.ProjectCardDetailsHeader,{title:"Firewall"}),(0,t.jsx)(k.ProjectCardDetailsContent,{children:(0,t.jsx)(k.ProjectCardDetailsEmptyState,{icon:(0,t.jsx)(d.LockClosed,{}),subtitle:"You don't have access to firewall",cta:(0,t.jsx)(_.RequestRoleButton,{teamRole:"MEMBER"})})})]})}function G(e){let{teamSlug:a,projectSlug:s,onRetry:r}=e;return(0,t.jsxs)(k.ProjectDetailsCard,{children:[(0,t.jsx)(k.ProjectCardDetailsHeader,{duration:"24h",href:`/${a}/${s}/firewall?range=1d`,title:"Firewall"}),(0,t.jsx)(k.ProjectCardDetailsContent,{children:(0,t.jsx)(k.ProjectCardDetailsEmptyState,{cta:(0,t.jsx)(l.Button,{className:"text-label-14 font-medium",onClick:r,size:"small",type:"tertiary",children:"Retry"}),icon:(0,t.jsx)(o.Shield,{}),subtitle:"We couldn't load the firewall data"})})]})}let W={success:z.ShieldCheck,warning:S.ShieldWarning,error:D.ShieldOff,disabled:w.Shield};function Q(e){let{className:a,variant:s="success",icons:l,iconSize:r=40}=e,i=l?.[s]||W[s];return(0,t.jsx)("div",{className:(0,m.clsx)("p-[10px]",a,{"text-blue-700 [--status-badge-circle-color:var(--ds-blue-300)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.37)_49.5%,rgba(240,247,255,0.37)_100%)] dark:[--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(10,10,10,0.37)_49.5%,rgba(15,27,45,0.37)_100%)]":"success"===s,"text-amber-700 [--status-badge-circle-color:var(--ds-amber-200)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.37)_49.5%,rgba(255,244,213,0.37)_100%)] dark:[--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(10,10,10,0.37)_49.5%,rgba(52,28,0,0.37)_100%)]":"warning"===s,"text-red-700 [--status-badge-circle-color:var(--ds-red-300)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.22)_49.5%,rgba(255,240,240,0.22)_100%)] dark:[--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(10,10,10,0.22)_49.5%,rgba(42,19,20,0.22)_100%)]":"error"===s,"text-gray-700 [--status-badge-circle-color:var(--ds-gray-300)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.37)_49.5%,rgba(240,247,255,0.37)_100%)] dark:[--status-badge-background-gradient:none]":"disabled"===s}),children:(0,t.jsxs)("div",{className:"relative isolate flex items-center justify-center",children:[(0,t.jsx)(Y,{className:"p-[182px] opacity-50"}),(0,t.jsx)(Y,{className:"p-[115px] opacity-50"}),(0,t.jsx)(Y,{className:"p-[50px]"}),(0,t.jsx)(i,{className:"z-10",size:r})]})})}function Y(e){let{className:a}=e;return(0,t.jsx)("div",{className:(0,m.clsx)(a,"absolute block size-0 rounded-full border border-solid text-[var(--status-badge-circle-color)] [background:var(--status-badge-background-gradient)]")})}e.s(["ProjectFirewallCard",()=>B,"ProjectFirewallCardSkeleton",()=>q])},6498376,e=>{"use strict";var t=e.i(1146226),a=e.i(3306538),s=e.i(5255926),l=e.i(2504781),r=e.i(2640326),i=e.i(5756088),n=e.i(2122549),o=e.i(818351),c=e.i(57106),d=e.i(8042625),m=e.i(8119470),u=e.i(4826595),x=e.i(7946377),h=e.i(9028632),g=e.i(4394132),j=e.i(2442931),p=e.i(2979333),f=e.i(8633387),v=e.i(85322),y=e.i(9161090),b=e.i(745805),N=e.i(4723202);let C={good:"green-subtle",bad:"red-subtle",neutral:"gray-subtle","no-data":"gray-subtle"},w={ssr:{timeout:3e3}};function z(e){let{teamSlug:a,projectSlug:s}=e,{data:l,isLoading:r}=(0,f.useDashboardProject)({teamSlug:a,projectSlug:s});return r||!l?(0,t.jsx)(k,{}):(0,v.isFeatureEnabled)(l.webAnalytics)?(0,t.jsx)(D,{project:l,teamSlug:a}):(0,t.jsx)(S,{project:l,teamSlug:a})}function S(e){let{project:a,teamSlug:s}=e,l=(0,j.useCanToggleWebAnalytics)();return(0,t.jsxs)(b.ProjectDetailsCard,{children:[(0,t.jsx)(b.ProjectCardDetailsHeader,{href:`/${s}/${a.name}/analytics`,title:"Analytics"}),(0,t.jsx)(b.ProjectCardDetailsContent,{children:(0,t.jsx)(b.ProjectCardDetailsEmptyState,{cta:(0,t.jsx)(c.ButtonLink,{className:"text-label-14 font-medium",disabled:!l,href:`/${s}/${a.name}/analytics?enable=1&source=project-overview-analytics-card`,size:"small",type:"tertiary",children:"Enable"}),icon:(0,t.jsx)(r.Analytics,{}),subtitle:"Track visitors and page views"})})]})}function D(e){let{teamSlug:s,project:l}=e,r=(0,u.getRangeFromPeriod)("7d"),{data:i,isLoading:c,error:j,mutate:f}=(0,o.useIsomorphicSWR)(`/api/web-analytics/overview${(0,d.encode)({from:r.from.toISOString(),to:r.to.toISOString(),teamId:s,projectId:l.name})}`,w),{data:v}=(0,o.useIsomorphicSWR)(`/api/web-analytics/overview${(0,d.encode)({from:(0,m.subDays)(r.from,7).toISOString(),to:(0,m.subDays)(r.to,7).toISOString(),teamId:s,projectId:l.name})}`,w),{data:N,isLoading:z}=(0,o.useIsomorphicSWR)(`/api/web-analytics/timeseries${(0,d.encode)({from:r.from.toISOString(),to:r.to.toISOString(),teamId:s,projectId:l.name,tz:(0,x.getClientTimezone)()})}`,w),{data:S,isLoading:D}=(0,o.useIsomorphicSWR)(`/api/web-analytics/realtime${(0,d.encode)({teamId:s,projectId:l.name})}`,{...w,refreshInterval:1e4});if(c&&!i||z&&!N)return(0,t.jsx)(k,{});if(j)return(0,t.jsx)(L,{onRetry:()=>{f()},projectSlug:l.name,teamSlug:s});let P=i?.devices??0,M=(0,p.getPercentageTrend)(v?.devices??0,P),R=!!l.webAnalytics?.hasData;return(0,t.jsxs)(b.ProjectDetailsCard,{className:"relative after:pointer-events-none after:absolute after:inset-0 after:rounded-md after:border after:border-solid after:border-[#fff]/15 after:content-[''] dark:after:hidden",children:[(0,t.jsx)(b.ProjectCardDetailsHeader,{duration:"1w",href:`/${s}/${l.name}/analytics`,title:"Analytics"}),(0,t.jsxs)(b.ProjectCardDetailsContent,{children:[(0,t.jsxs)("div",{className:"flex min-h-[44px] flex-col justify-between gap-1 px-4",children:[(0,t.jsxs)("div",{className:"flex h-[20px] items-center gap-2.5 overflow-visible",children:[R?(0,t.jsxs)("p",{className:"text-label-14 font-medium",children:[new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1,compactDisplay:"short"}).format(P)," Visitors"]}):(0,t.jsx)("p",{className:"text-label-14 text-gray-900",children:"No data"}),"no-data"!==M.type?(0,t.jsxs)(a.Badge,{variant:C[M.type],children:[M.value,M.unit]}):null]}),(0,t.jsx)(y.VisitorCount,{count:S?.devices??0,loading:D})]}),(0,t.jsx)("div",{className:"mt-2.5 h-[138px] w-full",children:(0,t.jsx)(n.ParentSize,{children:e=>{let{width:a,height:s}=e;return(0,t.jsx)(h.Graph,{data:N?.data??[],height:s,margin:{top:0,left:0,right:0,bottom:0},range:r,type:g.AnalyticsType.Visitors,variant:"minimal",width:a})}})})]})]})}function k(){return(0,t.jsxs)(b.ProjectDetailsCard,{children:[(0,t.jsx)(b.ProjectCardDetailsHeader,{duration:"1w",title:"Analytics"}),(0,t.jsx)(b.ProjectCardDetailsContent,{children:(0,t.jsxs)("div",{className:"flex flex-col justify-between gap-1 px-4",children:[(0,t.jsxs)("div",{className:"flex gap-2.5",children:[(0,t.jsx)(s.Skeleton,{height:20,width:100}),(0,t.jsx)(s.Skeleton,{height:20})]}),(0,t.jsx)(s.Skeleton,{height:20,width:100})]})})]})}function P(){return(0,t.jsxs)(b.ProjectDetailsCard,{children:[(0,t.jsx)(b.ProjectCardDetailsHeader,{title:"Analytics"}),(0,t.jsx)(b.ProjectCardDetailsContent,{children:(0,t.jsx)(b.ProjectCardDetailsEmptyState,{icon:(0,t.jsx)(i.LockClosed,{}),subtitle:"You don't have access to analytics",cta:(0,t.jsx)(N.RequestRoleButton,{teamRole:"MEMBER"})})})]})}function L(e){let{teamSlug:a,projectSlug:s,onRetry:i}=e;return(0,t.jsxs)(b.ProjectDetailsCard,{children:[(0,t.jsx)(b.ProjectCardDetailsHeader,{duration:"1w",href:`/${a}/${s}/analytics`,title:"Analytics"}),(0,t.jsx)(b.ProjectCardDetailsContent,{children:(0,t.jsx)(b.ProjectCardDetailsEmptyState,{cta:(0,t.jsx)(l.Button,{className:"text-label-14 font-medium",onClick:i,size:"small",type:"tertiary",children:"Retry"}),icon:(0,t.jsx)(r.Analytics,{}),subtitle:"We couldn't load analytics data"})})]})}e.s(["ProjectAnalyticsCard",()=>z,"ProjectAnalyticsCardNoAccess",()=>P,"ProjectAnalyticsCardSkeleton",()=>k])},5035457,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(5255926),l=e.i(1192207),r=e.i(5756088),i=e.i(7946377),n=e.i(745805),o=e.i(5481907),c=e.i(5182595),d=e.i(8443460),m=e.i(6062041),u=e.i(3851902),x=e.i(4723202);function h(e){let{teamSlug:s,projectSlug:r}=e,x=(0,a.useRef)((0,l.subHours)(new Date,6)),h=(0,a.useRef)(new Date),j=x.current,p=h.current,{data:f,isLoading:v}=(0,o.useSonarQuery)({event:"incomingRequest",reason:"project_overview_card",granularity:{minutes:15},rollups:{count:{measure:"count",aggregation:"sum"}},startTime:j,endTime:p},{disableRefetch:!0}),{data:y,isLoading:b,isRelativeTime:N}=(0,o.useSonarQuery)({event:"serverlessFunctionInvocation",reason:"project_overview_card",granularity:{minutes:15},rollups:{total:{measure:"count",aggregation:"sum"},errors:{measure:"count",aggregation:"sum",filter:d.SERVERLESS_DEFAULT_ERROR_FILTER},timeouts:{measure:"count",aggregation:"sum",filter:d.SERVERLESS_TIMEOUT_FILTER}},limit:500,tailRollup:"truncate",summaryOnly:!1,startTime:j,endTime:p},{disableRefetch:!0}),C=f?.data?.map(e=>({name:e.timestamp.toISOString(),Requests:e.count}))??[],w=(0,a.useMemo)(()=>y?.data?y.data.map(e=>{let{timestamp:t,errors:a,timeouts:s,total:l}=e;return{name:t.toISOString(),Error:0===l?null:(0,m.calculatePercentage)(a,l),Timeout:0===l?null:(0,m.calculatePercentage)(s,l)}}):[],[y?.data]),z=Math.max(...w.flatMap(e=>[e.Error||0,e.Timeout||0])),S=Math.max(...C.map(e=>e.Requests)),D=(0,a.useMemo)(()=>y?.data?y.data.map(e=>{let{timestamp:t,total:a}=e;return{name:t.toISOString(),Invocations:a}}):[],[y?.data]);return(0,t.jsxs)(n.ProjectDetailsCard,{allowOverflow:!0,children:[(0,t.jsx)(n.ProjectCardDetailsHeader,{duration:"6h",href:`/${s}/${r}/observability?period=6h`,title:"Observability"}),(0,t.jsx)(n.ProjectCardDetailsContent,{className:"px-4 pt-0",children:(0,t.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-4",children:[(0,t.jsx)(g,{isLoading:v,title:"Edge Requests",value:(0,i.formatNumberCompact)(f?.summary[0]?.count??0)}),(0,t.jsx)("div",{className:"mt-2.5 h-[35px] w-full",children:(0,t.jsx)(c.LineChart,{data:C,sonarQueryResults:f,isLoading:v,isRelativeTime:N,emptyState:"",hideXAxis:!0,hideYAxis:!0,disableLegend:!0,disableZoom:!0,hideGrid:!0,syncId:"edge-requests",getColor:()=>"var(--geist-success)"})}),(0,t.jsx)(g,{isLoading:b,title:"Function Invocations",value:(0,i.formatNumberCompact)(y?.summary[0]?.total??0)}),(0,t.jsx)("div",{className:"mt-2.5 h-[35px] w-full",children:(0,t.jsx)(c.LineChart,{data:D,sonarQueryResults:y,disableLegend:!0,disableZoom:!0,isLoading:b,isRelativeTime:N,syncId:"function-invocations",emptyState:"",hideXAxis:!0,hideYAxis:!0,hideGrid:!0,getColor:()=>"var(--geist-success)",...S>0?{yAxisDomain:[0,S]}:{}})}),(0,t.jsx)(g,{isLoading:b,title:"Error Rate",value:(0,u.formatPercentage)(y?.summary[0]?.errors??0,y?.summary[0]?.total??0)}),(0,t.jsx)("div",{className:"mt-2.5 h-[35px] w-full",children:(0,t.jsx)(c.LineChart,{data:w,sonarQueryResults:y,disableLegend:!0,disableZoom:!0,emptyState:"",isLoading:b,isRelativeTime:N,getColor:e=>"Error"===e?"var(--geist-error)":"Timeout"===e?"var(--geist-warning)":"var(--geist-success)",syncId:"error-rate",hideXAxis:!0,hideTooltip:0===w.length,hideYAxis:!0,formatValue:m.formatPercentageChart,hideGrid:!0,yAxisDomain:[0,Math.max(5,z)]})})]})})]})}function g(e){let{title:a,value:l,isLoading:r}=e;return(0,t.jsxs)("div",{className:"self-center",children:[(0,t.jsx)("div",{className:"whitespace-nowrap text-gray-800",children:a}),(0,t.jsx)("div",{className:"font-gray-1000 font-medium",children:r?(0,t.jsx)(s.Skeleton,{}):l})]})}function j(){return(0,t.jsxs)(n.ProjectDetailsCard,{allowOverflow:!0,children:[(0,t.jsx)(n.ProjectCardDetailsHeader,{duration:"6h",href:"#",title:"Observability"}),(0,t.jsx)(n.ProjectCardDetailsContent,{className:"px-4 pt-0",children:(0,t.jsxs)("div",{className:"tailwind grid grid-cols-[auto_1fr] gap-4",children:[(0,t.jsx)(g,{isLoading:!0,title:"Edge Requests",value:""}),(0,t.jsx)("div",{className:"mt-2.5 h-[35px] w-full border-b border-gray-200"}),(0,t.jsx)(g,{isLoading:!0,title:"Function Invocations",value:""}),(0,t.jsx)("div",{className:"mt-2.5 h-[35px] w-full border-b border-gray-200"}),(0,t.jsx)(g,{isLoading:!0,title:"Error Rate",value:""}),(0,t.jsx)("div",{className:"mt-2.5 h-[35px] w-full border-b border-gray-200"})]})})]})}function p(){return(0,t.jsxs)(n.ProjectDetailsCard,{children:[(0,t.jsx)(n.ProjectCardDetailsHeader,{title:"Observability"}),(0,t.jsx)(n.ProjectCardDetailsContent,{children:(0,t.jsx)(n.ProjectCardDetailsEmptyState,{icon:(0,t.jsx)(r.LockClosed,{}),subtitle:"You don't have access to observability",cta:(0,t.jsx)(x.RequestRoleButton,{teamRole:"MEMBER"})})})]})}e.s(["ProjectObservabilityCard",()=>h,"ProjectObservabilityCardNoAccess",()=>p,"ProjectObservabilityCardSkeleton",()=>j])},9593963,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(6280036),l=e.i(7087273),r=e.i(5255926),i=e.i(199192),n=e.i(4141852),o=e.i(1574218),c=e.i(745805),d=e.i(9317241),m=e.i(3992079),u=e.i(5579912),x=e.i(5149014),h=e.i(4766294),g=e.i(4994408),j=e.i(1460262),p=e.i(4396019),f=e.i(6850581),v=e.i(1829577),y=e.i(5883567),b=e.i(5760285),N=e.i(7946377);e.i(7962521);var C=e.i(8171146);function w(e){let{ip:s,events:l}=e,[r,...i]=l,n=new Date(`${r.startTime}Z`).getTime(),o=i.reduce((e,t)=>e+t.count,r.count),c=(0,a.useMemo)(()=>{let e=(0,b.formatRelativeTime)(n);return"now"===e?e:`${e} ago`},[n]);return r?(0,t.jsxs)("div",{className:"group flex *:py-1.5 *:shrink-0 *:last:mb-2 ml-2 mr-2 even:my-0.5",children:[(0,t.jsx)("div",{className:"p-2 pr-3 rounded-l-[6px] group-odd:bg-foreground/[2%] dark:group-odd:bg-foreground/[5%]",children:(0,t.jsx)(S,{type:r.action})}),(0,t.jsxs)("div",{className:`
        flex grow justify-end items-center
        text-gray-900 text-right gap-1
        pr-2 rounded-r-[6px]
        group-odd:bg-foreground/[2%]
        dark:group-odd:bg-foreground/[5%]
        text-label-12
      `,children:[(0,t.jsx)("p",{className:"text-gray-900 tabular-nums",children:r.public_ip}),(0,t.jsx)("p",{children:"•"}),(0,t.jsx)(f.RelativeTimeCard,{date:n,className:"cursor-default text-gray-900",children:c}),(0,t.jsx)("p",{className:"w-9 font-medium text-gray-1000",children:(0,N.formatNumberCompact)(o)})]})]}):null}function z(e){let{allEvents:a}=e,s=a.flatMap(e=>{let[,t]=e;return t});if(!s.length)return null;let l=s.reduce((e,t)=>e+t.count,0);return(0,t.jsxs)("div",{className:`
        flex gap-3 justify-between grow text-right items-center text-label-12
        px-2.5 py-1.5 mx-1.5 mb-1.5 rounded-[6px]
        tabular-nums
        odd:bg-foreground/[2%] dark:odd:bg-foreground/5
      `,children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 font-medium text-gray-800",children:[(0,t.jsx)(y.PlusCircle,{size:14}),(0,t.jsxs)("span",{children:[s.length," Event",1===s.length?"":"s"]})]}),(0,t.jsx)("p",{className:"w-9 font-medium text-gray-800",children:(0,N.formatNumberCompact)(l)})]})}function S(e){let{type:a,className:s=""}=e;switch(a){case"challenge":return(0,t.jsxs)("div",{className:`flex items-center gap-1.5 text-gray-1000 ${s}`,children:[(0,t.jsx)(v.FirewallCheck,{size:14}),(0,t.jsx)("span",{className:"text-label-12 font-medium",children:"Challenge"})]});case"block":case"deny":return(0,t.jsxs)("div",{className:`flex items-center gap-1.5 text-gray-1000 ${s}`,children:[(0,t.jsx)(n.FirewallFlame,{size:14}),(0,t.jsx)("span",{className:"text-label-12 font-medium",children:"Deny"})]});case"system-action":return(0,t.jsxs)("div",{className:`flex items-center gap-1.5 text-gray-1000 ${s}`,children:[(0,t.jsx)(C.FirewallGlobe,{size:14}),(0,t.jsx)("span",{className:"text-label-12 font-medium",children:"System Action"})]});default:return(0,t.jsx)("p",{children:a})}}function D(e){let{projectSlug:i,teamSlug:f}=e,v=(0,u.useProxyModal)(),{loading:y,anomaly:b,globalBypass:N,challengeMode:C,deployment:S,events:D,reverseProxy:k}=function(e){let{teamSlug:t,projectSlug:s,onProxyClick:l}=e,r={teamId:t,projectId:s,size:"sm"},{data:i,isLoading:n}=(0,h.useProjectPageProject)(),{isLoading:o,hasAnomaly:c}=(0,x.useActiveAnomaly)(r),[d,m,u]=(0,x.useGlobalBypass)(r),[f,v,y]=(0,x.useReverseProxyBadge)({...r,onProxyClick:l}),[b,N,,C]=(0,x.useACMBadge)(r),{deployment:w,isLoading:z}=(0,p.useProjectProductionDeployment)(s),{current:[S,D]}=(0,a.useRef)([Date.now()-864e5,Date.now()]),{data:k,isLoading:P}=(0,j.useFirewallEvents)({...r,startTime:S,endTime:D}),L=(0,g.useLoadingStates)(n,o,u,y,C,z,P),M=(0,a.useRef)(!1);return P||(M.current=!0),{loading:L,project:i,anomaly:{has:c},globalBypass:{has:d,Badge:m},reverseProxy:{has:f,Badge:v},challengeMode:{has:b,Badge:N},deployment:{has:!!i?.latestDeployments?.length,hasProduction:!!w},events:{loading:{is:P,has:M.current},has:!!k?.actions.length,data:(0,j.groupEventsByIp)(k?.actions??[])}}}({...e,onProxyClick:v.open}),L=(0,a.useMemo)(()=>{let[e,a,s,...l]=Object.entries(D.data);return D.loading.is&&!D.loading.has?(0,t.jsx)("div",{className:"flex m-3.5",children:(0,t.jsx)(r.Skeleton,{className:"!w-full",height:120})}):D.has?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{ip:e[0],events:e[1]}),a?(0,t.jsx)(w,{ip:a[0],events:a[1]}):null,s?(0,t.jsx)(w,{ip:s[0],events:s[1]}):null,(0,t.jsx)(z,{allEvents:l})]}):(0,t.jsx)("div",{className:"m-3.5 mt-0 h-[120px] rounded-[6px] bg-gray-100/50 dark:bg-[rgba(0,0,0,15%)] grid place-items-center text-gray-900",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 items-center text-label-13",children:[(0,t.jsx)(n.FirewallFlame,{size:24}),(0,t.jsx)("p",{children:"No recent events"})]})})},[D]),{resolvedTheme:M}=(0,s.useTheme)(),R=(0,a.useCallback)((e,t)=>e.includes("amber")?"dark"===M?"#2b1205":"#FFFBF5":e.includes("blue")?"dark"===M?"#0B1522":"#F5FAFF":e.includes("red")?"dark"===M?"#2A1314":"#FFF5F5":("production"!==o.VERCEL_ENV&&console.warn(`Unknown color (\`${e}\`) for color function.`),e),[M]),V=(0,a.useMemo)(()=>N.has?(0,t.jsx)("p",{className:"text-red-700",children:"Inactive · System mitigations paused"}):b.has?(0,t.jsx)("p",{className:"text-amber-700",children:"Active · DDoS attacks are being mitigated"}):S.has?C.has?(0,t.jsx)("p",{className:"text-amber-900",children:"Active · All requests are being challenged"}):(0,t.jsx)("p",{className:"text-blue-700",children:"Active · All systems normal"}):(0,t.jsx)("p",{className:"text-gray-900",children:"No live deployments"}),[b.has,N.has,S.has,C.has]),A=(0,a.useMemo)(()=>N.has?"[&_strong]:!text-red-1000 [&_time]:!text-red-900":C.has?"[&_strong]:!text-amber-1000 [&_time]:!text-amber-900":"",[C.has,N.has]);return y.is&&!y.has?(0,t.jsx)(P,{}):(0,t.jsxs)(d.GradientPostureCard,{hasAnomaly:b.has,hasDeployments:S.has,hasChallengeMode:C.has,hasGlobalBypass:N.has,size:"sm",colorFunction:(e,t)=>R(e,t),className:"@container",children:[(0,t.jsx)(c.ProjectCardDetailsHeader,{className:A,duration:"24h",href:`/${f}/${i}/firewall?range=1d`,title:"Firewall",children:k.has?(0,t.jsx)("div",{className:"ml-1.5 [--badge-bg:var(--ds-gray-alpha-300)] z-10",children:(0,t.jsx)(k.Badge,{})}):null}),(0,t.jsxs)("div",{className:"flex flex-col justify-between grow",children:[(0,t.jsx)("div",{className:"px-3.5 text-label-14 font-medium",children:V}),(0,t.jsx)(l.Scroller,{childrenContainerClassName:"!flex-col min-w-[var(--min-size)]",className:"rounded-md",height:"auto",overflow:"x",children:L})]}),v.isOpen&&(0,t.jsx)(m.ProxyImpactModal,{onClose:v.close,projectId:i,teamId:f})]})}function k(){return(0,t.jsx)("div",{className:`
        isolate relative
        rounded-md bg-background-100
        shadow-sm
      `,children:(0,t.jsx)(c.ProjectCardDetailsHeader,{className:"[&>div]:w-full",duration:"24h",title:"Firewall",children:(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsx)(i.ChevronRightSmall,{size:14,color:"gray-700"})})})})}function P(){return(0,t.jsxs)(d.GradientPostureCard,{hasAnomaly:!1,hasDeployments:!1,hasChallengeMode:!1,hasGlobalBypass:!1,size:"sm",children:[(0,t.jsx)(c.ProjectCardDetailsHeader,{className:"[&>div]:w-full h-12",duration:"24h",title:"Firewall",children:(0,t.jsx)("div",{className:"ml-auto w-6 h-6 flex items-center justify-center",children:(0,t.jsx)(i.ChevronRightSmall,{size:16,color:"gray-700"})})}),(0,t.jsxs)(c.ProjectCardDetailsContent,{className:"flex flex-col justify-between m-3.5 mt-0",children:[(0,t.jsx)(r.Skeleton,{width:200,height:20}),(0,t.jsx)("div",{className:"flex",children:(0,t.jsx)(r.Skeleton,{className:"!w-full",height:120})})]})]})}e.s(["ProjectSCP",()=>D,"ProjectSCPSkeleton",()=>P,"SparseProjectSCPSkeleton",()=>k],9593963)}]);

//# debugId=a92330b4-4513-8037-7607-de9ac629af2d
//# sourceMappingURL=c0b4270261fc24d8.js.map