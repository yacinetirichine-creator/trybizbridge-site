;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="98a2568d-71dd-ed67-e225-2146d3803b81")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,361349,e=>{"use strict";var t=e.i(5169864);e.s(["useInterval",0,(e,r,n)=>{let a=(0,t.useRef)(e);(0,t.useEffect)(()=>{a.current=e},[e]),(0,t.useEffect)(()=>{if(null===r)return;n&&a.current();let e=new AbortController;return function(e,t,r){let n="number"==typeof document.timeline?.currentTime?document.timeline.currentTime:performance.now();function a(t){r.aborted||(e(),i(t))}function i(e){let r=Math.round((e-n)/t)*t;setTimeout(()=>requestAnimationFrame(a),n+r+t-performance.now())}i(n)}(()=>a.current(),r,e.signal),()=>e.abort()},[n,r])}])},5166685,e=>{"use strict";function t(e,t){return new Intl.ListFormat("en",t).format(e)}e.s(["toListSentence",()=>t])},8230165,(e,t,r)=>{var n=e.r(6684016),a=0;t.exports=function(e){var t=++a;return n(e)+t}},187815,e=>{"use strict";let t=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function r(e){let r,n={},a=e.toString();for(a=a.replace(/\r\n?/gm,"\n");null!=(r=t.exec(a));){let e=r[1],t=r[2]||"",a=(t=t.trim())[0];t=t.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===a&&(t=(t=t.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")),n[e]=t}return n}e.s(["parseEnv",()=>r])},4482823,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.25 15V11.0311C7.25 10.2613 6.41667 9.78019 5.75 10.1651L2.31287 12.1495L1.56287 10.8505L5.00006 8.86602C5.66673 8.48112 5.66673 7.51886 5.00006 7.13396L1.5629 5.14952L2.3129 3.85048L5.75 5.83489C6.41667 6.21979 7.25 5.73867 7.25 4.96886V1H8.75V4.96894C8.75 5.73874 9.58333 6.21986 10.25 5.83496L13.6872 3.85048L14.4372 5.14952L11.0001 7.13396C10.3334 7.51886 10.3334 8.48112 11.0001 8.86602L14.4373 10.8505L13.6873 12.1495L10.25 10.165C9.58333 9.78012 8.75 10.2612 8.75 11.031V15H7.25Z" fill="currentColor"/>');e.s(["Asterisk",0,t])},4551858,e=>{"use strict";var t=e.i(2405338);let r=async e=>{let t=await fetch(e,{mode:"cors"});if(!t.ok)return{error:"Failed to load content."};if(t.url.includes("/v7/deployments/")){let{data:e}=await t.json(),r=atob(e),n=r.length,a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=r.charCodeAt(e);return new TextDecoder().decode(a)}return t.text()};function n(e,n){return(0,t.default)(()=>{if(!e||!e.link||"lambda"===e.type||"middleware"===e.type)return"";let t=new URL(e.link,location.href);if("vercel.com"===t.hostname){n&&t.searchParams.set("teamId",n);let e=t.searchParams.toString();return`${t.pathname}${e?"?":""}${e}`}return e.link},r,{keepPreviousData:!0,revalidateOnFocus:!1})}e.s(["useFileContent",()=>n])},7577497,e=>{"use strict";var t=e.i(5169864),r="undefined"==typeof window?t.default.useEffect:t.default.useLayoutEffect,n=0,a=()=>++n,i=!1;function l(){let[e,l]=t.default.useState(i?a:void 0);return r(()=>{void 0===e&&l(++n),i=!0},[]),void 0===e?e:`rwb-${e.toString(32)}`}var s="__wrap_b",o="__wrap_n",c="__wrap_o",d=(e,t,r)=>{let n=(r=r||document.querySelector(`[data-br="${e}"]`)).parentElement,a=e=>r.style.maxWidth=e+"px";r.style.maxWidth="";let i=n.clientWidth,l=n.clientHeight,s=i/2-.25,o=i+.5,c;if(i){for(a(s),s=Math.max(r.scrollWidth,s);s+1<o;)a(c=Math.round((s+o)/2)),n.clientHeight===l?o=c:s=c;a(o*t+i*(1-t))}r.__wrap_o||"undefined"!=typeof ResizeObserver&&(r.__wrap_o=new ResizeObserver(()=>{self.__wrap_b(0,+r.dataset.brr,r)})).observe(n)},u=d.toString(),f=function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n&&(n=`self.${o}!=1&&${n}`),t.default.createElement("script",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:(e?"":`self.${o}=self.${o}||(self.CSS&&CSS.supports("text-wrap","balance")?1:2);self.${s}=${u};`)+n},nonce:r})},v=t.default.createContext(!1),m=e=>{let{nonce:r,children:n}=e;return t.default.createElement(v.Provider,{value:!0},f(!1,r),n)},h=e=>{let{ratio:n=1,nonce:a,children:i,...u}=e,m=t.default.useMemo(()=>"useId"in t.default?t.default.useId:l,[])(),h=t.default.useRef(),x=t.default.useContext(v),p=u.as||"span";return r(()=>{1!==self[o]&&h.current&&(self[s]=d)(0,n,h.current)},[i,n]),r(()=>{if(1!==self[o])return()=>{if(!h.current)return;let e=h.current[c];e&&(e.disconnect(),delete h.current[c])}},[]),t.default.createElement(t.default.Fragment,null,t.default.createElement(p,{...u,"data-br":m,"data-brr":n,ref:h,style:{display:"inline-block",verticalAlign:"top",textDecoration:"inherit",textWrap:"balance"},suppressHydrationWarning:!0},i),f(x,a,`self.${s}("${m}",${n})`))};e.s(["Balancer",()=>h,"Provider",()=>m,"default",()=>h])},935882,e=>{"use strict";let t=e.i(5169864).useLayoutEffect;e.s(["default",0,t])},7401972,e=>{"use strict";var t=e.i(5169864),r=e.i(1269010),n=e.i(8042625),a=e.i(277234),i=e.i(4244280),l=e.i(5338940),s=e.i(935882);function o(e){let{project:o,includeProductionBranch:d,query:u,limit:f,active:v,includeDeploymentInfo:m,readyStateFilter:h}=e,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:p,team:E}=(0,l.useTeam)(),[g,j]=(0,t.useState)(""),y={search:u&&c(u)?`"${u}"`:u,active:v?"1":null,teamId:E?.id,includeDeployments:m?"1":null,limit:f,state:h},S=(0,r.default)((e,t)=>{if(!o)return null;if(!e)return p?`${(0,i.API_PROJECTS_VERSION)("v5")}/${o.id}/branches/${(0,n.encode)(y)}`:null;let r=t&&f&&t.branches.length>=f?t.until:null;return r&&p?`${(0,i.API_PROJECTS_VERSION)("v5")}/${o.id}/branches/${(0,n.encode)({...y,until:r})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}).then(e=>({...e,query:u})),x),b=o?.link?.productionBranch,T=(0,t.useMemo)(()=>{let e;if(!S.data)return;if(m){let t,r=[];for(let n of S.data)for(let a of(e=n.query,n.branches))b&&a.branch===b?t=a:r.push(a);return{query:e,result:(d&&t?[t,...r]:r).filter(e=>!!e.deployment).sort((e,t)=>t.deployment.createdAt-e.deployment.createdAt)}}let t=new Set;for(let r of S.data)for(let n of(e=r.query,r.branches))t.add(n.branch);return{query:e,result:(b&&t.has(b)&&t.delete(b),d&&b?[b,...t]:[...t])}},[S.data,d,b,m]);(0,s.default)(()=>{T?.query&&j(T.query)},[T?.query,j]);let A=!!S.data,C=A&&T?.result.length===0,P=A&&S.data&&S.size>S.data.length,w=!f||A&&S.data&&S.data[S.data.length-1]?.branches.length<f;return[S,{branches:T?.result,fetchedQuery:g,initialDataLoaded:A,isValidating:S.isValidating,isEmpty:C,loadMore:()=>S.setSize(e=>e+1),isLoadingMore:P,isReachingEnd:w,mutate:S.mutate}]}let c=e=>+e==+e;e.s(["useProjectDeployedBranches",()=>o])},2928617,e=>{"use strict";var t=e.i(2405338),r=e.i(8042625),n=e.i(277234),a=e.i(4244280),i=e.i(5338940);function l(e,l){let{team:s}=(0,i.useTeam)(),o=s?.id;return(0,t.default)(e?`${a.API_INTEGRATION_CONTROLLER}/git-branches${(0,r.encode)({projectId:e,teamId:o})}`:"",e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),l)}e.s(["useProjectBranches",()=>l])},6949145,e=>{"use strict";var t=e.i(5169864),r=e.i(8248823),n=e.i(455575),a=e.i(277234),i=e.i(4244280),l=e.i(5338940);function s(){let{team:e,isReady:s,isLoading:o,mutate:c}=(0,l.useTeam)(),d=(0,n.useToasts)(),[u,f]=(0,t.useState)(!1),[v,m]=(0,t.useState)(null),h=e?.sensitiveEnvironmentVariablePolicy||"default",[x,p]=(0,t.useState)(h),E=!o&&x!==h;(0,t.useEffect)(()=>{o||p(h)},[o]);let g=async()=>{f(!0),m(null);try{if(!e)throw Error("Team not found");await (0,a.fetchAPI)(`${i.API_TEAMS}/${e.id}`,{method:"PATCH",body:{sensitiveEnvironmentVariablePolicy:x},throwOnHTTPError:!0}),c(),d.success("Updated Environment Variable Policy setting successfully.")}catch(e){m((0,r.normalizeError)(e))}f(!1)};return{state:h,team:e,error:v,saving:u,isTeamReady:s,isLoading:o,handleSave:g,hasChangedSensitiveEnvVarPolicy:E,sensitiveEnvVarPolicySetting:x,setSensitiveEnvVarPolicySetting:p}}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"on":return!0;case"off":return!1;default:return t}}e.s(["getBooleanValueFromOnOffDefault",()=>o,"useSensitiveEnvironmentVariablePolicy",()=>s])},2383382,e=>{"use strict";var t=e.i(2405338),r=e.i(1269010),n=e.i(5169864),a=e.i(8042625),i=e.i(277234),l=e.i(4244280),s=e.i(1717203),o=e.i(7557283);function c(e){let{teamId:s,projectId:o,ids:c,excludeIds:d,excludeProjectId:u}=e,{limit:f=8,search:v,revalidateFirstPage:m=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},x=arguments.length>3&&void 0!==arguments[3]&&arguments[3],p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],E=(0,r.default)((e,t)=>{if(!e)return`${l.API_SHARED_ENV_VARIABLES}${(0,a.encode)({limit:f,search:v,teamId:s,projectId:o,ids:c,exclude:{ids:d??null,projectId:u??null}})}`;if(t&&t.length>=f){let e=t[t.length-1];return`${l.API_SHARED_ENV_VARIABLES}${(0,a.encode)({until:e.updatedAt||e.createdAt-1,limit:f,search:v,teamId:s,projectId:o,ids:c,exclude:{ids:d??null,projectId:u??null}})}`}return null},async e=>(await (0,i.fetchAPI)(e,{throwOnHTTPError:!0})).data,{...h,keepPreviousData:p,revalidateFirstPage:m,persistSize:!0}),g=!!E.data,j=g&&E.data[E.data.length-1]?.length<f,y=(0,n.useMemo)(()=>E.data?E.data.flat():[],[E.data]),S=g&&0===y.length,b=g&&E.size>E.data.length;return(0,t.default)(()=>{if(!x||!E.data||j)return null;let e=E.data[E.data.length-1];return`${l.API_SHARED_ENV_VARIABLES}${(0,a.encode)({until:(e[e.length-1].updatedAt??e[e.length-1].createdAt)-1,limit:f,search:v,teamId:s,projectId:o,ids:c,exclude:{ids:d??null,projectId:u??null}})}`},e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0})),[E,{envVars:y,initialDataLoaded:g,isEmpty:S,loadMore:()=>E.setSize(e=>e+1),isLoadingMore:b,isReachingEnd:j,isValidating:E.isValidating}]}function d(e,r,n,a){let{can:l,isLoading:c}=(0,s.default)(r?{projectIdOrName:r}:void 0),d=l(o.Action.List,o.Resource.ProjectEnvVars),f=e&&!c&&d;return(0,t.default)(()=>f?u({teamId:e,ids:n,projectId:r}):"",async e=>{let{data:t}=await (0,i.fetchAPI)(e,{throwOnHTTPError:!0});return{envs:t}},a)}function u(e){let{teamId:t,projectId:r,ids:n}=e;return`${l.API_SHARED_ENV_VARIABLES}/all${(0,a.encode)({teamId:t,projectId:r,ids:n})}`}e.s(["getUseSharedEnvsSWRKey",()=>u,"useSharedEnvVarsInfinite",()=>c,"useTeamSharedEnvs",()=>d])},6116602,e=>{e.v({optionBranch:"env-variables-filter-module__XqclKW__optionBranch"})},996802,1411137,6506227,e=>{"use strict";var t=e.i(1146226),r=e.i(5169864),n=e.i(5924191),a=e.i(8248823),i=e.i(455575),l=e.i(7713873),s=e.i(1717203),o=e.i(7557283),c=e.i(6899807),d=e.i(5323212),u=e.i(6881349),f=e.i(5255926),v=e.i(4004502),m=e.i(5927860),h=e.i(8835183),x=e.i(4345845),p=e.i(8249095),E=e.i(7957424),g=e.i(6116602);function j(e){let{envs:r,search:n,setSearch:a,envOrBranchFilter:i,setEnvOrBranchFilter:s,sortTarget:o,setSortTarget:c,disabled:j,disableEnvironmentSelector:y,isLoading:S,project:b}=e,T=Array.from(new Set((r||[]).map(e=>e.gitBranch??null).filter(Boolean))).sort((e,t)=>e.localeCompare(t)),{isLoading:A,data:{environments:C}}=(0,E.useAllEnvironments)(b);return(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-[50%]",children:(0,t.jsx)(h.SearchInput,{"data-testid":(0,v.tid)("env-variables-filter","search-input"),disabled:j,maxLength:256,onChange:e=>a(e.target.value),placeholder:"Search…",value:n,width:"100%"})}),s?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-[25%]",children:(0,t.jsxs)(u.Combobox,{clearable:!1,"data-testid":(0,v.tid)("env-variables-filter","select"),disabled:j||y,noInputPrefix:!0,onChange:e=>s(e||l.allEnvironmentsFilter),value:i,children:[(0,t.jsx)(f.Skeleton,{show:!!(A||S),children:(0,t.jsx)(u.Combobox.Input,{})}),(0,t.jsx)(u.Combobox.List,{maxWidth:450,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Combobox.Option,{value:l.allEnvironmentsFilter,children:"All Environments"}),void 0===b&&(0,t.jsx)(u.Combobox.Option,{value:l.allCustomEnvironmentsFilter,children:"All Custom Environments"}),(0,t.jsx)(u.Combobox.Option,{value:(0,l.mapToEnvFilter)(m.EnvTarget.Production),children:"Production"}),(0,t.jsx)(u.Combobox.Option,{value:(0,l.mapToEnvFilter)(m.EnvTarget.Development),children:"Development"}),(0,t.jsx)(u.Combobox.Option,{value:(0,l.mapToEnvFilter)(m.EnvTarget.Preview),children:"Preview"}),C.filter(e=>(0,l.isCustomEnvId)(e.id)).sort((e,t)=>e.slug.localeCompare(t.slug)).map(e=>(0,t.jsx)(u.Combobox.Option,{className:g.default.optionBranch,value:e.id,children:e.slug},e.id)),T.map(e=>(0,t.jsx)(u.Combobox.Option,{prefix:(0,t.jsx)(x.GitBranch,{}),value:e,children:(0,t.jsx)("span",{className:`text-copy-14-mono ${g.default.optionBranch}`,children:e})},e))]})})]})}):null,(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start max-w-[184px] flex-[25%]",children:(0,t.jsxs)(d.Select,{disabled:j,onChange:e=>c(e.target.value),placeholder:"Sort by…",prefix:(0,t.jsx)(p.SortDescending,{}),value:o,children:[(0,t.jsx)("option",{value:"createdAt",children:"Last Updated"}),(0,t.jsx)("option",{value:"key",children:"Name"}),(0,t.jsx)("option",{value:"type",children:"Type"})]})})]})}function y(e,t){return Array.isArray(e)?e.includes(t):e===t}function S(e){let{envsInput:t,search:n,envOrBranchFilter:a,sortTarget:i}=e,s=(0,r.useMemo)(()=>{if(!t)return[];let e=n?t.filter(e=>e.key.toLowerCase().includes(n.toLowerCase())):t;if((0,l.isEnvFilter)(a)){if(a===l.allEnvironmentsFilter)return e;if(a===l.allCustomEnvironmentsFilter)return e.filter(e=>!!e.applyToAllCustomEnvironments);if(a===(0,l.mapToEnvFilter)(m.EnvTarget.Production))return e.filter(e=>y(e.target,m.EnvTarget.Production));if(a===(0,l.mapToEnvFilter)(m.EnvTarget.Development))return e.filter(e=>y(e.target,m.EnvTarget.Development));if(a===(0,l.mapToEnvFilter)(m.EnvTarget.Preview))return e.filter(e=>y(e.target,m.EnvTarget.Preview));if((0,l.isCustomEnvId)(a))return e.filter(e=>e.applyToAllCustomEnvironments||e.customEnvironmentIds?.includes(a))}return e.filter(e=>e.gitBranch===a)},[t,n,a]);return(0,r.useMemo)(()=>i&&"contentHint"!==i?"createdAt"===i?s.sort((e,t)=>(t.updatedAt??t.createdAt)-(e.updatedAt??e.createdAt)):s.sort((e,t)=>(e[i]?.toString()??"").localeCompare(t[i]?.toString()??"")):s,[s,i])}e.s(["EnvVariablesFilter",()=>j],1411137),e.s(["useFilteredEnvs",()=>S],6506227);var b=e.i(4171299),T=e.i(5119716);function A(e){let{teamId:d,project:u,withFilters:f=!0,sharedEnvs:v,projectEnvs:m,mutateSharedEnvVarData:h,isLoading:x,SWRCacheKey:p,envOrBranchFilter:E,sortTarget:g,setEnvOrBranchFilter:y,setSortTarget:A,search:C,setSearch:P,currentEditingEnv:w,setCurrentEditingEnv:I}=e,V=(0,i.useToasts)(),{cache:N}=(0,n.useSWRConfig)(),[R,_]=(0,r.useState)(""),[L,O]=(0,r.useState)(E??l.allEnvironmentsFilter),[F,$]=(0,r.useState)("createdAt");!f&&(C&&P&&(R=C,_=P),E&&y&&(L=E,O=y),g&&A&&(F=g,$=A));let D=u?.id,{can:B,isLoading:k}=(0,s.default)(D?{projectIdOrName:D}:void 0),M=B(o.Action.Read,D?o.Resource.ProjectEnvVars:o.Resource.SharedEnvVars),H=B(o.Action.Read,D?o.Resource.ProjectEnvVarsProduction:o.Resource.SharedEnvVarsProduction),W=B(o.Action.Delete,o.Resource.SharedEnvVarConnection),U=(0,c.useRemoveEnvModal)(void 0,h),{decryptEnvVar:z}=(0,T.useDecryptEnvVar)(p,h,{teamId:d,projectId:D}),q=M||H,K=S({envsInput:v,search:R,envOrBranchFilter:L,sortTarget:F}),J=(0,r.useCallback)(async(e,t)=>{try{await (0,b.removeProjectFromSharedEnvVar)({envVar:e,projectId:t,teamId:d}),h(),V.success("Successfully unlinked Shared Environment Variable")}catch(e){V.error((0,a.normalizeError)(e).message)}},[h,d,V]),G=(0,r.useCallback)(e=>m?m.filter(t=>t.key===e.key).reduce((t,r)=>((Array.isArray(r.target)?r.target:[r.target]).forEach(r=>{e.target.includes(r)&&t.push(r)}),t),[]):[],[m]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[f?(0,t.jsx)(j,{disabled:!1,envOrBranchFilter:L,envs:v,project:D,search:R,setEnvOrBranchFilter:O,setSearch:_,setSortTarget:$,sortTarget:F}):null,(0,t.jsx)(c.default,{canReadProductionValues:H,canUnlinkSharedEnvVariable:W,currentEditingEnv:w,disabled:x||k||!q,envVariables:K,getOverriddenTargetsForSharedEnvVar:G,isLoading:x||k,onRemove:e=>{void 0!==D?J(e,D):U.open(e)},onSave:e=>{let t=N.get(p)?.data;if(t.envs.length>0){let r=[...t.envs],n=r.findIndex(t=>t.id===e.id),a={...r[n],...e,decrypted:!1};r[n]=a,h({envs:r},!1),z(a)}},onViewEnvironmentVariable:z,projectId:D,search:R,setCurrentEditingEnv:I,teamId:d,textConfig:{emptyState:{title:D?"No Shared Environment Variables are linked to this app.":"No Shared Environment Variables are set.",description:D?`Shared Environment Variables are set at the ${d?"Team":"Account"} level
              and are inherited by this Project.`:"Shared Environment Variables are set at the Team level."}},withEnvs:!0,withSecrets:!1})]}),U.modal]})}e.s(["TEVTable",()=>A],996802)},1886416,e=>{"use strict";var t=e.i(1146226),r=e.i(9318197),n=e.i(5924191),a=e.i(5610834),i=e.i(5169864),l=e.i(7713873),s=e.i(5338940),o=e.i(1717203),c=e.i(7557283),d=e.i(1411137),u=e.i(6899807),f=e.i(9722978),v=e.i(8248823),m=e.i(4030453),h=e.i(6891161),x=e.i(455575),p=e.i(5468328),E=e.i(2064047),g=e.i(4272098),j=e.i(5166685),y=e.i(3285452),S=e.i(8042625),b=e.i(277234),T=e.i(4244280);async function A(e){let{envVar:t,environment:r,projectId:n,teamId:a}=e;return n&&a?(0,b.fetchAPI)(`${(0,T.API_PROJECTS_VERSION)("v1")}/${n}/env/${t.id}/detach${(0,S.encode)({teamId:a})}`,{method:"POST",throwOnHTTPError:!0,body:JSON.stringify({environmentId:r.id})}):null}var C=e.i(5601055),P=e.i(42012),w=e.i(4251055);function I(e){let{envVar:r,environmentNames:n}=e;return(0,t.jsx)(E.Entity,{left:r?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center flex-initial w-6 h-6",children:(0,t.jsx)(P.default,{env:r})}):null,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-center gap-0.5 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-1000",children:r?.key}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:(0,t.jsx)(p.Tooltip,{center:!1,text:n.join(",\n"),children:(0,j.toListSentence)(n)})})]})})}var V=e.i(4298868),N=e.i(7855500),R=e.i(6060673),_=e.i(5119716),L=e.i(996802),O=e.i(2383382),F=e.i(6506227);function $(e){let{search:p,setSearch:E,isEnvironmentLoading:j,environment:S,sortTarget:b,setSortTarget:T,shouldDisableEnvRow:P}=e,{project:$}=(0,a.useParams)()??{project:""},{cache:D}=(0,n.useSWRConfig)(),[B,k]=(0,i.useState)(null),{data:M,isLoading:H,mutate:W}=(0,V.default)($,{refreshInterval:e=>(0,l.isCustomEnvId)(Z)?(e?.envs.length||0)>0?0:2e3:0,revalidateOnFocus:!B}),{data:U}=(0,R.useProject)($),z=U?.id,q=(0,u.useRemoveEnvModal)(z,W),K=function(e,n,a){let[o,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),[p,E]=(0,i.useState)(!1),[j,S]=(0,i.useState)(null),b=(0,x.useToasts)(),{team:T}=(0,s.useTeam)(),P=(0,i.useCallback)(e=>{S(e),c(!0)},[]),V=(0,i.useCallback)(()=>{c(!1)},[]),N=(0,i.useCallback)(()=>{E(!1),u(null),S(null)},[]),R=(0,i.useCallback)(async()=>{if(j&&a){E(!0);try{await A({envVar:j,projectId:e,teamId:T?.id,environment:a}),await n(),V(),b.success("Detached Environment Variable successfully.")}catch(e){u((0,v.normalizeError)(e))}finally{E(!1)}}},[j,e,T?.id,a,V,b,n]),_=[];j?.customEnvironmentIds&&_.push(...j.customEnvironmentIds),j?.target&&((0,g.default)(j.target)?_.push(...j.target):_.push(j.target)),j?.applyToAllCustomEnvironments&&_.push(C.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID);let L=new Set(_),O=new Set(_.filter(e=>e!==a?.id)),{environmentNamesList:F}=(0,C.useCustomEnvironmentsPrettyLabel)({selectedEnvironmentIds:L}),{environmentNamesList:$}=(0,C.useCustomEnvironmentsPrettyLabel)({selectedEnvironmentIds:O}),D=(0,f.clsx)(w.default.section,"overflow-hidden rounded border border-solid border-gray-alpha-400");return{modal:(0,i.useMemo)(()=>(0,t.jsxs)(h.Modal.Modal,{active:o,onAnimationDone:N,onClickOutside:V,children:[(0,t.jsxs)(h.Modal.Body,{children:[(0,t.jsx)(h.Modal.Header,{children:(0,t.jsx)(h.Modal.Title,{children:"Detach Environment Variable"})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:(0,t.jsxs)("p",{className:"text-copy-14",children:["Detaching the ",(0,t.jsx)("code",{children:j?.key})," environment variable will create a copy for the"," ",a?(0,l.envName)(a):"current"," environment only, and remove"," ",a?(0,l.envName)(a):"current"," from the original variable."]})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Before"}),(0,t.jsx)("div",{className:D,children:(0,t.jsx)(I,{envVar:j,environmentNames:F})})]}),(0,t.jsx)("div",{className:"flex flex-col items-center justify-start flex-initial pt-3",children:(0,t.jsx)(y.ArrowDown,{color:"gray-900",size:20})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"After"})}),(0,t.jsxs)("div",{className:D,children:[(0,t.jsx)(I,{envVar:j,environmentNames:$}),(0,t.jsx)(I,{envVar:j,environmentNames:[a?(0,l.envName)(a):""]})]})]})]})]}),d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Spacer,{y:1}),(0,t.jsx)(m.Error,{error:d})]}):null]}),(0,t.jsxs)(h.Modal.Actions,{children:[(0,t.jsx)(h.Modal.Action,{onClick:V,type:"secondary",children:"Cancel"}),(0,t.jsx)(h.Modal.Action,{loading:p,onClick:R,children:"Detach"})]})]}),[o,N,V,D,a,j,$,F,d,p,R]),open:P,close:V}}(z,W,S),{data:J,mutate:G}=(0,N.useSecrets)(),{can:Q,isLoading:X}=(0,o.default)(),[Z,Y]=(0,i.useState)(l.allEnvironmentsFilter);(0,i.useEffect)(()=>{S&&Y((0,l.mapToEnvFilter)(S.id))},[S]);let ee=Q(c.Action.Read,c.Resource.ProjectEnvVars),et=Q(c.Action.Read,c.Resource.ProjectEnvVarsProduction),er=Q(c.Action.Read,c.Resource.Secrets),en=ee||et||er,{team:ea}=(0,s.useTeam)(),{decryptEnvVar:ei}=(0,_.useDecryptEnvVar)((0,V.getUseProjectEnvsSWRKey)($,ea?.id),W,{projectName:$,teamId:ea?.id}),el=(0,F.useFilteredEnvs)({envsInput:M?.envs,search:p,envOrBranchFilter:Z,sortTarget:b}),es=(0,O.getUseSharedEnvsSWRKey)({teamId:ea?.id??"",projectId:z}),{data:eo,isLoading:ec,mutate:ed}=(0,O.useTeamSharedEnvs)(ea?.id??"",z);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.EnvVariablesFilter,{disableEnvironmentSelector:!!S,disabled:!1,envOrBranchFilter:Z,envs:M?.envs,isLoading:j,project:U?.id,search:p,setEnvOrBranchFilter:Y,setSearch:E,setSortTarget:T,sortTarget:b}),(0,t.jsx)(r.Spacer,{y:.7}),(0,t.jsx)(u.default,{projectId:U?.id,canReadProductionValues:et,currentEditingEnv:B,disabled:X||!en,envVariables:el,environment:S,isLoading:H||X,onDetach:e=>K.open(e),onRemove:e=>q.open(e),onSave:e=>{if(null===ea)return;let t=(0,V.getUseProjectEnvsSWRKey)($,ea.id),r=D.get(t)?.data;if(r.envs.length>0){let t={...e,decrypted:!1},n=[...r.envs],a=n.findIndex(t=>t.id===e.id);n[a]=t,W({envs:n},!1),ei(t)}},onSecretAdd:()=>{G()},onViewEnvironmentVariable:ei,search:p,secretsData:J,setCurrentEditingEnv:k,shouldDisableEnvRow:P,withEnvs:ee,withSecrets:er}),q.modal,K.modal,ea?.id!==void 0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Spacer,{y:1.5}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:(0,t.jsx)("h2",{className:"text-heading-20",children:"Shared Environment Variables"})}),(0,t.jsx)(L.TEVTable,{SWRCacheKey:es,currentEditingEnv:B,envOrBranchFilter:Z,isLoading:ec,mutateSharedEnvVarData:ed,project:U,projectEnvs:el,search:p,setCurrentEditingEnv:k,setEnvOrBranchFilter:Y,setSearch:E,setSortTarget:T,sharedEnvs:eo?.envs??[],sortTarget:b,teamId:ea.id,withFilters:!1})]})]}):null]})}e.s(["EnvironmentVariablesTable",()=>$],1886416)}]);

//# debugId=98a2568d-71dd-ed67-e225-2146d3803b81
//# sourceMappingURL=5a9da0b1327d322f.js.map