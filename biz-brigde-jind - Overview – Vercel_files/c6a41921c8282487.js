;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="95e7b62b-f72d-db23-3447-067750610558")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8306707,e=>{"use strict";function t(e,t,r){let a={...e,...t};return t.levels?.length===0&&delete a.levels,t.deploymentDomains?.length===0&&delete a.deploymentDomains,t.routes?.length===0&&delete a.routes,t.requestPaths?.length===0&&delete a.requestPaths,t.requestIds?.length===0&&delete a.requestIds,t.statusCodes?.length===0&&delete a.statusCodes,t.caches?.length===0&&delete a.caches,t.domains?.length===0&&delete a.domains,t.requestMethods?.length===0&&delete a.requestMethods,t.sources?.length===0&&delete a.sources,t.environments?.length===0&&delete a.environments,t.branches?.length===0&&delete a.branches,""===t.searchQuery&&delete a.searchQuery,(!t.selectedLogId||r)&&delete a.selectedLogId,a}function r(e){if(e&&0!==e.length)return e.join(",")}function a(e){let t=Number(e.split("-")[1]);if(!Number.isNaN(t)||!Number.isNaN(t=Number(e.slice(0,13))))return t}function n(e){return Array.from(e.matchAll(/"(?<tokenQuoted>[^"]+)"|(?<tokenWord>\S+)/g),e=>e.groups?.tokenQuoted||e.groups?.tokenWord)}e.s(["extractTimestampOfLogId",()=>a,"getNewLogsQuery",()=>t,"stringifyArrayContent",()=>r,"tokenizeSearchQuery",()=>n])},4643311,e=>{e.v({badge:"disclosure-module__kAv1ia__badge",button:"disclosure-module__kAv1ia__button",collapseContent:"disclosure-module__kAv1ia__collapseContent",collapseGroup:"disclosure-module__kAv1ia__collapseGroup",icon:"disclosure-module__kAv1ia__icon",iconWrapper:"disclosure-module__kAv1ia__iconWrapper",open:"disclosure-module__kAv1ia__open"})},7580732,e=>{"use strict";var t=e.i(1146226),r=e.i(5169864),a=e.i(9722978),n=e.i(3922562),s=e.i(7807066),i=e.i(6226725),l=e.i(2037703),o=e.i(692265),u=e.i(4643311);let d=e=>{let{defaultExpanded:d=!1,title:c,contentClassName:m,count:f,id:g,onToggle:p,onExpand:h,children:v,className:y,buttonClassName:b,onClearFilter:x,...j}=e,[C,_]=(0,r.useState)(d);(0,r.useEffect)(()=>{_(d)},[d]);let I=(0,l.useCollapse)(),T=(0,o.useId)("collapse-section-"),N=(0,o.useId)("collapse-button-"),[w,{height:S}]=(0,n.default)(),A=(0,r.useCallback)(()=>_(!C),[C]),L=(0,r.useMemo)(()=>I?0===I.selected.size?C:I.selected.has(c):C,[I,C,c]),k=(0,r.useCallback)(()=>{"function"==typeof p&&p(),L||"function"!=typeof h||h(),I?I.onChange(L?"":c):A()},[I,L,c,p,A,h]);return(0,t.jsxs)("div",{className:(0,a.clsx)(u.default.collapse,{[u.default.context]:I},y),id:g,...j,children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:(0,t.jsx)("button",{"aria-controls":T,"aria-disabled":L?d:void 0,"aria-expanded":L,"aria-label":c,className:(0,a.clsx)("geist-reset",u.default.button,{[u.default.open]:L},b),id:N,onClick:k,children:(0,t.jsxs)("span",{className:"flex flex-row items-center justify-between flex-initial",children:[(0,t.jsxs)("span",{className:"flex flex-row items-center justify-start flex-initial",children:[(0,t.jsx)("span",{className:u.default.iconWrapper,children:(0,t.jsx)("span",{className:(0,a.clsx)(u.default.icon,{[u.default.open]:L}),children:(0,t.jsx)(s.ChevronRight,{"aria-hidden":"true",size:16})})}),(0,t.jsx)("span",{className:u.default.text,children:c})]}),f?(0,t.jsxs)("span",{"aria-label":`Clear ${c} filter`,className:u.default.badge,onClick:e=>{e.stopPropagation(),x?.()},onKeyDown:e=>{"Enter"===e.key&&(e.stopPropagation(),x?.())},role:"button",tabIndex:0,children:[(0,t.jsx)(i.CrossCircle,{color:"gray-700"}),(0,t.jsx)("p",{className:"text-[12px] leading-[16px] font-medium text-gray-900",children:f})]}):null]})})}),(0,t.jsx)("div",{"aria-labelledby":N,className:u.default.collapseContent,id:T,role:"region",style:{height:L?0!==S?S:void 0:0,visibility:L?"visible":"hidden"},children:(0,t.jsx)("div",{className:m,ref:w,children:v})})]})};d.displayName="Disclosure";let c=(0,r.memo)(d);e.s(["Disclosure",0,c])},3793583,e=>{"use strict";var t=e.i(9487122),r=e.i(8119470),a=e.i(2812875);function n(e,n,s){let{years:i=0,months:l=0,weeks:o=0,days:u=0,hours:d=0,minutes:c=0,seconds:m=0}=n,f=(0,a.subMonths)(e,l+12*i,s),g=(0,r.subDays)(f,u+7*o,s);return(0,t.constructFrom)(s?.in||e,g-1e3*(m+60*(c+60*d)))}e.s(["sub",()=>n])},8681022,e=>{e.v("/_next/static/media/worker.508297a8.ts")},9096091,9698309,e=>{"use strict";function t(e){let[t,r]=e;return 1e3*t+r/1e6}function r(e){return[Math.floor(e/1e3),e%1e3*1e3]}e.i(2957938);let a=new Intl.NumberFormat(void 0,{maximumFractionDigits:2});function n(e){return 0===e?"0":e>=1e3?`${a.format(e/1e3)}s`:`${a.format(e)}ms`}let s=new Intl.NumberFormat(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});function i(e){return e>=1e3?`${s.format(e/1e3)}s`:`${s.format(e)}ms`}e.s(["formatDuration",()=>n,"formatTimeSelection",()=>i,"getHighResInMs",()=>t,"getMsInHighRes",()=>r],9698309);let l=e=>{if(!e.events.length)return;let r=`${e.spanId}:ev`;return e.events.map((e,a)=>({key:`${r}${a}`,timestamp:t(e.timestamp),event:e})).sort((e,t)=>e.timestamp-t.timestamp)};e.s(["addToRow",0,(e,t,r)=>{let a=t.parent;for(let n=(a?.row||-1)+1;;++n){let a=e[n];if(a){if(!a.every(e=>{let{startTime:a,endTime:n}=e;return a+r>t.endTime||n-r<t.startTime}))continue}else a=[],e.push(a);t.row=n,a.push(t);break}},"adjustSpanVisibility",0,(e,t)=>{let r=e.duration*t;return e.isVisible=r>=2,e.isHovered=!1,e.isVisible},"parseTrace",0,e=>{let{spans:a}=e,n={startTime:0,endTime:0,duration:0,depth:0,children:[]},s={},i=new Map,o=e=>{let t=i.get(e);if(t)return t;let r=i.size+1;return i.set(e,r),r},u=!1;for(let e of a){let r,a=t(e.startTime),i=t(e.endTime),d=t(e.duration);i>n.endTime&&(n.endTime=i,n.duration=i-n.startTime),(0===n.startTime||a<n.startTime)&&(n.startTime=a,n.duration=n.endTime-a);let c=e.resource.startsWith("vercel.");c||(u=!0);let m=c&&("vercel.serverless-runtime"!==e.resource||!("http.method"in e.attributes)),f=m?0:o(e.resource);m&&(r=`▲ ${e.name}`),s[e.spanId]={parent:null,startTime:a,endTime:i,duration:d,span:e,depth:0,label:r,events:l(e),isVercel:m,children:[],resourceIndex:f}}let d=(e,t)=>{let r;t&&(r=s[t])||(r=n),e.parent=r,r.children.push(e)},c=e=>{for(let t of("parent"in e&&(e.depth=e.parent.depth+1),e.children))c(t)},m=1,f=(e,t)=>{if("parent"in e&&e.span.name===t){let t=e.endTime,a=e=>e.children.length?e.children.map(a).sort((e,t)=>e.duration-t.duration)[0]||e:"waitUntil"===e.span.name?(t=e.startTime,e.parent):e,n=a(e),i=`instrumentation-hint-${m++}`,l=.05*e.duration,o=e.startTime+l,u=Math.max(o+l,Math.min(t-.01*e.duration,e.endTime-l)),d=u-o,c={parent:n,startTime:o,endTime:u,duration:d,span:{spanId:i,name:"Add your spans here",resource:"",kind:0,library:{name:""},status:{code:200},traceFlags:0,attributes:{},links:[],events:[],startTime:r(o),endTime:r(u),duration:r(d)},depth:e.depth+1,isVercel:!1,isInstrumentationHint:!0,children:[],resourceIndex:1};return n.children.push(c),s[i]=c,!0}for(let r of e.children)if(f(r,t))return!0;return!1};for(let e of Object.values(s))d(e,e.span.parentSpanId);if(c(n),!u){for(let e of["Invoke Function","Invoke Middleware","Vercel Runtime"])if(f(n,e))break}return{root:n,map:s}}],9096091)},7620661,e=>{"use strict";var t=e.i(1146226),r=e.i(5169864),a=e.i(277234),n=e.i(1988648),s=e.i(1933683),i=e.i(248550),l=e.i(4535059),o=e.i(2720056),u=e.i(5071474),d=e.i(8216525);function c(e){let{children:r}=e;return(0,t.jsx)("span",{className:"grid size-[18px] place-content-center",children:r})}e.s(["useTracingQuickLinks",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{includeRequest:m=!0}=e;return(0,r.useCallback)(e=>{let r=e.attributes,f=r["vercel.ownerId"],g=r["vercel.projectId"],p=r["vercel.deploymentId"];if(!f||!g||!p)return[];let h=(0,a.default)((0,n.getDashboardDeploymentEndpoint)({teamSlug:f,projectName:g,deploymentId:p})).then(e=>(e.team||(e.team={name:"Unknown Team",slug:e.ownerId,id:e.ownerId}),e.project||(e.project={name:"Unknown Project",id:e.projectId,framework:""}),e.id=e.id.replace("dpl_",""),e)),v=[{key:"Project",value:h.then(e=>({label:e.project.name,href:`/${e.team.slug}/${e.project.name}`,icon:(0,t.jsx)(o.ProjectAvatar,{className:"!rounded-full",project:e.project,size:18})}))},{key:"Deployment",value:h.then(e=>({label:(0,t.jsx)("span",{className:"text-label-13-mono",children:(0,u.default)(e).hash}),href:`/${e.team.slug}/${e.project.name}/${e.id}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(d.DeploymentStatus,{deployment:e})})}))}],y=r["http.route"];y&&v.push({key:"Route",value:h.then(e=>({label:"Observability",href:`/${e.team.slug}/${e.project.name}/observability/route/${encodeURIComponent(String(y).replace(/\.rsc$/,""))}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(s.Eye,{size:12})})}))});let b=r["vercel.sessionId"];b&&v.push({key:"Session",value:h.then(e=>({label:"Traces",href:`/${e.team.slug}/${e.project.name}/${e.id}/logs?${new URLSearchParams({sessionIds:String(b),hasTraces:"true"}).toString()}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(l.Traces,{size:12})})}))});let x=m&&r["vercel.requestId"];return x&&v.push({key:"Request",value:h.then(e=>({label:"Logs",href:`/${e.team.slug}/${e.project.name}/${e.id}/logs?${new URLSearchParams({requestIds:String(x),selectedLogId:String(x)}).toString()}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(i.Logs,{size:12})})}))}),v},[m])}])},7033605,9318476,7209054,294613,8063555,6094744,e=>{"use strict";var t=e.i(5169864),r=e.i(1233856),a=e.i(5610834),n=e.i(409142),s=e.i(1146226),i=e.i(787358),l=e.i(4333930);let o=(0,e.i(9334638).withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0.5 3.25C0.5 1.86929 1.61929 0.75 3 0.75H13C14.3807 0.75 15.5 1.86929 15.5 3.25V4.75C15.5 5.24434 15.3565 5.70517 15.1089 6.09311C14.6903 5.81311 14.2373 5.58044 13.7576 5.40277C13.9087 5.22759 14 4.99946 14 4.75V3.25C14 2.69772 13.5523 2.25 13 2.25H3C2.44772 2.25 2 2.69772 2 3.25V4.75C2 5.30229 2.44772 5.75 3 5.75H8.46611C7.74768 6.12985 7.10902 6.64041 6.58178 7.25H3C1.61929 7.25 0.5 6.13071 0.5 4.75V3.25ZM5.86958 8.25H3C1.61929 8.25 0.5 9.36929 0.5 10.75V12.25C0.5 13.6307 1.61929 14.75 3 14.75H5.86958C5.59976 14.2835 5.38623 13.7804 5.23829 13.25H3C2.44772 13.25 2 12.8023 2 12.25V10.75C2 10.1977 2.44772 9.75 3 9.75H5.23829C5.38623 9.21955 5.59975 8.71645 5.86958 8.25ZM4.25 4.75C4.66421 4.75 5 4.41421 5 4C5 3.58579 4.66421 3.25 4.25 3.25C3.83579 3.25 3.5 3.58579 3.5 4C3.5 4.41421 3.83579 4.75 4.25 4.75ZM7.5 4C7.5 4.41421 7.16421 4.75 6.75 4.75C6.33579 4.75 6 4.41421 6 4C6 3.58579 6.33579 3.25 6.75 3.25C7.16421 3.25 7.5 3.58579 7.5 4ZM13.2307 12C13.2 12.815 13.0938 13.6278 12.9124 14.4279C13.8564 13.9717 14.5462 13.0724 14.7118 12H13.2307ZM11.8047 14.7359C11.7044 14.7452 11.6028 14.75 11.5 14.75C11.3972 14.75 11.2956 14.7452 11.1953 14.7359C10.9494 13.839 10.8077 12.9211 10.77 12H12.23C12.1923 12.9211 12.0506 13.839 11.8047 14.7359ZM13.2307 11C13.2 10.185 13.0938 9.37224 12.9124 8.57213C13.8564 9.02834 14.5462 9.92764 14.7118 11H13.2307ZM12.23 11C12.1923 10.0789 12.0506 9.16097 11.8047 8.2641C11.7044 8.25477 11.6028 8.25 11.5 8.25C11.3972 8.25 11.2956 8.25477 11.1953 8.2641C10.9494 9.16097 10.8077 10.0789 10.77 11H12.23ZM9.76925 11C9.80005 10.185 9.90616 9.37224 10.0876 8.57213C9.1436 9.02834 8.45381 9.92764 8.28822 11H9.76925ZM10.0876 14.4279C9.90616 13.6278 9.80005 12.815 9.76925 12H8.28822C8.45381 13.0724 9.1436 13.9717 10.0876 14.4279ZM11.5 16C13.9853 16 16 13.9853 16 11.5C16 9.01472 13.9853 7 11.5 7C9.01472 7 7 9.01472 7 11.5C7 13.9853 9.01472 16 11.5 16Z" fill="currentColor"/>
  `);e.s(["EdgeCache",0,o],9318476);var u=e.i(8004707),d=e.i(1438473);let c=[{label:"Vercel Function",value:"serverless",icon:(0,s.jsx)(l.FunctionSquare,{size:16})},{label:"Middleware",value:"middleware",icon:(0,s.jsx)(i.FunctionMiddleware,{size:16})},{label:"Cache",value:"cache",icon:(0,s.jsx)(o,{size:16})},{label:"Rewrites",value:"external",icon:(0,s.jsx)(u.ArrowGlobe,{size:16}),optional:!0},{label:"Redirects",value:"redirect",icon:(0,s.jsx)(d.ArrowRight,{size:16}),optional:!0}],m=c.filter(e=>!e.optional).map(e=>e.value),f=[{label:"Warning",value:"warning"},{label:"Error",value:"error"},{label:"Fatal",value:"fatal"}],g=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"HEAD",value:"HEAD"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"OPTIONS",value:"OPTIONS"},{label:"PATCH",value:"PATCH"}],p=[{label:"API Endpoint",value:"api"},{label:"Server-side Rendering",value:"ssr"},{label:"Incremental Static Regeneration",value:"isr"},{label:"Partial Prerendering",value:"ppr"},{label:"Server Components",value:"rsc"},{label:"Cron Job",value:"cron"}],h=[{name:"level",attributeName:"level",suggestions:f.map(e=>e.value)},{name:"resource",attributeName:"source",suggestions:c.filter(e=>!e.optional).map(e=>e.value)},{name:"requestType",attributeName:"requestTags",suggestions:p.map(e=>e.value)},{name:"function",attributeName:"route",suggestions:["function name"]},{name:"requestPath",attributeName:"requestPath",suggestions:["request path"]},{name:"host",attributeName:"domain",suggestions:["domain name"]},{name:"deployment",attributeName:"deploymentDomain",suggestions:["deployment name"]},{name:"method",attributeName:"requestMethod",suggestions:g.map(e=>e.value)},{name:"status",attributeName:"statusCode",suggestions:["status code"]},{name:"cache",attributeName:"cache",suggestions:["cache value"]},{name:"environment",attributeName:"environment",suggestions:[{label:"Production",value:"production"},{label:"Preview",value:"preview"}].map(e=>e.value)},{name:"branch",attributeName:"branch",suggestions:["branch name"]},{name:"requestId",attributeName:"requestId",suggestions:["Request ID - a partial of the requestId is required to search, ex:abcde-1678961364403-a1b2c3d4f5e6"]},{name:"sessionId",attributeName:"sessionId",suggestions:["id of your tracing session"]},{name:"traceId",attributeName:"traceId",suggestions:["id of the trace"]},{name:"deploymentId",attributeName:"deploymentId",suggestions:["id of the deployment"]},{name:"invocationId",attributeName:"invocationId",suggestions:["id of the invocation"]}],v=h.filter(e=>"deploymentId"!==e.name&&"deployment"!==e.name);e.s(["DEFAULT_SOURCES",0,m,"FILTERS",0,h,"FILTERS_WITHOUT_DEPLOYMENT",0,v,"GROUP_LEVEL_OPTIONS",0,f,"REQUEST_METHOD_OPTIONS",0,g,"REQUEST_TAGS_OPTIONS",0,p,"SOURCE_OPTIONS",0,c],7209054);var y=e.i(516467),b=e.i(3793583),x=e.i(7917902),j=e.i(268049);let C={hobby:{hours:1},pro:{days:1},enterprise:{days:3}},_={hobby:{hours:1},pro:{days:30},enterprise:{days:30}},I={days:14};function T(e,t){return(e?_:C)[t??"hobby"]}function N(e,t){let r=T(e,t);return(0,j.milliseconds)(r)>(0,j.milliseconds)(I)?I:r}e.s(["getMaxRetention",()=>T,"getMaxTimeRange",()=>N],294613);var w=e.i(854682);let S=()=>{let{team:e,isLoading:r}=(0,x.useAccount)(),{ready:a,hasObservabilityPlusAccessOnCurrentProject:n}=(0,w.useHasObservabilityPlus)(),s=!!a&&n,i=e?.billing?.plan??"hobby";return(0,t.useMemo)(()=>{let t=T(s,i),a=N(s,i),n={past30Minutes:{minutes:30},pastHour:{hours:1},past12Hours:{hours:12},pastDay:{days:1},past3Days:{days:3},pastWeek:{days:7},past2Weeks:{days:14},maximum:a};return{isLoading:r,billingPlan:i,maxRetention:t,maxTimeRange:a,getNewDates:e=>{let t=new Date;return[(0,b.sub)(t,n[e]),t]},findClosestTimeline:(e,t)=>{let r,a,s,i=[];for(let e of Object.values(n))i.push((0,b.sub)(t,e));let l=isNaN(s=+(0,y.toDate)(e))?NaN:(i.forEach((e,t)=>{let n=(0,y.toDate)(e);if(isNaN(+n)){r=NaN,a=NaN;return}let i=Math.abs(s-n);(null==r||i<a)&&(r=t,a=i)}),r),o=Object.keys(n);return void 0===l?"pastHour":o[l]},teamId:e?.id,hasExtendedTimeline:s}},[i,s,r,e?.id])};e.s(["useUserRetention",0,S],8063555);var A=e.i(5641324),L=e.i(60582);let[k,U]=(0,A.default)(function(e){let t=L.IS_DASH?56:46;return{functionFilterDefaultExpanded:!1,isDeploymentEditable:!0,...Object.fromEntries(Object.entries(e).filter(e=>{let[t,r]=e;return void 0!==r})),topOffset:t}});function P(e){let t=[],r="",a=!1;for(let n=0;n<e.length;n++){let s=e[n];'"'===s&&(a=!a),","!==s||a?r+=s:r.length>0&&(t.push(r),r="")}return r.length>0&&t.push(r),t}e.s(["PageConfigProvider",()=>k,"usePageConfig",()=>U],6094744);let M=()=>{let e=(0,a.useParams)(),{deploymentIdQuery:r}=U(),s=(0,t.useMemo)(()=>r&&"string"==typeof e?.id?[`dpl_${e.id}`]:[],[r,e]),i=(0,t.useMemo)(()=>({timeline:{defaultValue:"past30Minutes",onChangeRemoveKeys:["startDate","endDate","page","live"]},startDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},endDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},live:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e,onChangeRemoveKeys:["page","timeline","startDate","endDate","paused"]},paused:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},page:{defaultValue:1,formatToUrl:e=>e.toString(),parseFromUrl:e=>Number(e)},selectedLogId:{defaultValue:""},refreshedAt:{defaultValue:void 0},caches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},levels:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentDomains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentIds:{defaultValue:s,formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},routes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>P(e)},requestPaths:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>P(e)},requestMethods:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},domains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},sources:{defaultValue:m,formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestTags:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},searchQuery:{defaultValue:""},statusCodes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},environments:{defaultValue:[],formatToUrl:e=>e.length>0?e.join(","):"",parseFromUrl:e=>e.split(",")},branches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},myLogs:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},sessionIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},hasTraces:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},traceIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},invocationIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},panelState:{defaultValue:"auto"},preset:{defaultValue:null},useClickHouseLogs:{defaultValue:void 0}}),[s]),{set:l,state:o}=(0,n.useSearchParamsState)(i),u=(0,t.useCallback)(()=>{let e=(()=>{if(o.sources.length!==m.length)return!0;let e=[...o.sources].sort(),t=[...m].sort();return!e.every((e,r)=>e===t[r])})(),t=(()=>{if(o.deploymentIds.length!==s.length)return!0;let e=[...o.deploymentIds].sort(),t=[...s].sort();return!e.every((e,r)=>e===t[r])})();return o.deploymentDomains.length>0||o.routes.length>0||o.domains.length>0||e||o.levels.length>0||o.statusCodes.length>0||o.requestIds.length>0||""!==o.searchQuery||o.requestMethods.length>0||o.requestPaths.length>0||o.caches.length>0||o.environments.length>0||o.branches.length>0||o.requestTags.length>0||o.myLogs||o.sessionIds.length>0||o.hasTraces||o.traceIds.length>0||o.invocationIds.length>0||t||void 0!==o.startDate||void 0!==o.endDate||"past30Minutes"!==o.timeline||o.live},[o,s]);return(0,t.useMemo)(()=>({state:o,setState:l,hasActiveFilters:u}),[o,l,u])};e.s(["useLogsApiParams",0,()=>{let{state:e}=M(),{getNewDates:a}=S();return(0,t.useMemo)(()=>{if(e.startDate&&e.endDate)return e;let[t,n]=a(e.timeline);return{...e,startDate:(0,r.endOfDuration)(t,{minutes:1}),endDate:(0,r.endOfDuration)(n,{minutes:1})}},[e,a])},"useLogsQueryState",0,M],7033605)},710731,e=>{e.v({badge:"generic-filter-module__Jtj5jG__badge",button:"generic-filter-module__Jtj5jG__button",card:"generic-filter-module__Jtj5jG__card",checkbox:"generic-filter-module__Jtj5jG__checkbox",onlyInstance:"generic-filter-module__Jtj5jG__onlyInstance",option:"generic-filter-module__Jtj5jG__option",optionsContainer:"generic-filter-module__Jtj5jG__optionsContainer",skeleton:"generic-filter-module__Jtj5jG__skeleton",tooltip:"generic-filter-module__Jtj5jG__tooltip",tooltipContainer:"generic-filter-module__Jtj5jG__tooltipContainer",truncateText:"generic-filter-module__Jtj5jG__truncateText"})},6209667,e=>{"use strict";var t=e.i(1146226),r=e.i(6357175),a=e.i(5169864),n=e.i(5255926),s=e.i(8835183),i=e.i(3869281),l=e.i(5468328),o=e.i(2988836),u=e.i(9031150),d=e.i(7797615),c=e.i(710731),m=e.i(9722978);let f=(0,a.memo)(function(e){let{options:n,onChange:i,onSearch:l=()=>{},searchId:o,searchLabel:m="Search",searchPlaceholder:f="Search…",isCountLoading:p=!1,isFirstLoading:y=!1,isLoading:b=!1,hideSearch:x=!1,selectedOptions:j=[],showSelectedOptionsAtTop:C,totalAvailableOptions:_}=e,[I,T]=(0,a.useState)(),N=(0,r.useDebouncedCallback)(l,300),w=(0,a.useRef)(null),S=(0,a.useRef)(void 0),A=(0,a.useMemo)(()=>{let e=[],t=[];return C&&j.length?(n.forEach(r=>{j.includes(r.value)?e.push(r):t.push(r)}),[...e,...t]):n},[n,j,C]);return((0,a.useEffect)(()=>{let e=S.current;C&&e&&j!==e&&w.current&&j.findIndex(t=>!e.includes(t))>=0&&(w.current.scrollTop=0),S.current=j},[j,C]),b||0!==_||0!==j.length||I)?(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[x?null:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:o,children:m}),(0,t.jsx)(s.SearchInput,{className:c.default.searchInput,clearable:!0,id:o,loading:b,onChange:e=>{N(e.target.value),T(e.target.value)},placeholder:f,value:I,width:"100%"})]}),(0,t.jsxs)("div",{className:c.default.optionsContainer,ref:w,tabIndex:-1,children:[A.map(e=>(0,t.jsx)(g,{additionalInfo:e.additionalInfo,checked:j.includes(e.value),count:e.count,icon:e.icon,isCountLoading:p,label:e.label,onChange:()=>{(0,u.awaitPaint)().then(()=>{i(j.includes(e.value)?j.filter(t=>t!==e.value):[...j,e.value])})},value:e.value},e.value)),y?(0,t.jsx)(h,{selectedCount:j.length}):null]}),_&&_>25?(0,t.jsxs)("p",{className:"text-label-12",style:{color:"var(--accents-5)",textAlign:"center"},children:[(0,d.abbreviateNumber)(_-25)," more to search"]}):null]}):(0,t.jsx)(v,{})});function g(e){let{count:r,label:s,value:u,onChange:f,checked:g,icon:p,isCountLoading:h,additionalInfo:v}=e,[y,b]=(0,a.useState)(!1),x=(0,a.useRef)(null),j="string"==typeof s?s:u;return(0,t.jsx)("div",{onMouseEnter:()=>{x.current&&b(x.current.offsetWidth<x.current.scrollWidth)},className:(0,m.default)("flex flex-col items-stretch justify-center flex-initial",c.default.option),children:(0,t.jsx)(l.Tooltip,{className:c.default.tooltipContainer,delayTime:100,desktopOnly:!0,forceHide:!y,lowerDelay:!0,maxWidth:"100%",position:"right",tabIndex:null,text:j,tooltipClassName:c.default.tooltip,useParentForBoundingRect:!0,children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-start flex-initial",children:(0,t.jsx)(i.Checkbox,{checked:g,className:c.default.checkbox,fullWidth:!0,id:u,onChange:f,textOverflow:!1,value:u,children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[p?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:p}):null,(0,t.jsx)("span",{className:c.default.truncateText,ref:x,children:s}),v?(0,t.jsx)(l.Tooltip,{text:v,children:(0,t.jsx)(o.InformationFillSmall,{})}):null,h?(0,t.jsx)(n.Skeleton,{height:20,style:{marginLeft:"auto"},width:30}):null,h||"number"!=typeof r?null:(0,t.jsx)("span",{className:c.default.badge,style:{marginLeft:"auto"},children:(0,t.jsx)("p",{className:"text-[12px] leading-[16px] font-medium text-gray-900",children:(0,d.abbreviateNumber)(r).toUpperCase()})})]})})})})})}function p(){return(0,t.jsxs)("div",{className:(0,m.default)("flex flex-row items-stretch justify-start gap-2 flex-initial",c.default.skeleton),children:[(0,t.jsx)(n.Skeleton,{height:20,width:20}),(0,t.jsx)(n.Skeleton,{height:23,width:170})]})}function h(e){let{selectedCount:r}=e;return(0,t.jsx)(t.Fragment,{children:Array.from({length:r>3?0:3-r},(e,r)=>(0,t.jsx)(p,{},r))})}function v(e){let{comment:r}=e;return(0,t.jsx)("div",{className:(0,m.default)("flex flex-col items-center justify-center gap-1 flex-initial",c.default.card),children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:r||"No options."})})}e.s(["LogFilter",0,f,"generateFilterOption",0,e=>{let{attributeValue:t,total:r}=e;return{label:t,value:t,count:r}}])},7827812,e=>{"use strict";e.s(["LOGS_PAGE_SIZE",()=>p,"useGroupLogs",()=>b,"useGroupLogsInternal",()=>v]);var t=e.i(1269010),r=e.i(119294),a=e.i(6352514),n=e.i(8042625),s=e.i(4244280),i=e.i(7917902),l=e.i(7432042),o=e.i(5169864),u=e.i(1138941),d=e.i(6060673),c=e.i(8306707),m=e.i(7033605),f=e.i(9224004),g=e.i(4597921);let p=50,h={hobby:(0,l.default)("65 seconds"),pro:(0,l.default)("205 seconds"),enterprise:(0,l.default)("905 seconds")};function v(){let{data:e}=(0,d.useProject)((0,u.useProjectIdOrName)()),{user:l,team:f,isLoading:p}=(0,i.useAccount)(),v=(0,g.useServerFlag)("logs-live-mode-refresh-interval",2e3),{deploymentDomains:b,deploymentIds:x,domains:j,levels:C,routes:_,sources:I,requestTags:T,startDate:N,endDate:w,live:S,searchQuery:A,requestIds:L,requestMethods:k,requestPaths:U,statusCodes:P,caches:M,environments:E,branches:D,myLogs:q,sessionIds:R,hasTraces:O,traceIds:F,invocationIds:V,useClickHouseLogs:$}=(0,m.useLogsApiParams)(),H=(0,t.default)((t,r)=>{if(r&&!r.hasMoreRows)return null;if(p||!e)return;let a=null!==f?f.id:null,i=null!==l?l?.uid:null,o=f?.billing?h[f.billing.plan]:h.enterprise,u=a||i;if(null===u)return;let d=S?void 0:w?.getTime(),m=t;t>0&&r?.rows&&r.rows.length>0&&(d=new Date(r.rows[r.rows.length-1].timestamp).getTime()-1,m=0);let g=(0,n.encode)({startDate:L.length>0?Math.min(...L.map(e=>Number(e.split("-")[1])))-o:N.getTime(),endDate:L.length>0?Math.max(...L.map(e=>Number(e.split("-")[1])))+o:d,page:m,searchQuery:(0,c.stringifyArrayContent)((0,c.tokenizeSearchQuery)(A)),projectId:e.id,deploymentDomain:(0,c.stringifyArrayContent)(b),deploymentId:(0,c.stringifyArrayContent)(x),domain:(0,c.stringifyArrayContent)(j),level:(0,c.stringifyArrayContent)(C),ownerId:u,source:(0,c.stringifyArrayContent)(I),requestTags:(0,c.stringifyArrayContent)(T),route:(0,c.stringifyArrayContent)(_),requestPath:(0,c.stringifyArrayContent)(U),requestMethod:(0,c.stringifyArrayContent)(k),requestId:L.map(e=>e.split("::").pop()),statusCode:(0,c.stringifyArrayContent)(P),cache:(0,c.stringifyArrayContent)(M),myLogs:q?"true":void 0,environment:(0,c.stringifyArrayContent)(E),branch:(0,c.stringifyArrayContent)(D),sessionId:(0,c.stringifyArrayContent)(R),hasTraces:O?"true":void 0,traceId:(0,c.stringifyArrayContent)(F),invocationId:(0,c.stringifyArrayContent)(V),useClickHouseLogs:$});return`${s.API_LOGS}/request-logs${g}`},(e,t)=>(r.analytics.track(a.AnalyticsEvent.LOGS_RUN_QUERY,{teamSlug:f?.slug}),y(e,t)),{refreshInterval:S?v:0,dedupingInterval:S?800:void 0,keepPreviousData:!0,revalidateAll:S,revalidateOnFocus:S,revalidateFirstPage:S}),G=(0,o.useMemo)(()=>H.data?.flatMap(e=>e.rows??[])||[],[H.data]);return(0,o.useMemo)(()=>({...H,logRows:G}),[H,G])}async function y(e,t){let r=await fetch(e,t);if(!r.ok){let e=await r.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}return r.json()}function b(){let e=(0,f.useLogs)();return{logRows:e.logRows,...e.swr}}},9224004,e=>{"use strict";e.s(["GroupLogsProvider",()=>f,"useLogs",()=>g],9224004);var t=e.i(1146226),r=e.i(5169864),a=e.i(7827812),n=e.i(349746),s=e.i(7033605),i=e.i(5851942),l=e.i(5610834),o=e.i(9171423),u=e.i(134877),d=e.i(8042625),c=e.i(7620661);let m=(0,r.createContext)(null);function f(e){let{children:f}=e,{selectedLogId:g}=(0,s.useLogsApiParams)(),p=(0,a.useGroupLogsInternal)(),h=(0,n.useSelectedLogInternal)(g,p.logRows),v=(e=>{let[t,a]=(0,r.useState)({}),n=(0,r.useRef)(new Map),s=(0,l.useParams)(),i=s?.teamSlug||"";if((0,r.useEffect)(()=>{if(!i||!e)return;let t=n.current;t.has(e)||(t.set(e,void 0),(async()=>{let r=await (0,o.fetchApi)(`/api/observability/traces/${e}${(0,d.encode)({teamId:i,project:s?.project})}`);if(!r||"string"==typeof r||"error"in r||(0,u.isAPIError)(r))return t.delete(e);t.set(e,r),a({})})())},[i,e,s]),e)return n.current.get(e)})(h.data?.traceId&&h.data?.sessionId?h.data.traceId:void 0),y=(0,c.useTracingQuickLinks)({includeRequest:!1}),b=(0,r.useMemo)(()=>({logRows:p.logRows,selectedLog:h.data,selectedTrace:v,isLoadingSelected:h.isLoading,error:h.error,swr:p}),[p,h.data,v,h.isLoading,h.error]);return(0,t.jsx)(m.Provider,{value:b,children:(0,t.jsx)(i.TraceViewerProvider,{getQuickLinks:y,children:f})})}function g(){let e=(0,r.useContext)(m);if(!e)throw Error("useLogs must be used within a LogsProvider");return e}m.displayName="LogsContext"},349746,e=>{"use strict";e.s(["useSelectedLog",()=>f,"useSelectedLogInternal",()=>c]);var t=e.i(2405338),r=e.i(8042625),a=e.i(4244280),n=e.i(7917902),s=e.i(5169864),i=e.i(1138941),l=e.i(6060673),o=e.i(8306707),u=e.i(9224004),d=e.i(7033605);function c(e,u){let{team:c,isLoading:f}=(0,n.useAccount)(),{data:g}=(0,l.useProject)((0,i.useProjectIdOrName)()),{useClickHouseLogs:p}=(0,d.useLogsApiParams)(),[h,v]=(0,s.useState)();(0,s.useEffect)(()=>{if(!e)return;let t=u.find(t=>t.requestId===e);t?v(t):h&&e!==h.requestId&&v(void 0)},[e,u,h]);let y=(0,s.useMemo)(()=>{if(e)return u.find(t=>t.requestId===e)},[u,e]),b=(0,s.useMemo)(()=>y&&0===y.events.length,[y]),x=(0,t.default)(()=>{if(y&&!b||f||!e)return null;let t=g?.id;if(!c||!t)return null;let n=c.id,s=(0,o.extractTimestampOfLogId)(e);if(void 0===s)return null;let i=(0,r.encode)({ownerId:n,projectId:t,startDate:s,endDate:s,requestId:[e],useClickHouseLogs:p});return`${a.API_LOGS}/request-logs${i}`},m,{revalidateOnFocus:!1,refreshInterval:500*!!b});return e?{data:x.data??y??h,error:x.error,isLoading:x.isLoading}:{data:void 0,error:void 0,isLoading:!1}}async function m(e,t){let r=await fetch(e,t);if(!r.ok){let e=await r.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}let a=await r.json();return a.rows?.[0]}function f(){let e=(0,u.useLogs)();return{data:e.selectedLog,error:e.error,isLoading:e.isLoadingSelected}}},4569709,e=>{e.v({draggable:"draggable-border-module__CfqrMq__draggable",dragging:"draggable-border-module__CfqrMq__dragging",fakeBorder:"draggable-border-module__CfqrMq__fakeBorder",horizontal:"draggable-border-module__CfqrMq__horizontal",leftBorder:"draggable-border-module__CfqrMq__leftBorder",root:"draggable-border-module__CfqrMq__root",vertical:"draggable-border-module__CfqrMq__vertical"})},8510056,e=>{"use strict";var t=e.i(1146226),r=e.i(5169864),a=e.i(9722978),n=e.i(4569709);function s(e){let{element:s,onWidthChange:i,position:l,onReset:o,onStartDrag:u,onStopDrag:d}=e,c=(0,r.useRef)(0),m=(0,r.useRef)(0),[f,g]=(0,r.useState)(!1),p="bottom"===l||"top"===l;return(0,r.useEffect)(()=>{let e=e=>{if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!f)return;let t=m.current;if(p){let r=e.clientY-c.current;t+="top"===l?-r:r}else"left"===l?t+=c.current-e.clientX:t+=e.clientX-c.current;i(t)},t=()=>{g(!1),d&&d()};return document.addEventListener("dragover",e),document.addEventListener("drop",t,{capture:!0}),()=>{document.removeEventListener("dragover",e),document.removeEventListener("drop",t)}},[f,i,l,p,d]),(0,t.jsxs)("div",{className:(0,a.clsx)(n.default.root,{[n.default.horizontal]:p,[n.default.vertical]:!p}),style:{[l]:"right"===l?"-10px":"-8px"},children:[(0,t.jsx)("div",{className:n.default.draggable,draggable:!0,onClick:e=>{o&&2===e.detail&&o()},onDrag:()=>{g(!0)},onDragEnd:()=>{g(!1),d&&d()},onDragStart:e=>{g(!0),u&&u(),s.current&&(c.current=p?e.clientY:e.clientX,m.current=p?s.current.offsetHeight:s.current.offsetWidth)},role:"none"}),(0,t.jsx)("div",{className:(0,a.clsx)(n.default.fakeBorder,{[n.default.dragging]:f,[n.default.leftBorder]:"left"===l}),draggable:!1})]})}e.s(["DraggableBorder",()=>s])},9321858,6097977,e=>{"use strict";var t=e.i(1146226),r=e.i(5169864),a=e.i(3285452),n=e.i(3671642),s=e.i(5323212),i=e.i(6891161),l=e.i(8735244);let o=[1e3,5e3,1e4,5e4,1e5];function u(e){let{onClose:u,getExport:d,format:c}=e,[m,f]=(0,r.useState)(1e3),[g,p]=(0,r.useState)(!1),h=async()=>{p(!0),await d(c,m),p(!1),u()};return(0,t.jsxs)(i.Modal.Modal,{active:!0,onClickOutside:u,children:[(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("header",{children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-between flex-initial",children:[(0,t.jsxs)("h2",{className:"text-heading-24",children:["Export Logs (",c.toUpperCase(),")"]}),g?(0,t.jsx)(l.Spinner,{size:20}):null]})}),(0,t.jsxs)("p",{className:"text-copy-14",children:["Export to ",c]}),(0,t.jsx)(n.Label,{id:"select-line-limit",value:"Result Limit",withInput:!0,children:(0,t.jsx)(s.Select,{id:"select-line-limit",onChange:e=>{f(Number(e.target.value))},prefix:(0,t.jsx)(a.ArrowDown,{}),value:m,children:o.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:u,type:"secondary",children:"Cancel"}),(0,t.jsx)(i.Modal.Action,{disabled:g,onClick:h,type:"secondary",children:"Export"})]})]})}e.s(["GroupExportModal",()=>u],9321858);var d=e.i(455575),c=e.i(8042625),m=e.i(277234),f=e.i(4244280),g=e.i(7917902),p=e.i(8631221),h=e.i(3196486),v=e.i(1138941),y=e.i(6060673),b=e.i(7033605),x=e.i(8306707);function j(){let{user:e,team:t,isLoading:r}=(0,g.useAccount)(),a=(0,d.useToasts)(),{deploymentDomains:n,deploymentIds:s,domains:i,levels:l,routes:o,sources:u,startDate:j,endDate:I,searchQuery:T,requestIds:N,requestMethods:w,requestPaths:S,statusCodes:A,caches:L,environments:k,branches:U,myLogs:P,sessionIds:M,hasTraces:E,traceIds:D,invocationIds:q,useClickHouseLogs:R}=(0,b.useLogsApiParams)(),{data:O}=(0,y.useProject)((0,v.useProjectIdOrName)());return{getExport:async(d,g)=>{if(r||!O)return;let v=null!==t?t.id:null,y=null!==e?e.uid:null,b=(0,c.encode)({branch:(0,x.stringifyArrayContent)(U),cache:(0,x.stringifyArrayContent)(L),deploymentDomain:(0,x.stringifyArrayContent)(n),deploymentId:(0,x.stringifyArrayContent)(s),domain:(0,x.stringifyArrayContent)(i),endDate:I?.getTime(),environment:(0,x.stringifyArrayContent)(k),format:d,level:(0,x.stringifyArrayContent)(l),ownerId:v||y,pageSize:g,projectId:O.id,requestId:N[0],requestMethod:(0,x.stringifyArrayContent)(w),requestPath:(0,x.stringifyArrayContent)(S),route:(0,x.stringifyArrayContent)(o),searchQuery:T?(0,x.stringifyArrayContent)((0,x.tokenizeSearchQuery)(T)):void 0,source:(0,x.stringifyArrayContent)(u),startDate:j.getTime(),statusCode:(0,x.stringifyArrayContent)(A),myLogs:P?"true":void 0,sessionId:(0,x.stringifyArrayContent)(M),hasTraces:E?"true":void 0,traceId:(0,x.stringifyArrayContent)(D),invocationId:(0,x.stringifyArrayContent)(q),useClickHouseLogs:R}),F=`${f.API_GROUP_LOGS_EXPORT}${b}`,V=await (0,m.fetchAPI)(F);if(V.error)return void a.error("Something went wrong, please try again later");if("csv"===d){let e=new Promise(e=>{C(V.data,"logs_result.csv"),setTimeout(()=>{e(!0)},500)});await e.then(()=>a.success("csv file downloaded"))}else{let e=new Promise(e=>{_(JSON.stringify(V.data),"logs_result.json"),setTimeout(()=>{e(!0)},500)});await e.then(()=>a.success("json file downloaded"))}(0,h.sendToSnowflake)(p.Topic.VercelAppV0LogQueryResultsExported,{team_id:v||void 0,user_id:y||"",project_id:O.id,export_type:d,num_results_downloaded:g},"vercel-app")}}}function C(e,t){let r=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(a),a.click(),document.getElementById("select-line-limit").removeChild(a)}function _(e,t){let r=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(a),a.click(),document.getElementById("select-line-limit").removeChild(a)}e.s(["downloadCsv",()=>C,"downloadJson",()=>_,"useGroupLogsExport",()=>j],6097977)}]);

//# debugId=95e7b62b-f72d-db23-3447-067750610558
//# sourceMappingURL=9781bcaf4422c6b3.js.map