;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ed8d40cd-8e85-388d-cd94-1324b69e4efa")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7921976,e=>{"use strict";var t=e.i(2830303);e.s(["isModifierPressed",0,e=>(0,t.isAppleDevice)()?e.metaKey:e.ctrlKey])},9156249,e=>{e.v({circle:"step-indicator-module__5gZ_RG__circle",current:"step-indicator-module__5gZ_RG__current","step-indicator":"step-indicator-module__5gZ_RG__step-indicator"})},5184244,e=>{e.v({"close-button":"survey-prompt-toast-module__JkO0_W__close-button",description:"survey-prompt-toast-module__JkO0_W__description",prompt:"survey-prompt-toast-module__JkO0_W__prompt"})},8457113,e=>{e.v({"align-left":"survey-module__3DCdiW__align-left","back-button":"survey-module__3DCdiW__back-button",buttons:"survey-module__3DCdiW__buttons",fadeIn:"survey-module__3DCdiW__fadeIn",footer:"survey-module__3DCdiW__footer",header:"survey-module__3DCdiW__header",hidden:"survey-module__3DCdiW__hidden",info:"survey-module__3DCdiW__info",instructions:"survey-module__3DCdiW__instructions",modal:"survey-module__3DCdiW__modal","no-padding":"survey-module__3DCdiW__no-padding",single:"survey-module__3DCdiW__single","skip-button":"survey-module__3DCdiW__skip-button","skip-text":"survey-module__3DCdiW__skip-text",stacked:"survey-module__3DCdiW__stacked","step-indicator":"survey-module__3DCdiW__step-indicator","submit-button":"survey-module__3DCdiW__submit-button",survey:"survey-module__3DCdiW__survey",tip:"survey-module__3DCdiW__tip",title:"survey-module__3DCdiW__title"})},255537,e=>{e.v({list:"checkbox-select-module__u-_xrG__list"})},8820139,e=>{e.v({heading:"checkbox-option-module__aiX9dq__heading",hidden:"checkbox-option-module__aiX9dq__hidden",input:"checkbox-option-module__aiX9dq__input",keyboard:"checkbox-option-module__aiX9dq__keyboard",option:"checkbox-option-module__aiX9dq__option",selected:"checkbox-option-module__aiX9dq__selected","selected-icon":"checkbox-option-module__aiX9dq__selected-icon"})},9169214,e=>{e.v({text:"survey-prompt-module__kD9QzG__text"})},1585898,2066827,e=>{"use strict";e.i(2957938);var t=e.i(1146226),s=e.i(5169864),i=e.i(9722978),l=e.i(3922562),d=e.i(4748619),a=e.i(1720387),n=e.i(6362863),o=e.i(2504781),r=e.i(6891161),u=e.i(455575),c=e.i(119294),f=e.i(6352514),p=e.i(7921976);function x(e){let t=e.lastIndexOf(" ");return -1===t?e:`${e.substring(0,t)}\u00A0${e.substring(t+1)}`}var v=e.i(2020034),_=e.i(9156249);function m(e){let{currentStep:l,steps:d,className:a}=e,n=(0,s.useRef)(null),[o,r]=(0,s.useState)({top:0,left:0});return(0,s.useEffect)(()=>{n.current&&r({top:n.current.offsetTop,left:n.current.offsetLeft})},[l]),(0,t.jsxs)("div",{className:(0,i.clsx)("flex flex-row items-stretch justify-start gap-1 flex-initial",_.default["step-indicator"],a),children:[(0,t.jsx)("span",{"aria-hidden":!0,className:(0,i.clsx)(_.default.circle,_.default.current),style:o}),d.map((e,s)=>(0,t.jsx)("span",{"aria-hidden":!0,className:_.default.circle,ref:s===l?n:void 0},e.key)),(0,t.jsxs)("span",{className:"geist-sr-only",children:["Step ",l+1," of ",d.length]})]})}let y=(0,s.createContext)({accountId:void 0,cancel:()=>void 0,dataTestIdContext:[],dispatch:()=>void 0,hasMultipleSteps:!1,invalidFields:[],originalSteps:[],setInvalidFields:()=>void 0,setStatus:()=>void 0,status:"idle",submit:()=>Promise.resolve(),surveyState:null,team:null,updateCookie:()=>void 0,user:null});y.displayName="SurveyContext";var h=e.i(6942035),E=e.i(5184244);function b(e){let{id:l,onAction:d,surveyName:a,updateCookie:n}=e,r=(0,u.useToasts)(),p=()=>{r.removeToastByKey(l)};(0,s.useEffect)(()=>{c.analytics.track(f.AnalyticsEvent.SURVEY_TOAST_SHOWN,{surveyName:a})},[a]);let x=()=>{c.analytics.track(f.AnalyticsEvent.SURVEY_TOAST_DISMISSED,{surveyName:a}),n(),p()};return(0,t.jsxs)("div",{className:(0,i.default)("flex flex-col items-stretch justify-start gap-4 flex-initial",E.default.prompt),children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:[(0,t.jsx)("h1",{className:"text-[16px] leading-[24px] font-medium",children:"Help us improve your Vercel experience"}),(0,t.jsx)(o.Button,{"aria-label":"dismiss",className:E.default["close-button"],onClick:x,svgOnly:!0,variant:"unstyled",children:(0,t.jsx)(h.Cross,{})})]}),(0,t.jsx)("p",{className:`text-copy-14 ${E.default.description}`,children:"Please help us better understand how we can improve your Vercel experience with this 2 minute survey."}),(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-end gap-2 flex-initial",children:[(0,t.jsx)(o.Button,{onClick:x,size:"small",type:"secondary",children:"No Thanks"}),(0,t.jsx)(o.Button,{onClick:()=>{d(),p()},size:"small",children:"Start"})]})]})}var S=e.i(8457113),k=e.i(4004502),I=e.i(8248823);function T(e){for(var t=arguments.length,s=Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return(0,k.tid)("survey-modal",e,...s)}function g(e){if("checkbox"!==e.as)throw Error(`Expected a checkbox select list, but got a ${e.as} select list instead.`);return e}let j=e=>{let t=[],s={},i=[],l={},{surveyName:d,surveySlug:a,surveySteps:n}=e,o=0;for(let e=0;e<n.length;e++){let d=n[e];for(let a of(i[e]={title:d.title,description:d.description,start:o,end:o+1},d.fields))if("select"===a.type){switch(a.as){case"dropdown":l[a.id]={as:"dropdown",id:a.id,start:o,end:o+1,label:a.label};break;case"combobox":l[a.id]={as:"combobox",id:a.id,start:o,end:o+1,label:a.label,placeholder:a.placeholder??null};break;default:l[a.id]={as:a.as??"checkbox",id:a.id,start:o,end:o+1,label:a.label,selectMultiple:!!a.selectMultiple}}for(let d of a.options){let n=`${e}-${a.id}-${d.id}`,r={fqid:n,stepIndex:e,inputId:d.id,selectListId:a.id,label:d.label,selected:!!d.selected,type:"option",reveals:d.reveals?{fqid:`${n}-${d.reveals.id}`,stepIndex:e,inputId:d.reveals.id,label:d.reveals.label??"",value:d.reveals.value??"",size:d.reveals.size??"short",validationRegex:d.reveals.validationRegex,validationErrorMessage:d.reveals.validationErrorMessage,inputTypeName:d.reveals.inputTypeName,type:"text"}:void 0};t.push(r),s[n]=o,i[e].end=o+1,l[a.id].end=o+1,o++}}else{let l=`${e}-${a.id}`,d={fqid:l,stepIndex:e,inputId:a.id,label:a.label,instructions:a.instructions,value:a.value||"",size:a.size||"short",validationRegex:a.validationRegex,validationErrorMessage:a.validationErrorMessage,inputTypeName:a.inputTypeName,type:"text"};t.push(d),s[l]=o,i[e].end=o+1,o++}}return{surveyName:d,surveySlug:a,fields:t,fieldLookup:s,stepLookup:i,selectListLookup:l,currentStep:0,previousStep:null,lastStep:n.length-1,isFirstStep:!0,isLastStep:n.length-1==0}},C=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var D=e.i(255537),N=e.i(8761240),F=e.i(9689002),q=e.i(8820139),L=e.i(7534323),O=e.i(3500331),w=e.i(9334091);function U(e){let{type:i,optionFqid:l,field:d,className:a,"data-testid":n,showLabel:o,...r}=e,{setInvalidFields:u,invalidFields:c,surveyState:f,dispatch:p}=(0,s.useContext)(y),{fqid:v,inputId:_,inputTypeName:m,label:h,size:E="short",value:b,validationErrorMessage:k,validationRegex:I}=d,{focusedField:T,focusedNestedField:g}=f,j=(0,s.useRef)(null),C=(0,s.useRef)(null),[D,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{c.includes(v)?D||u(c.filter(e=>e!==v)):D&&u([...c,v])},[D,v,u]),(0,s.useEffect)(()=>{("top-level"===i?T?.fqid===v:g?.fqid===v)&&(j.current??C.current)?.focus()},[T?.fqid,g?.fqid,v,i]);let F=()=>{"top-level"===i&&T?.fqid!==v?p({type:"SET_FOCUSED_FIELD",fqid:v}):"nested"===i&&g?.fqid!==v&&p({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:l})},q=e=>{"nested"===i?p({type:"UPDATE_NESTED_TEXT_FIELD",optionFqid:l,value:e.target.value}):p({type:"UPDATE_TEXT_FIELD",fqid:v,value:e.target.value}),b?M(e.target.value):N(!1)},U=e=>{let t=e.target;"nested"===i?p({type:"UPDATE_NESTED_TEXT_FIELD",optionFqid:l,value:e.target.value}):p({type:"UPDATE_TEXT_FIELD",fqid:v,value:e.target.value}),D&&M(t.value)},P=k??(m?({email:"Please enter a valid email.",url:"Please enter a valid URL."})[m]:void 0),M=e=>{let t;if(I&&k)t=I;else switch(m){case"email":t=/^\S+@\S+\.\S+$/;break;case"url":N(!(0,L.default)(e));return}t&&N(!t.test(e))},A=d.instructions?(0,t.jsx)("p",{className:`text-copy-16 ${S.default.instructions}`,children:x(d.instructions)}):null;return"short"===E?(0,t.jsxs)(t.Fragment,{children:[A,(0,t.jsx)(O.Input,{"aria-label":h,autoComplete:"off",className:a,"data-testid":n,id:_,label:o?h:void 0,maxLength:256,onBlur:q,onChange:U,onFocus:F,placeholder:o?void 0:h||"Add your answer…",...r,error:D?P:void 0,ref:j,typeName:m,value:b})]}):(0,t.jsxs)(t.Fragment,{children:[A,(0,t.jsx)(w.Textarea,{"aria-label":h,className:a,"data-testid":n,id:_,label:o?h:void 0,maxLength:4e3,onBlur:q,onChange:U,onFocus:F,placeholder:o?void 0:h||"Add your answer…",rows:3,...r,error:D?P:void 0,ref:C,value:b})]})}function P(e){let{index:n,listId:o,option:r,dataTestIdContext:u=[]}=e,[c,{height:f}]=(0,l.default)(),p=(0,s.useRef)(null),{surveyState:x,dispatch:v}=(0,s.useContext)(y),{focusedField:_,focusedNestedField:m,selectListLookup:h}=x,{selectMultiple:E}=g(h[r.selectListId]),b=r.selected&&r.reveals,S=!!r.reveals,k=_?.fqid===r.fqid,I="30px";(0,s.useEffect)(()=>{k&&null===m&&p.current?.focus()},[m,k,r.fqid]);let[j,D]=(0,a.useSpring)(()=>({config:{...a.config.default,clamp:!0},height:b?`${f}px`:I}),[b]);return(0,s.useEffect)(()=>{b?D.start({height:`${f}px`,onStart:()=>{v({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:r.fqid})}}):S&&D.start({height:I,onStart:()=>{v({type:"SET_FOCUSED_FIELD",fqid:r.fqid})}})},[S,v,f,b,k,r.fqid,D]),(0,t.jsxs)("li",{"aria-checked":r.selected,"aria-labelledby":r.inputId,"aria-selected":r.selected,className:(0,i.clsx)(q.default.option,{[q.default.selected]:r.selected}),"data-testid":T("form-input",o,"checkbox",r.inputId,...u),id:C[n],onClick:e=>{k||v({type:"SET_FOCUSED_FIELD",fqid:r.fqid});let t=e.target;t.dataset.reveal&&t.focus(),"INPUT"!==t.tagName&&v({type:"TOGGLE_OPTION",fqid:r.fqid})},onFocus:()=>{k||v({type:"SET_FOCUSED_FIELD",fqid:r.fqid})},onKeyDown:void 0,ref:p,role:"option",tabIndex:0,value:r.inputId,children:[E?(0,t.jsx)("input",{"aria-readonly":!0,checked:r.selected,className:q.default.input,"data-list-id":o,id:r.inputId,readOnly:!0,type:"checkbox",value:r.label||""}):(0,t.jsx)("input",{checked:r.selected,className:q.default.input,"data-list-id":o,id:r.inputId,readOnly:!0,type:"radio",value:r.label||""}),(0,t.jsx)(d.animated.div,{style:void 0,children:(0,t.jsxs)("div",{ref:c,className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsxs)("div",{className:q.default.heading,children:[(0,t.jsx)(F.Kbd,{"aria-hidden":!0,className:q.default.keyboard,children:C[n]}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:(0,t.jsx)("label",{htmlFor:r.inputId,children:r.label})}),r.selected?(0,t.jsx)("span",{"aria-hidden":!0,className:q.default["selected-icon"],children:(0,t.jsx)(N.CheckCircleFill,{color:"green-700"})}):null]}),r.reveals?(0,t.jsx)("div",{className:(0,i.clsx)({[q.default.hidden]:!r.selected}),"data-testid":T("form-input-wrapper",o,"checkbox",r.inputId,"revealed-textbox",...u),children:(0,t.jsx)(U,{"data-testid":T("form-input",o,"checkbox",r.inputId,"revealed-textbox",...u),field:r.reveals,optionFqid:r.fqid,type:"nested"})}):null]})})]},r.inputId)}function M(e){let{id:l,options:d,selectMultiple:a,dataTestIdContext:n=[]}=e,{surveyState:o,dispatch:r}=(0,s.useContext)(y),{focusedField:u,focusedNestedField:c,selectListLookup:f}=o,{label:p}=g(f[d[0].selectListId]),x=(0,s.useCallback)(e=>{let t=d.findIndex(e=>e.fqid===u?.fqid),s=null!==c;switch(e.key){case"ArrowUp":e.preventDefault(),-1===t?r({type:"SET_FOCUSED_FIELD",fqid:d[0].fqid}):r({type:"SET_FOCUSED_FIELD",fqid:d.at(t-1)?.fqid??null});break;case"ArrowDown":e.preventDefault(),-1===t?r({type:"SET_FOCUSED_FIELD",fqid:d[0].fqid}):r({type:"SET_FOCUSED_FIELD",fqid:d.at(t+1)?.fqid??d.at(0)?.fqid??null});break;case" ":if(-1===t||s)return;e.preventDefault(),r({type:"TOGGLE_OPTION",fqid:d[t].fqid});break;default:if(C.includes(e.key)){if(s)return;let t=d[C.indexOf(e.key)]?.fqid;t&&(r({type:"TOGGLE_OPTION",fqid:t}),r({type:"SET_FOCUSED_FIELD",fqid:t}))}}},[d,c,u?.fqid,r]);return(0,s.useEffect)(()=>{let e=e=>{e.target&&"dataset"in e.target&&"surveyContainer"in e.target.dataset&&x(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[x]),(0,t.jsx)("ul",{"aria-label":p,"aria-multiselectable":a,"data-testid":T("form-input",l,...n),onKeyDown:x,role:"listbox",className:(0,i.default)("flex flex-col items-stretch justify-start gap-2 flex-initial",D.default.list),children:d.map((e,s)=>(0,t.jsx)(P,{dataTestIdContext:n,index:s,listId:l,option:e},e.inputId))})}var A=e.i(5323212);function R(e){let{id:i,options:l,dataTestIdContext:d=[]}=e,{surveyState:a,dispatch:n}=(0,s.useContext)(y),{selectListLookup:o}=a,r=function(e){if("dropdown"!==e.as)throw Error(`Expected a dropdown select list, but got a ${e.as} select list instead.`);return e}(o[l[0].selectListId]),{label:u}=r,c=(0,s.useMemo)(()=>l.find(e=>e.selected),[l]);return(0,t.jsxs)("div",{role:"group",className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(A.Select,{"aria-label":u,"data-testid":T("form-input",i,...d),defaultValue:c?.inputId,id:r.id,onChange:e=>{let t=u?e.target.selectedIndex-1:e.target.selectedIndex;n({type:"TOGGLE_OPTION",fqid:l[t].fqid}),n({type:"SET_FOCUSED_FIELD",fqid:l[t].fqid})},onFocus:()=>{n({type:"SET_FOCUSED_FIELD",fqid:c?.fqid??l[0].fqid})},placeholder:u,value:c?.inputId,children:l.map(e=>(0,t.jsx)("option",{"aria-selected":e.selected,selected:e.selected,value:e.inputId,children:e.label},e.inputId))}),c?.reveals?(0,t.jsx)(U,{"data-testid":T("form-input",r.id,"dropdown",c.inputId,"revealed-textbox",...d),field:c.reveals,optionFqid:c.fqid,type:"nested"}):null]})}var B=e.i(6881349),G=e.i(3671642);function W(e){let{id:i,options:l,dataTestIdContext:d=[]}=e,{surveyState:a,dispatch:n}=(0,s.useContext)(y),{selectListLookup:o}=a,r=function(e){if("combobox"!==e.as)throw Error(`Expected a combobox select list, but got a ${e.as} select list instead.`);return e}(o[l[0].selectListId]),{label:u,placeholder:c}=r,f=(0,s.useMemo)(()=>l.find(e=>e.selected),[l]);return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsxs)(B.Combobox,{"aria-label":u,"data-testid":T("form-input",i,...d),onChange:e=>{if(!e){f&&n({type:"TOGGLE_OPTION",fqid:f.fqid});return}let t=l.findIndex(t=>t.inputId===e),s=l[t];f?.fqid!==s.fqid&&(f&&n({type:"TOGGLE_OPTION",fqid:f.fqid}),s.reveals&&n({type:"SET_FOCUSED_NESTED_FIELD",optionFqid:s.fqid}),n({type:"TOGGLE_OPTION",fqid:l[t].fqid}))},placeholder:c??u,value:f?.inputId,children:[(0,t.jsx)(G.Label,{value:u}),(0,t.jsx)(B.Combobox.Input,{}),(0,t.jsx)(B.Combobox.List,{children:l.map(e=>(0,t.jsx)(B.Combobox.Option,{"aria-selected":e.selected,value:e.inputId,children:e.label},e.inputId))})]}),f?.reveals?(0,t.jsx)(U,{"data-testid":T("form-input",r.id,"combobox",f.inputId,"revealed-textbox",...d),field:f.reveals,optionFqid:f.fqid,type:"nested"}):null]})}function $(e){let{showInputLabels:i,dataTestIdContext:l=[]}=e,{surveyState:d}=(0,s.useContext)(y),{fields:a,selectListLookup:n,stepLookup:o,currentStep:r}=d,{start:u,end:c}=o[r],f=a.slice(u,c),p=[];for(let e=0;e<f.length;e++){let t=f[e];if("text"===t.type&&p.push(t),"option"===t.type){let{start:s,end:i}=n[t.selectListId],l=a.slice(s,i);p.push(l),e=i-u-1}}return(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:p.map(e=>{if(Array.isArray(e)){let s=n[e[0].selectListId].as,i="checkbox"===s?n[e[0].selectListId].selectMultiple:void 0;return"dropdown"===s?(0,t.jsx)("div",{children:(0,t.jsx)(R,{dataTestIdContext:l,id:e[0].selectListId,options:e})},e[0].selectListId):"combobox"===s?(0,t.jsx)("div",{children:(0,t.jsx)(W,{id:e[0].selectListId,options:e})},e[0].selectListId):(0,t.jsx)("div",{children:(0,t.jsx)(M,{dataTestIdContext:l,id:e[0].selectListId,options:e,selectMultiple:i})},e[0].selectListId)}return(0,t.jsx)("div",{children:(0,t.jsx)(U,{"data-testid":T("form-input",e.inputId,...l),field:e,showLabel:i,type:"top-level"},e.inputId)},e.inputId)})})}var V=e.i(5523169),X=e.i(7917902);let Y=(0,e.i(8128646).default)((e,t)=>{switch(t.type){case"RESET_SURVEY_INFO":return{...j(t.surveyInfo),focusedItem:null,focusedField:null,focusedNestedField:null,focusedButton:null,backButtonExists:!1,skipButtonExists:e.enableSkip,submitButtonExists:!0,enableSkip:e.enableSkip};case"TOGGLE_SKIP_ENABLED":e.enableSkip=t.enableSkip;break;case"SET_FOCUSED_BUTTON":e.focusedItem={type:"button",buttonId:t.buttonId};break;case"SET_FOCUSED_FIELD":e.focusedItem=t.fqid?{type:"field",fqid:t.fqid}:null;break;case"SET_FOCUSED_NESTED_FIELD":{let s=e.fields[e.fieldLookup[t.optionFqid]];"option"===s.type&&s.reveals&&(e.focusedItem={type:"nested-field",optionFqid:t.optionFqid,nestedFqid:s.reveals.fqid});break}case"INCREMENT_STEP":e.currentStep<e.lastStep&&(e.previousStep=e.currentStep,e.currentStep++,e.focusedItem={type:"survey"});break;case"DECREMENT_STEP":e.currentStep>0&&(e.previousStep=e.currentStep,e.currentStep--,e.focusedItem={type:"survey"});break;case"SET_STEP":t.to>=0&&t.to<=e.lastStep&&(e.previousStep=e.currentStep,e.currentStep=t.to,e.focusedItem={type:"survey"});break;case"UPDATE_TEXT_FIELD":{let s=e.fields[e.fieldLookup[t.fqid]];"text"===s.type&&(s.value=t.value);break}case"UPDATE_NESTED_TEXT_FIELD":{let s=e.fields[e.fieldLookup[t.optionFqid]];"option"===s.type&&s.reveals&&(s.reveals.value=t.value);break}case"TOGGLE_OPTION":{let s=e.fields[e.fieldLookup[t.fqid]];if("option"===s.type){let t=e.selectListLookup[s.selectListId],{start:i,end:l}=t;if("checkbox"===t.as&&t.selectMultiple)s.selected=!s.selected;else{let t=s.selected;for(let t of e.fields.slice(i,l))"option"===t.type&&t.selectListId===s.selectListId&&(t.selected=!1);s.selected=!t}}break}default:(0,I.exhaustivenessCheck)(t)}switch(e.isFirstStep=0===e.currentStep,e.isLastStep=e.currentStep===e.lastStep,e.skipButtonExists=e.isFirstStep&&e.enableSkip,e.backButtonExists=!e.isFirstStep,e.focusedItem?.type){case"field":e.focusedField=e.fields[e.fieldLookup[e.focusedItem.fqid]],e.focusedNestedField=null,e.focusedButton=null;break;case"nested-field":{let t=e.fields[e.fieldLookup[e.focusedItem.optionFqid]];"option"===t.type&&t.reveals&&(e.focusedField=t,e.focusedNestedField=t.reveals,e.focusedButton=null);break}case"button":e.focusedField=null,e.focusedNestedField=null,e.focusedButton=e.focusedItem.buttonId;break;case"survey":case void 0:e.focusedField=null,e.focusedNestedField=null,e.focusedButton=null;break;default:(0,I.exhaustivenessCheck)(e.focusedItem)}});function K(e){let{children:i,...l}=e,{dataTestIdContext:d=[],showThankYouToast:a=!0,onDismiss:n=V.default,onSubmit:o,overrideTeamId:r,surveyInfo:p,submitOnSkip:x}=l,{surveySteps:_}=p,m=_.length>1,[h,E]=(0,s.useReducer)(Y,(e=>{let{enableSkip:t=!1}=e;return{...j(e.surveyInfo),focusedItem:null,focusedField:null,focusedNestedField:null,focusedButton:null,backButtonExists:!1,skipButtonExists:t,submitButtonExists:!0,enableSkip:t}})(l)),{surveyName:b,surveySlug:S,isLastStep:k,fields:T}=h,[g,C]=(0,s.useState)("idle"),[D,N]=(0,s.useState)([]),{team:F,teams:q,user:L}=(0,X.useAccount)(),O=(0,s.useMemo)(()=>q?.find(e=>e.id===r)??F,[r,F,q]),w=O?.id,U=L?.uid,P=w??U,M=(0,u.useToasts)(),A=(0,v.getCookie)(S),R=!!U&&A?.includes(U),B=(0,s.useCallback)(()=>{U&&(A?R||(0,v.setCookie)(S,`${A},${U}`):(0,v.setCookie)(S,U))},[R,A,S,U]),G=(0,s.useCallback)(()=>{c.analytics.track(f.AnalyticsEvent.SURVEY_EXITED,{surveyName:b}),n()},[n,b]),W=(0,s.useCallback)(async()=>{if(!(k||x))return;C("submitting"),c.analytics.track(f.AnalyticsEvent.SURVEY_SUBMITTED,{surveyName:b});let e=T.some(e=>{switch(e.type){case"option":if(e.selected)return!0;return!1;case"text":if(e.value)return!0;return!1;default:return(0,I.exhaustivenessCheck)(e)}});e||c.analytics.track(f.AnalyticsEvent.SURVEY_SUBMITTED_EMPTY,{surveyName:b}),B();try{let t=function(e){let{fields:t,stepLookup:s,selectListLookup:i}=e,l=Object.values(s).map(e=>({title:e.title,description:e.description,fields:[]}));for(let e=0;e<t.length;e++){let s=t[e];switch(s.type){case"text":l[s.stepIndex].fields.push({...s,id:s.inputId});break;case"option":{let d=i[s.selectListId],{start:a,end:n}=d,o=t.slice(a,n).map(e=>{if("text"===e.type)throw Error("Somehow, a text field was added to an option list. This is likely a developer error.");let t={id:e.inputId,label:e.label,selected:e.selected};return e.reveals&&(t.reveals={id:e.reveals.inputId,...e.reveals}),t}),r={type:"select",id:s.selectListId,label:d.label,options:o};"checkbox"===d.as&&(r.selectMultiple=d.selectMultiple),l[s.stepIndex].fields.push(r),e=n-1}break;default:(0,I.exhaustivenessCheck)(s)}}return l}(h);await o({surveyName:b,surveySlug:S,user:L??void 0,team:O??void 0,surveySteps:t,hasResponses:e,get fields(){return t.flatMap(e=>e.fields)}})}finally{C("idle"),a&&M.success({text:"Thank you for your feedback."})}},[k,b,T,B,h,o,x,S,L,O,a,M]);return(0,t.jsx)(y.Provider,{value:{accountId:P,cancel:G,dataTestIdContext:d,dispatch:E,hasMultipleSteps:m,invalidFields:D,originalSteps:_,setInvalidFields:N,setStatus:C,status:g,submit:W,surveyState:h,team:O,updateCookie:B,user:L},children:i})}var z=e.i(9169214);function H(e){let{onAction:s,title:i="Help Shape the Future of Vercel",ctaText:l="Get Started",description:d="Please help us better understand how we can improve your Vercel experience with this 2 minute survey."}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)(r.Modal.Title,{children:i}),(0,t.jsx)("p",{className:`text-copy-16 text-left ${z.default.text}`,children:d})]})}),(0,t.jsx)(r.Modal.Actions,{children:(0,t.jsx)(r.Modal.Action,{fullWidth:!0,onClick:s,children:l})})]})}function J(e){let{isModal:n=!1,externalProps:o}=e,{dispatch:u,submit:v,surveyState:_,team:m,user:h,invalidFields:E}=(0,s.useContext)(y),{className:b,dataTestIdContext:k=[],enableSkip:I=!1,noPadding:g=!1,onSkip:j,onSubmitted:C,showInputLabels:D=!1,stackButtons:N=!1,submitButtonText:F="Submit"}=o,{currentStep:q,focusedField:L,focusedItem:O,isLastStep:w,previousStep:U,stepLookup:P,surveyName:M}=_,{surveySteps:A}=function(e,t){if(t&&1!==e.surveySteps.length)throw Error(`Can only stack buttons for single-step surveys. Your survey has ${e.surveySteps.length} steps.'`);return e}(o.surveyInfo,N),{title:R,description:B}=P[q];(0,s.useEffect)(()=>{u({type:"TOGGLE_SKIP_ENABLED",enableSkip:I})},[u,I]),(0,s.useEffect)(()=>{u({type:"RESET_SURVEY_INFO",surveyInfo:o.surveyInfo})},[u,o.surveyInfo]);let G=h?.uid,W=m?.id;(0,s.useEffect)(()=>{(G||W)&&(c.analytics.track(f.AnalyticsEvent.SURVEY_STARTED,{surveyName:M,teamId:W,userId:G}),u({type:"SET_STEP",to:0}))},[u,M,W,G]);let V=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{V.current&&!V.current.contains(e.target)&&u({type:"SET_FOCUSED_FIELD",fqid:null})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[u]),(0,s.useEffect)(()=>{null===O?document.activeElement?.blur():"survey"===O.type&&V.current?.focus()},[O]);let[X,Y]=(0,s.useState)();(0,s.useEffect)(()=>{let e=new Set;A.forEach(t=>{t.fields.forEach(t=>{if(e.has(t.id)&&Y(`Duplicate top-level field id: ${t.id}`),e.add(t.id),"options"in t){let e=new Set;t.options.forEach(t=>{e.has(t.id)&&Y(`Duplicate option id: ${t.id}`),e.add(t.id)})}})})},[A]);let K=(0,s.useCallback)(function(e){if(V.current?.contains(e.target))switch(e.key){case"Enter":if(!(0,p.isModifierPressed)(e)||E.length>0)return;w?v():(e.preventDefault(),u({type:"INCREMENT_STEP"}));break;case"ArrowRight":L?.type!=="text"&&u({type:"INCREMENT_STEP"});break;case"ArrowLeft":L?.type!=="text"&&u({type:"DECREMENT_STEP"})}},[u,L?.type,E.length,w,v]);(0,s.useEffect)(()=>(window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)),[K]),(0,s.useEffect)(()=>{null!==U&&c.analytics.track(f.AnalyticsEvent.SURVEY_MODAL_STEP_CHANGED,{startIndex:U,endIndex:q,surveyName:M})},[q,M]);let[z,{height:H}]=(0,l.default)(),[J,Q]=(0,a.useSpring)(()=>({config:{...a.config.default,clamp:!0},height:void 0}),[q]);return(0,s.useEffect)(()=>{H&&Q.start({height:`${H}px`})},[q,Q,H]),(0,t.jsxs)("div",{"aria-label":M,"data-testid":T("wrapper",...k),ref:V,tabIndex:-1,"data-survey-container":!0,className:(0,i.clsx)("flex flex-col items-stretch justify-start gap-8 flex-initial",S.default.survey,b,{[S.default["no-padding"]]:g,[S.default.modal]:n}),children:[(0,t.jsx)(d.animated.div,{style:n?void 0:J,children:(0,t.jsxs)("form",{"data-testid":T("form",...k),onSubmit:e=>{e.preventDefault()},title:M,children:[(0,t.jsx)("h1",{className:"geist-sr-only",children:M}),(0,t.jsxs)("fieldset",{children:[(0,t.jsxs)("legend",{className:"geist-sr-only",children:["Step ",q+1]}),(0,t.jsxs)("div",{ref:z,className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[R||B?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:n?(0,t.jsxs)(t.Fragment,{children:[R?(0,t.jsx)(r.Modal.Title,{children:R}):void 0,B?(0,t.jsx)(r.Modal.Subtitle,{children:"string"==typeof B?x(B):B}):null]}):(0,t.jsxs)(t.Fragment,{children:[R?(0,t.jsx)("h1",{className:`text-copy-14 ${S.default.title}`,children:R}):void 0,B?(0,t.jsx)("p",{className:"text-copy-14",children:"string"==typeof B?x(B):B}):null]})}):null,(0,t.jsx)($,{dataTestIdContext:k,showInputLabels:D})]})]})]})}),null,n?null:(0,t.jsx)(Z,{onSkip:j,onSubmitted:C,stack:N,submitButtonText:F})]})}function Z(e){let{onSkip:l,onSubmitted:d,stack:a,submitButtonText:r}=e,{cancel:u,dataTestIdContext:c,dispatch:f,invalidFields:p,originalSteps:x,status:v,submit:_,surveyState:h,hasMultipleSteps:E}=(0,s.useContext)(y),{backButtonExists:b,currentStep:k,fields:I,focusedButton:g,focusedField:j,isLastStep:C,selectListLookup:D,skipButtonExists:N,stepLookup:F}=h,q=(0,s.useRef)(null),L=(0,s.useRef)(null),O=(0,s.useRef)(null);(0,s.useEffect)(()=>{switch(g){case"back":q.current?.focus();break;case"skip":L.current?.focus();break;case"submit":O.current?.focus()}},[g]);let w=j?.type==="option"&&"checkbox"===D[j.selectListId].as,U=E&&!w,P=(0,s.useMemo)(()=>x.map((e,t)=>({key:I[F[t].start].fqid})),[I,x,F]);return(0,t.jsxs)("div",{"aria-label":"Survey navigation controls",role:"group",className:(0,i.clsx)("flex flex-row items-center gap-4 flex-initial",b?"justify-between":"justify-end",S.default.footer),children:[b?(0,t.jsx)(o.Button,{"aria-label":"Back to previous step",className:(0,i.clsx)(S.default["back-button"]),"data-testid":T("back-button",...c),onClick:()=>f({type:"DECREMENT_STEP"}),onFocus:()=>{"back"!==g&&f({type:"SET_FOCUSED_BUTTON",buttonId:"back"})},ref:q,svgOnly:!0,type:"tertiary",typeName:"button",children:(0,t.jsx)(n.ArrowLeft,{"aria-label":"left-facing arrow"})}):null,(0,t.jsxs)("div",{className:(0,i.clsx)("flex flex-col items-center justify-center flex-initial",S.default.info,{[S.default["align-left"]]:!E||N&&w}),children:[(0,t.jsx)("p",{className:(0,i.clsx)("text-[14px] leading-[20px] font-medium text-gray-900",S.default.tip,{[S.default.hidden]:!w}),children:"Press a key to select or ↑↓ to navigate"}),(0,t.jsx)(m,{className:(0,i.clsx)(S.default["step-indicator"],{[S.default.hidden]:!U,[S.default.single]:!E}),currentStep:k,steps:P})]}),(0,t.jsxs)("div",{className:(0,i.clsx)("flex flex-col items-stretch justify-start gap-4 flex-initial",S.default.buttons,{[S.default.stacked]:a&&!E}),children:[N?(0,t.jsx)(o.Button,{className:(0,i.clsx)(S.default["skip-button"]),"data-testid":T("skip-button",...c),onClick:()=>{l?.(),u()},onFocus:()=>{"skip"!==g&&f({type:"SET_FOCUSED_BUTTON",buttonId:"skip"})},ref:L,type:"secondary",children:"Skip"}):null,(0,t.jsx)(o.Button,{"aria-label":C?"Submit survey":"Continue to next step",className:(0,i.clsx)(S.default["submit-button"]),"data-testid":T(C?"submit-button":"next-button",...c),disabled:p.length>0,loading:C?"submitting"===v:void 0,onClick:()=>{C?_().then(d):f({type:"INCREMENT_STEP"})},onFocus:()=>{"submit"!==g&&f({type:"SET_FOCUSED_BUTTON",buttonId:"submit"})},ref:O,children:C?r:"Next"})]})]})}function Q(e){let{externalProps:i}=e,{active:l,dataTestIdContext:d=[],enableSkip:a=!1,hideIfAlreadySeen:n,prompt:o,setActive:u,surveyInfo:c,submitOnSkip:f}=i,{surveySlug:p}=c,{dispatch:x,user:_,cancel:m,submit:h}=(0,s.useContext)(y),[E,b]=(0,s.useState)(o),S=(0,v.getCookie)(p),k=!!_?.uid&&S?.includes(_.uid),I=(0,s.useCallback)(e=>{let t=e?.target;(!t||t.offsetParent?.id!=="cconsent-bar")&&a&&(f&&h(),u(!1),m())},[m,a,u,f,h]);return(0,t.jsxs)(r.Modal.Modal,{active:(!n||!k)&&l,"data-testid":T("modal",...d),drawerHeight:"auto",enableSkip:a,onAnimationDone:()=>{x({type:"SET_STEP",to:0})},onClickOutside:I,width:520,children:[l&&E?(0,t.jsx)(H,{onAction:()=>b(!1)}):null,l&&!E?(0,t.jsx)(ee,{externalProps:i,setShowPrompt:b}):null]})}function ee(e){let{externalProps:i,setShowPrompt:l}=e,{onSkip:d,onSubmitted:a,prompt:n,promptWithToast:o,setActive:c,stackButtons:f=!1,submitButtonText:p="Submit",surveyInfo:x,submitOnSkip:_}=i,{surveySlug:m,surveyName:h}=x,{user:E,updateCookie:S,submit:k}=(0,s.useContext)(y),I=(0,u.useToasts)(),T=(0,v.getCookie)(m),g=!!E?.uid&&T?.includes(E.uid),j=(0,s.useCallback)(()=>{c(!0)},[c]);(0,s.useEffect)(()=>{o&&I.loaded&&!g&&I.message({preserve:!0,text:(0,t.jsx)(b,{id:m,onAction:j,surveyName:h,updateCookie:S}),key:m})},[T,o,h,m,I,g,j,S]);let C=()=>{void 0===d?c(!1):d(),_&&k()},D=()=>{void 0===a?(c(!1),l?.(n)):a()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Modal.Body,{padding:!1,children:(0,t.jsx)(J,{externalProps:{onSkip:C,onSubmitted:D,...i},isModal:!0})}),(0,t.jsx)(r.Modal.Actions,{children:(0,t.jsx)(Z,{onSkip:C,onSubmitted:D,stack:f,submitButtonText:p})})]})}function et(e){return(0,t.jsx)(K,{...e,children:(0,t.jsx)(Q,{externalProps:e})})}function es(e){return(0,t.jsx)(K,{...e,children:(0,t.jsx)(ee,{externalProps:e})})}e.s(["SurveyModal",()=>et,"SurveyModalContent",()=>es],2066827),e.s([],1585898)}]);

//# debugId=ed8d40cd-8e85-388d-cd94-1324b69e4efa
//# sourceMappingURL=6670b1f1d105a262.js.map