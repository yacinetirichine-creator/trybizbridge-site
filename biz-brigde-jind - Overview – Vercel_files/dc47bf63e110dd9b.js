;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="cbc0ba5f-c531-130b-d4b9-183100dee8db")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3011019,e=>{e.v({altBackground:"deployment-row-module__YuNmTG__altBackground",regBackground:"deployment-row-module__YuNmTG__regBackground"})},2557854,e=>{e.v({avatarSkeleton:"days-left-module__C8LofG__avatarSkeleton",daysLeftSkeleton:"days-left-module__C8LofG__daysLeftSkeleton",textAlert:"days-left-module__C8LofG__textAlert",textUsual:"days-left-module__C8LofG__textUsual",textWarn:"days-left-module__C8LofG__textWarn"})},2294149,e=>{e.v({env:"env-module__yrJNiq__env",envSkeleton:"env-module__yrJNiq__envSkeleton"})},1258600,e=>{e.v({menu:"menu-module__nw8Rya__menu",menuButton:"menu-module__nw8Rya__menuButton"})},1051303,e=>{e.v({branchSkeleton:"source-module__Qjrmna__branchSkeleton",commitSkeleton:"source-module__Qjrmna__commitSkeleton",deploymentSource:"source-module__Qjrmna__deploymentSource",hiddenOnMobile:"source-module__Qjrmna__hiddenOnMobile",icon:"source-module__Qjrmna__icon",line:"source-module__Qjrmna__line",link:"source-module__Qjrmna__link",nonOriginal:"source-module__Qjrmna__nonOriginal",rebuild:"source-module__Qjrmna__rebuild",sourceLinks:"source-module__Qjrmna__sourceLinks"})},2972745,e=>{e.v({link:"title-module__hC-65q__link",skeleton:"title-module__hC-65q__skeleton"})},9088996,e=>{e.v({deletedBox:"recently-deleted-deployments-module__welRda__deletedBox",deletedRows:"recently-deleted-deployments-module__welRda__deletedRows",line:"recently-deleted-deployments-module__welRda__line",loadMore:"recently-deleted-deployments-module__welRda__loadMore",loadMoreSkeleton:"recently-deleted-deployments-module__welRda__loadMoreSkeleton",noDeletedBox:"recently-deleted-deployments-module__welRda__noDeletedBox",noDeletedIcon:"recently-deleted-deployments-module__welRda__noDeletedIcon",noDeletedText:"recently-deleted-deployments-module__welRda__noDeletedText",permissionSkeleton:"recently-deleted-deployments-module__welRda__permissionSkeleton",permissionText:"recently-deleted-deployments-module__welRda__permissionText"})},95993,e=>{"use strict";var t=e.i(1146226),l=e.i(5610834),n=e.i(5338940),s=e.i(5140444),i=e.i(8994597),a=e.i(5169864),o=e.i(8248823),r=e.i(3500331),d=e.i(6891161),c=e.i(8522580),u=e.i(5255926),m=e.i(9318197),x=e.i(1906681),h=e.i(455575),f=e.i(57106),p=e.i(1717203),j=e.i(7557283),y=e.i(7808943),g=e.i(8188735),v=e.i(6060673),_=e.i(185801);function S(e){let[l,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(null),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{e.active&&setTimeout(()=>o.current?.focus(),0)},[e.active,o]),(0,t.jsx)(d.Modal.Modal,{active:e.active,onClickOutside:e.onCancel,width:500,children:(0,t.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),e.name!==l.trim())return i(`The text you entered did not match "${e.name}".`);e.onConfirm()},children:[(0,t.jsxs)(d.Modal.Body,{children:[(0,t.jsx)(d.Modal.Title,{children:"Disable Build Logs and Source Protection"}),(0,t.jsx)(m.Spacer,{}),(0,t.jsx)(c.Note,{fill:!0,label:"Warning",type:"error",variant:"contrast",children:"Continuing will make Deployment Status, Build Logs and Source for all deployments publicly accessible."}),(0,t.jsx)(m.Spacer,{}),(0,t.jsxs)("label",{children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["Enter ",(0,t.jsx)("b",{style:{overflowWrap:"anywhere"},children:e.name})," to continue:"]}),(0,t.jsx)(m.Spacer,{y:1/4}),(0,t.jsx)(r.Input,{"aria-label":"Confirmation Text",error:s,onChange:e=>{n(e.target.value),i(null)},ref:o,value:l})]})]}),(0,t.jsxs)(d.Modal.Actions,{children:[(0,t.jsx)(d.Modal.Action,{onClick:e.onCancel,type:"secondary",children:"Cancel"}),(0,t.jsx)(d.Modal.Action,{buttonType:"submit",loading:e.loading,children:"Disable"})]})]})})}function b(){let{project:e}=(0,l.useParams)()||{},{data:i,mutate:r}=(0,v.useProject)(String(e)),{data:d}=(0,s.useUser)(),{team:c,isReady:b}=(0,n.useTeam)(),{can:k,isLoading:w}=(0,p.default)(),[N,C]=(0,a.useState)(!i?.publicSource),[T,D]=(0,a.useState)(!1),[M,L]=(0,a.useState)(!1),[P,R]=(0,a.useState)(null),B=(0,h.useToasts)(),A=!i||!b||!d||w||!e;async function I(){if(!A){L(!0),D(!1);try{R(null),await (0,g.default)(e,c?.id,{publicSource:!N}),B.success("Updated Build Logs and Source Protection successfully."),await r()}catch(e){R((0,o.errorToString)(e))}L(!1)}}let $=k(j.Action.Update,j.Resource.Project),F=!A&&$&&!i.publicSource!==N;return(0,a.useEffect)(()=>{A||C(!i.publicSource)},[A,i]),(0,t.jsx)(_.ProjectSettingsFieldset,{description:(0,t.jsxs)(t.Fragment,{children:["Ensures visitors of the ",(0,t.jsx)(y.default,{children:"/_logs"})," and"," ",(0,t.jsx)(y.default,{children:"/_src"})," paths of your Production and Pre-Production Deployments must log in with Vercel (requires being a member of your team) to see the Source, Logs and Deployment Status."]}),disabled:A||!$,error:P,highlightNote:!A&&!$,note:A?(0,t.jsx)(u.Skeleton,{boxHeight:32,vcenter:!0,width:200}):$?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(f.Link,{external:!0,href:"/docs/projects/overview#build-logs-and-source-protection",type:"highlight",children:"Build Logs and Source Protection"})]}):(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"You need additional permissions to manage your project's logs and source protection."}),onSave:N?I:()=>D(!0),saveDisabled:!F,saveLoading:M,title:"Build Logs and Source Protection",type:A||N?"default":"error",children:A?(0,t.jsx)(u.Skeleton,{height:30,width:140}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{style:{cursor:"pointer"},children:[(0,t.jsx)(x.Toggle,{checked:N,onChange:()=>C(e=>!e),size:"large"}),(0,t.jsx)(m.Spacer,{inline:!0,x:.5}),(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium",children:N?"Enabled":"Disabled"})]}),(0,t.jsx)(S,{active:T,loading:A,name:[c?.slug??d.user?.username,i.name].join("/"),onCancel:()=>{C(!0),D(!1)},onConfirm:I},String(T))]})})}var k=e.i(9480212);function w(e){let[l,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(null),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{e.active&&setTimeout(()=>o.current?.focus(),0)},[e.active,o]),(0,t.jsx)(d.Modal.Modal,{active:e.active,onClickOutside:e.onCancel,width:500,children:(0,t.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),e.name!==l.trim())return i(`The text you entered did not match "${e.name}".`);e.onConfirm()},children:[(0,t.jsxs)(d.Modal.Body,{children:[(0,t.jsx)(d.Modal.Title,{children:"Git Fork Protection"}),(0,t.jsx)(m.Spacer,{}),(0,t.jsx)(c.Note,{fill:!0,label:"Warning",type:"error",variant:"contrast",children:"Continuing will expose your Environment Variables to pull requests from outside of your team."}),(0,t.jsx)(m.Spacer,{}),(0,t.jsxs)("label",{children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["Enter ",(0,t.jsx)("b",{style:{overflowWrap:"anywhere"},children:e.name})," to continue:"]}),(0,t.jsx)(m.Spacer,{y:1/4}),(0,t.jsx)(r.Input,{"aria-label":"Confirmation Text",error:s,onChange:e=>{n(e.target.value),i(null)},ref:o,value:l})]})]}),(0,t.jsxs)(d.Modal.Actions,{children:[(0,t.jsx)(d.Modal.Action,{onClick:e.onCancel,type:"secondary",children:"Cancel"}),(0,t.jsx)(d.Modal.Action,{buttonType:"submit",loading:e.loading,children:"Disable"})]})]})})}function N(){let{project:e}=(0,l.useParams)()||{},{data:i,mutate:r}=(0,v.useProject)(String(e)),{data:d}=(0,s.useUser)(),{team:c,isReady:y}=(0,n.useTeam)(),{can:S,isLoading:b}=(0,p.default)(),N=i?.gitForkProtection??!0,[C,T,D]=(0,k.default)(N),[M,L]=(0,a.useState)(!1),[P,R]=(0,a.useState)(!1),[B,A]=(0,a.useState)(null),I=(0,h.useToasts)(),$=!i||!y||!d||b,F=S(j.Action.Update,j.Resource.Project),O=!$&&e&&F&&C!==N;async function U(){if(O){R(!0),L(!1);try{A(null),await (0,g.default)(e,c?.id,{gitForkProtection:C}),I.success("Updated Git Fork Protection successfully."),D(),await r()}catch(e){A((0,o.errorToString)(e))}R(!1)}}return(0,t.jsx)(_.ProjectSettingsFieldset,{description:(0,t.jsx)(t.Fragment,{children:"Ensures that pull requests targeting your Git repository are authorized by a member of your team before deploying your project."}),disabled:$||!F,error:B,highlightNote:!$&&!F,note:$?(0,t.jsx)(u.Skeleton,{height:32,width:200}):F?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(f.Link,{external:!0,href:"/docs/project-configuration/security-settings#git-fork-protection",type:"highlight",children:"Git Fork Protection"})]}):(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["You need ",(0,t.jsx)(f.Link,{external:!0,href:"/docs/rbac/access-roles/team-level-roles",type:"highlight",children:"additional permissions"})," ","to manage your project's git fork protection."]}),onSave:C?U:()=>L(!0),saveDisabled:!O,saveLoading:P,title:"Git Fork Protection",type:$||C?"default":"error",children:$?(0,t.jsx)(u.Skeleton,{height:30,width:140}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{style:{cursor:"pointer"},children:[(0,t.jsx)(x.Toggle,{checked:C,onChange:()=>T(e=>!e),size:"large"}),(0,t.jsx)(m.Spacer,{inline:!0,x:.5}),(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium",children:C?"Enabled":"Disabled"})]}),(0,t.jsx)(w,{active:M,loading:$,name:[c?.slug??d.user?.username,i.name].join("/"),onCancel:()=>{T(!0),L(!1)},onConfirm:U},String(M))]})})}function C(e){let[l,n]=(0,a.useState)(""),[s,i]=(0,a.useState)(null),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{e.active&&setTimeout(()=>o.current?.focus(),0)},[e.active,o]),(0,t.jsx)(d.Modal.Modal,{active:e.active,onClickOutside:e.onCancel,width:500,children:(0,t.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),e.name!==l.trim())return i(`The text you entered did not match "${e.name}".`);e.onConfirm()},children:[(0,t.jsxs)(d.Modal.Body,{children:[(0,t.jsx)(d.Modal.Title,{children:"Customer Support Code Visibility"}),(0,t.jsx)(m.Spacer,{}),(0,t.jsx)(c.Note,{fill:!0,label:"Warning",type:"error",variant:"contrast",children:"Continuing will allow Vercel customer support to view code for deployments from this project."}),(0,t.jsx)(m.Spacer,{}),(0,t.jsxs)("label",{children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["Enter ",(0,t.jsx)("b",{style:{overflowWrap:"anywhere"},children:e.name})," to continue:"]}),(0,t.jsx)(m.Spacer,{y:1/4}),(0,t.jsx)(r.Input,{"aria-label":"Confirmation Text",error:s,onChange:e=>{n(e.target.value),i(null)},ref:o,value:l})]})]}),(0,t.jsxs)(d.Modal.Actions,{children:[(0,t.jsx)(d.Modal.Action,{onClick:e.onCancel,type:"secondary",children:"Cancel"}),(0,t.jsx)(d.Modal.Action,{buttonType:"submit",loading:e.loading,children:"Enable"})]})]})})}function T(){let{project:e}=(0,l.useParams)()||{},{data:i,mutate:r}=(0,v.useProject)(String(e)),{data:d}=(0,s.useUser)(),{team:c,isReady:y}=(0,n.useTeam)(),{can:S,isLoading:b}=(0,p.default)(),w=i?.customerSupportCodeVisibility??!1,[N,T,D]=(0,k.default)(w),[M,L]=(0,a.useState)(!1),[P,R]=(0,a.useState)(!1),[B,A]=(0,a.useState)(null),I=(0,h.useToasts)(),$=!i||!y||!d||b,F=S(j.Action.Update,j.Resource.Project),O=!$&&e&&F&&N!==w;async function U(){if(O){R(!0),L(!1);try{A(null),await (0,g.default)(e,c?.id,{customerSupportCodeVisibility:N}),I.success("Updated customer support code visibility successfully."),D(),await r()}catch(e){A((0,o.errorToString)(e))}R(!1)}}return(0,t.jsx)(_.ProjectSettingsFieldset,{description:(0,t.jsx)(t.Fragment,{children:"Allows Vercel Customer Support to inspect all Deployments' source code in this project to assist with debugging."}),disabled:$||!F,error:B,highlightNote:!$&&!F,note:$?(0,t.jsx)(u.Skeleton,{height:32,width:200}):F?null:(0,t.jsxs)("p",{className:"text-copy-14",children:["You need"," ",(0,t.jsx)(f.Link,{external:!0,href:"/docs/rbac/access-roles/team-level-roles",type:"highlight",children:"additional permissions"})," ","to manage"," ",(0,t.jsx)(f.Link,{external:!0,href:"/docs/project-configuration/security-settings",type:"highlight",children:"customer success code visibility"}),"."]}),onSave:N?()=>L(!0):U,saveDisabled:!O,saveLoading:P,title:"Customer Success Code Visibility",type:"default",children:$?(0,t.jsx)(u.Skeleton,{height:30,width:140}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{style:{cursor:"pointer"},children:[(0,t.jsx)(x.Toggle,{checked:N,onChange:()=>T(e=>!e),size:"large"}),(0,t.jsx)(m.Spacer,{inline:!0,x:.5}),(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium",children:N?"Enabled":"Disabled"})]}),(0,t.jsx)(C,{active:M,loading:$,name:[c?.slug??d.user?.username,i.name].join("/"),onCancel:()=>{T(!0),L(!1)},onConfirm:U},String(M))]})})}var D=e.i(3306538),M=e.i(9957872),L=e.i(3169345),P=e.i(3322724);function R(){let e=(0,P.useIsMobile)(),{project:s}=(0,l.useParams)()||{},{data:i,mutate:r}=(0,v.useProject)(String(s)),{team:d,isReady:c}=(0,n.useTeam)(),{can:m,isLoading:x}=(0,p.default)(),y=i?.oidcTokenConfig,[S,b,w]=(0,k.default)(y?.issuerMode??"team"),[N,C]=(0,a.useState)(!1),[T,R]=(0,a.useState)(null),B=m(j.Action.Update,j.Resource.Project),A=(0,h.useToasts)(),I=!i||!s||!c||x,$=!(I||!B)&&S!==y?.issuerMode;async function F(){if($){C(!0),R(null);try{await (0,g.updateProjectSettingsV9)(s,d?.id,{oidcTokenConfig:{issuerMode:S}}),A.success("Updated Secure Backend Access with OIDC Federation settings successfully."),w(),await r()}catch(e){R((0,o.errorToString)(e))}finally{C(!1)}}}let O=Math.floor(Date.now()/1e3),U=[{name:"iss",kind:"Issuer",value:"global"===S?"https://oidc.vercel.com":`https://oidc.vercel.com/${d?.slug}`},{name:"aud",kind:"Audience",value:`https://vercel.com/${d?.slug}`},{name:"sub",kind:"Subject",value:`owner:${d?.slug}:project:${s}:environment:production`},{name:"scope",kind:"Scope",value:`owner:${d?.slug}:project:${s}:environment:production`},{name:"iat",kind:"Issued At",value:O},{name:"nbf",kind:"Not Before",value:O},{name:"exp",kind:"Expiration",value:O+3600}];return(0,t.jsxs)(_.ProjectSettingsFieldset,{description:(0,t.jsx)("span",{className:"text-copy-14",children:"Authenticate with your cloud providers using OpenID Connect JSON Web Tokens."}),error:T,highlightNote:!I&&!B,note:I?(0,t.jsx)(u.Skeleton,{height:32,width:200}):(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(f.Link,{external:!0,href:"/docs/oidc",type:"highlight",children:"Secure Backend Access with OIDC Federation"})]}),onSave:F,saveDisabled:!$,saveDisabledMessage:B?void 0:"You need additional permissions to manage OIDC Federation settings.",saveLoading:N,title:"Secure Backend Access with OIDC Federation",type:T?"error":"default",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial pb-2",children:(0,t.jsx)(u.Skeleton,{show:I,children:(0,t.jsxs)(M.ChoiceboxGroup,{disabled:!B,direction:e?"column":"row",label:"Issuer Mode",onChange:e=>b(e),showLabel:!0,type:"radio",value:S,children:[(0,t.jsx)(M.ChoiceboxGroup.Item,{description:(0,t.jsxs)("span",{className:"font-mono text-xs text-gray-900",children:["https://oidc.vercel.com/",(0,t.jsx)("wbr",{}),d?.slug]}),title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-gray-900",children:"Team"})," ",(0,t.jsx)(D.Badge,{size:"sm",variant:B?"blue":"gray",children:"Recommended"})]}),value:"team"}),(0,t.jsx)(M.ChoiceboxGroup.Item,{description:(0,t.jsx)("span",{className:"font-mono text-xs text-gray-900",children:"https://oidc.vercel.com"}),title:(0,t.jsx)("span",{className:"text-gray-900",children:"Global"}),value:"global"})]})})}),(0,t.jsxs)(L.Table,{children:[(0,t.jsxs)(L.Table.Colgroup,{children:[(0,t.jsx)(L.Table.Col,{className:"w-[15%]"}),(0,t.jsx)(L.Table.Col,{className:"w-[15%]"})]}),(0,t.jsx)(L.Table.Header,{children:(0,t.jsxs)(L.Table.Row,{children:[(0,t.jsx)(L.Table.Head,{children:"Claim"}),(0,t.jsx)(L.Table.Head,{children:"Kind"}),(0,t.jsx)("th",{className:"px-2 h-10 font-medium text-left align-middle text-muted-foreground",children:"Value"})]})}),(0,t.jsx)(L.Table.Body,{interactive:!0,striped:!0,children:U.map(e=>(0,t.jsxs)(L.Table.Row,{children:[(0,t.jsx)(L.Table.Cell,{children:(0,t.jsx)("code",{className:"p-1 rounded border",children:e.name})}),(0,t.jsx)(L.Table.Cell,{children:e.kind}),(0,t.jsx)("td",{className:"px-2 py-2.5",children:I?(0,t.jsx)(u.Skeleton,{width:"100%"}):(0,t.jsx)("pre",{children:e.value})})]},e.name))})]})]})}var B=e.i(8045441),A=e.i(6870754),I=e.i(7087273),$=e.i(8004707),F=e.i(790664),O=e.i(5771992),U=e.i(930810),E=e.i(3011019),G=e.i(7432042),W=e.i(7218483),V=e.i(3907048),Q=e.i(2557854),z=e.i(9722978);function q(e){let{deployment:l}=e,n=(l?.deleted??Date.now())+(0,G.default)("30d"),s=Math.max(Math.floor((n-Date.now())/864e5),0),i=(0,W.useDaysLeft)(n),a="";return s<=7?a=Q.default.textAlert:s>7&&s<=14?a=Q.default.textWarn:s>14&&(a=Q.default.textUsual),(0,t.jsxs)("div",{className:(0,z.default)("flex flex-col w-28 items-stretch justify-start flex-initial"),children:[l?(0,t.jsx)("p",{className:`text-copy-14 ${a}`,children:i}):(0,t.jsx)(u.Skeleton,{className:Q.default.daysLeftSkeleton}),l?(0,t.jsx)(V.CreatorAvatar,{deployment:l,showProviderIcon:!0,size:16}):(0,t.jsx)(u.Skeleton,{className:Q.default.avatarSkeleton})]})}var H=e.i(8482433),Y=e.i(2294149);function J(e){let{deployment:l}=e;return(0,t.jsx)(t.Fragment,{children:l?(0,t.jsx)("p",{className:`text-copy-14 ${Y.default.env}`,children:null!==l.target?(0,H.default)(l.target):"Preview"}):(0,t.jsx)(u.Skeleton,{className:Y.default.envSkeleton})})}var K=e.i(8674454),Z=e.i(6694387),X=e.i(4991687),ee=e.i(8459493),et=e.i(8876434),el=e.i(9375869),en=e.i(1258600);function es(e){let{deployment:l,handleUndeleteDeployment:n,canUpdateDeployment:s}=e,i=(0,el.useDeploymentLink)(l);if(!l)return(0,t.jsx)(X.MenuContainer,{children:(0,t.jsx)(Z.MenuButton,{"aria-label":"Menu",className:en.default.menuButton,disabled:!0,svgOnly:!0,typeName:"button",children:(0,t.jsx)(et.MoreHorizontal,{})})});let a="deleted"in l?()=>n?.((0,U.getDeploymentId)(l)??""):void 0;return(0,t.jsxs)(X.MenuContainer,{children:[(0,t.jsx)(Z.MenuButton,{"aria-label":"Menu",className:en.default.menuButton,svgOnly:!0,typeName:"button",children:(0,t.jsx)(et.MoreHorizontal,{})}),(0,t.jsxs)(K.Menu,{className:en.default.menu,children:[(0,t.jsx)(ee.MenuItem,{children:(0,t.jsx)(f.Link,{external:!0,href:i,children:"View Source"})}),s?(0,t.jsx)(ee.MenuItem,{onClick:a,children:"Restore"}):null,null]})]})}var ei=e.i(8893913),ea=e.i(3753138),eo=e.i(7417898),er=e.i(5071474),ed=e.i(6625227),ec=e.i(1051303);function eu(e){let l,{deployment:n,deploymentsMap:s}=e,i=n?.meta?.originalDeploymentId,o=i?String(i):void 0;o&&(l=s?.get(o));let{data:r,isLoading:d}=(0,ed.default)(l?void 0:o,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});r&&(l=r);let c=(0,el.useDeploymentLink)(l),m=(0,a.useMemo)(()=>l?(0,er.default)(l).hash:"",[l]);if(!n)return(0,t.jsxs)("div",{className:(0,z.default)("flex flex-col items-stretch justify-start flex-initial",ec.default.deploymentSource,ec.default.hiddenOnMobile),children:[(0,t.jsx)(u.Skeleton,{className:ec.default.branchSkeleton}),(0,t.jsx)(u.Skeleton,{className:ec.default.commitSkeleton})]});if(o){let e=n.meta?.action==="promote"||"production"===n.target&&l?.target!=="production";return(0,t.jsx)("div",{className:(0,z.default)("flex flex-col items-stretch justify-start flex-initial",ec.default.deploymentSource,ec.default.hiddenOnMobile),children:(0,t.jsx)("div",{className:(0,z.default)("flex flex-col items-stretch justify-start flex-initial",ec.default.line),children:d?(0,t.jsx)(u.Skeleton,{className:ec.default.branchSkeleton}):(0,t.jsxs)("div",{className:(0,z.default)("flex flex-col items-stretch justify-start flex-initial",ec.default.nonOriginal),children:[e?(0,t.jsx)(ea.ArrowCircleUp,{className:ec.default.icon}):(0,t.jsx)(ei.RotateCounterClockwise,{className:ec.default.icon}),(0,t.jsxs)("p",{className:`text-copy-14 ${ec.default.rebuild}`,children:[e?"Production Rebuild":"Redeploy"," of"," ",l?(0,t.jsx)(f.Link,{className:ec.default.link,href:c,title:l.host||"",variant:"secondary",children:m?(0,t.jsx)(y.default,{children:m}):l.host||""}):"a deleted deployment"]})]})})})}return(0,t.jsx)("div",{className:(0,z.default)("flex flex-col items-stretch justify-start flex-initial",ec.default.deploymentSource,ec.default.hiddenOnMobile),children:(0,t.jsx)(eo.DeploymentSourceLinks,{deployment:n})})}var em=e.i(2972745);function ex(e){let{deployment:l}=e,n=(0,el.useDeploymentLink)(l);return(0,t.jsx)(t.Fragment,{children:l?(0,t.jsx)(f.Link,{className:em.default.link,href:n,title:l.url,children:(0,t.jsx)("p",{className:"text-heading-14 truncate",children:l.url.startsWith(l.name)?l.url.replace(`${l.name}-`,"").split(/[^a-zA-Z0-9]/)[0]:l.url})}):(0,t.jsx)(u.Skeleton,{className:em.default.skeleton})})}function eh(e){let{deployment:l,deploymentsMap:n,handleUndeleteDeployment:s,alternate:i}=e,{can:a}=(0,p.default)(),o=l?.target!==null?j.Resource.Deployment:j.Resource.DeploymentPreview,r=a(j.Action.Update,o);return(0,t.jsxs)("div",{className:`flex flex-row items-stretch justify-start flex-initial ${i?E.default.altBackground:E.default.regBackground}`,children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial my-auto w-[250px]",children:[(0,t.jsx)(ex,{deployment:l}),(0,t.jsx)(J,{deployment:l})]}),(0,t.jsx)(eu,{deployment:l,deploymentsMap:n}),(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-stretch justify-start flex-initial",children:[(0,t.jsx)(q,{deployment:l}),(0,t.jsx)(es,{canUpdateDeployment:r,deployment:l,handleUndeleteDeployment:()=>s?.(l?.uid??"xxx")})]})]})}var ef=e.i(9088996),ep=e.i(579135);function ej(){let e=(0,ep.useCurrentProjectNameAndId)(),{data:l}=(0,s.useUser)(),{team:i,isReady:o}=(0,n.useTeam)(),{can:r,isLoading:d}=(0,p.default)(),c=!e||!o||!l||d,[m,x]=(0,a.useState)(void 0),{deployments:h,isLoadingMore:y,isReachingEnd:g,isEmpty:v,initialDataLoaded:S,loadMore:b,mutate:k}=(0,O.useDeploymentsInfinite)({limit:30,project:e,requireProject:!0,readyStateFilter:"DELETED"},{refreshInterval:5e3})[1],w=h.filter(e=>(0,U.isDeleted)(e)),N=(0,a.useRef)(new Map);for(let e of h)N.current.set(e.uid,e);let C=r(j.Action.Write,j.Resource.Deployment);return(0,t.jsx)(_.ProjectSettingsFieldset,{description:(0,t.jsxs)("span",{className:"text-copy-14",children:["These deployments have been deleted based on your"," ",(0,t.jsx)(f.Link,{href:"#deployment-retention-policy",type:"highlight",children:"defined retention policy."})," ","Most deployments can be restored within 30 days of their initial deletion."]}),disabled:c||!C,highlightNote:!c&&!C,note:c?(0,t.jsx)(u.Skeleton,{className:ef.default.permissionSkeleton}):C?(0,t.jsxs)("p",{className:`text-copy-14 ${ef.default.permissionText}`,children:["Learn more about"," ",(0,t.jsx)(f.Link,{external:!0,href:"/docs/security/deployment-retention#restoring-a-deleted-deployment",type:"highlight",children:"Recently Deleted Deployments"})]}):(0,t.jsx)("p",{className:`text-copy-14 ${ef.default.permissionText}`,children:"You need additional permissions to manage your project's Recently Deleted Deployments."}),title:"Recently Deleted Deployments",type:"default",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("hr",{className:ef.default.line}),c||!S?(0,t.jsxs)("div",{className:`flex flex-col items-stretch justify-start flex-initial ${ef.default.deletedBox}`,children:[(0,t.jsxs)("div",{className:`flex flex-col items-stretch justify-start flex-initial ${ef.default.deletedRows}`,children:[(0,t.jsx)(eh,{alternate:!0},"loading-deployment-1"),(0,t.jsx)(eh,{},"loading-deployment-2"),(0,t.jsx)(eh,{alternate:!0},"loading-deployment-3"),(0,t.jsx)(eh,{},"loading-deployment-4")]}),(0,t.jsx)("div",{className:`flex flex-col items-stretch justify-start flex-initial ${ef.default.loadMore}`,children:(0,t.jsx)(u.Skeleton,{className:ef.default.loadMoreSkeleton})})]}):(0,t.jsxs)("div",{className:`flex flex-col items-stretch justify-start flex-initial ${ef.default.deletedBox}`,children:[(0,t.jsx)("div",{className:`flex flex-col items-stretch justify-start flex-initial ${ef.default.deletedRows}`,children:v&&0===w.length?(0,t.jsxs)("div",{className:`flex flex-col items-center flex-initial ${ef.default.noDeletedBox}`,children:[(0,t.jsx)($.ArrowGlobe,{className:ef.default.noDeletedIcon}),(0,t.jsx)("p",{className:`text-copy-14 ${ef.default.noDeletedText}`,children:"No recently deleted deployments were found."})]}):(0,t.jsx)(I.Scroller,{className:ef.default.deletedRowScroll,overflow:"y",children:w.map((e,l)=>(0,t.jsx)(eh,{alternate:l%2==0,deployment:e,deploymentsMap:N.current,handleUndeleteDeployment:()=>x(e.uid)},e.uid))})}),(0,t.jsx)("div",{className:`flex flex-col items-stretch justify-start flex-initial ${ef.default.loadMore}`,children:g||v&&0===w.length?null:(0,t.jsx)(A.LoadMoreButton,{loading:y,onClick:async()=>{await b()}})})]}),(0,t.jsx)(F.default,{active:!!m,deploymentId:m,onClose:async()=>{await k(),x(void 0)},teamId:i?.id})]})})}e.s(["default",0,function(){let{project:e}=(0,l.useParams)()??{},{data:a,isLoading:o}=(0,v.useProject)(e),{team:r,isLoading:d}=(0,n.useTeam)(),{user:c,isLoading:u}=(0,s.useUser)(),m=!a?.publicSource&&!o&&!d&&!u&&!!(c||r)&&!!a&&"hobby"!==(r?.billing?.plan||c?.billing?.plan);return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-8 flex-initial",children:[(0,t.jsx)(i.HeadTitle,{title:`${e||""} â€“ Security`,titlePostfix:!0}),(0,t.jsx)(b,{}),m?(0,t.jsx)(T,{}):null,(0,t.jsx)(N,{}),(0,t.jsx)(R,{}),(0,t.jsx)(B.ProjectDeploymentRetention,{}),(0,t.jsx)(ej,{})]})}],95993)}]);

//# debugId=cbc0ba5f-c531-130b-d4b9-183100dee8db
//# sourceMappingURL=25bcc29e0113a50c.js.map