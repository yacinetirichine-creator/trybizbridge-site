;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b82495e5-eb3c-9701-0735-81b94af71f7b")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6273217,e=>{e.v({alignEnd:"trace-viewer-module__8w33tq__alignEnd",alignStart:"trace-viewer-module__8w33tq__alignStart",ancestorDuration:"trace-viewer-module__8w33tq__ancestorDuration",ancestorLine:"trace-viewer-module__8w33tq__ancestorLine",ancestorLineContainer:"trace-viewer-module__8w33tq__ancestorLineContainer",ancestorName:"trace-viewer-module__8w33tq__ancestorName",ancestorNode:"trace-viewer-module__8w33tq__ancestorNode",ancestorText:"trace-viewer-module__8w33tq__ancestorText",buttonLink:"trace-viewer-module__8w33tq__buttonLink",childRow:"trace-viewer-module__8w33tq__childRow",collapsed:"trace-viewer-module__8w33tq__collapsed",color0:"trace-viewer-module__8w33tq__color0",color1:"trace-viewer-module__8w33tq__color1",color2:"trace-viewer-module__8w33tq__color2",color3:"trace-viewer-module__8w33tq__color3",color4:"trace-viewer-module__8w33tq__color4",colorHighlight:"trace-viewer-module__8w33tq__colorHighlight",colorVercel:"trace-viewer-module__8w33tq__colorVercel",cursorMarker:"trace-viewer-module__8w33tq__cursorMarker",cursorMarkerContainer:"trace-viewer-module__8w33tq__cursorMarkerContainer",cursorMarkerLabel:"trace-viewer-module__8w33tq__cursorMarkerLabel",cursorMarkerLabelContainer:"trace-viewer-module__8w33tq__cursorMarkerLabelContainer",cursorMarkerStickyParent:"trace-viewer-module__8w33tq__cursorMarkerStickyParent",cursorSelection:"trace-viewer-module__8w33tq__cursorSelection",customEventColor:"trace-viewer-module__8w33tq__customEventColor",detailGroup:"trace-viewer-module__8w33tq__detailGroup",detailHeading:"trace-viewer-module__8w33tq__detailHeading",detailHeadingIcon:"trace-viewer-module__8w33tq__detailHeadingIcon",divider:"trace-viewer-module__8w33tq__divider",eventDiamond:"trace-viewer-module__8w33tq__eventDiamond",eventMarker:"trace-viewer-module__8w33tq__eventMarker",eventMarkers:"trace-viewer-module__8w33tq__eventMarkers",eventMarkersContainer:"trace-viewer-module__8w33tq__eventMarkersContainer",eventName:"trace-viewer-module__8w33tq__eventName",eventTimestamp:"trace-viewer-module__8w33tq__eventTimestamp",hidden:"trace-viewer-module__8w33tq__hidden",hoverInfo:"trace-viewer-module__8w33tq__hoverInfo",huge:"trace-viewer-module__8w33tq__huge",inert:"trace-viewer-module__8w33tq__inert",infraSpanDescription:"trace-viewer-module__8w33tq__infraSpanDescription",mapCanvas:"trace-viewer-module__8w33tq__mapCanvas",mapContainer:"trace-viewer-module__8w33tq__mapContainer",mapThumb:"trace-viewer-module__8w33tq__mapThumb",marker:"trace-viewer-module__8w33tq__marker",markerLabel:"trace-viewer-module__8w33tq__markerLabel",markers:"trace-viewer-module__8w33tq__markers",markersContainer:"trace-viewer-module__8w33tq__markersContainer",mobile:"trace-viewer-module__8w33tq__mobile",notch:"trace-viewer-module__8w33tq__notch",note:"trace-viewer-module__8w33tq__note",searchBar:"trace-viewer-module__8w33tq__searchBar",searchInput:"trace-viewer-module__8w33tq__searchInput",searchInputLabel:"trace-viewer-module__8w33tq__searchInputLabel",searchInputPrefix:"trace-viewer-module__8w33tq__searchInputPrefix",selected:"trace-viewer-module__8w33tq__selected",skeleton:"trace-viewer-module__8w33tq__skeleton",skeletonRounded:"trace-viewer-module__8w33tq__skeletonRounded",small:"trace-viewer-module__8w33tq__small","span-skeleton":"trace-viewer-module__8w33tq__span-skeleton",spanDetailPanel:"trace-viewer-module__8w33tq__spanDetailPanel",spanDetailPanelAttribute:"trace-viewer-module__8w33tq__spanDetailPanelAttribute",spanDetailPanelAttributeKey:"trace-viewer-module__8w33tq__spanDetailPanelAttributeKey",spanDetailPanelAttributeValue:"trace-viewer-module__8w33tq__spanDetailPanelAttributeValue",spanDetailPanelBody:"trace-viewer-module__8w33tq__spanDetailPanelBody",spanDetailPanelClose:"trace-viewer-module__8w33tq__spanDetailPanelClose",spanDetailPanelCloseVerticalRule:"trace-viewer-module__8w33tq__spanDetailPanelCloseVerticalRule",spanDetailPanelCorner:"trace-viewer-module__8w33tq__spanDetailPanelCorner",spanDetailPanelCornerInner:"trace-viewer-module__8w33tq__spanDetailPanelCornerInner",spanDetailPanelDuration:"trace-viewer-module__8w33tq__spanDetailPanelDuration",spanDetailPanelName:"trace-viewer-module__8w33tq__spanDetailPanelName",spanDetailPanelQuickLink:"trace-viewer-module__8w33tq__spanDetailPanelQuickLink",spanDetailPanelQuickLinkLabel:"trace-viewer-module__8w33tq__spanDetailPanelQuickLinkLabel",spanDetailPanelResizer:"trace-viewer-module__8w33tq__spanDetailPanelResizer",spanDetailPanelTop:"trace-viewer-module__8w33tq__spanDetailPanelTop",spanDetailPanelTopInfo:"trace-viewer-module__8w33tq__spanDetailPanelTopInfo",spanDetailPanelTraceViewer:"trace-viewer-module__8w33tq__spanDetailPanelTraceViewer",spanDetailPanelTruncatedHeading:"trace-viewer-module__8w33tq__spanDetailPanelTruncatedHeading",spanDuration:"trace-viewer-module__8w33tq__spanDuration",spanName:"trace-viewer-module__8w33tq__spanName",spanNameDetailPanel:"trace-viewer-module__8w33tq__spanNameDetailPanel",spanNode:"trace-viewer-module__8w33tq__spanNode",spanNodeEvent:"trace-viewer-module__8w33tq__spanNodeEvent",spanSpacer:"trace-viewer-module__8w33tq__spanSpacer",timeline:"trace-viewer-module__8w33tq__timeline",traceNode:"trace-viewer-module__8w33tq__traceNode",traceViewer:"trace-viewer-module__8w33tq__traceViewer",traceViewerContent:"trace-viewer-module__8w33tq__traceViewerContent",unlit:"trace-viewer-module__8w33tq__unlit",xHover:"trace-viewer-module__8w33tq__xHover","zoom-buttons-fade-in":"trace-viewer-module__8w33tq__zoom-buttons-fade-in",zoomButton:"trace-viewer-module__8w33tq__zoomButton",zoomButtonGroup:"trace-viewer-module__8w33tq__zoomButtonGroup",zoomButtonTraceViewer:"trace-viewer-module__8w33tq__zoomButtonTraceViewer"})},4853462,e=>{e.v(e.b(["static/chunks/8a11e2a5d621c228.js","static/chunks/turbopack-29203ad483c93290.js"]))},5851942,e=>{"use strict";var t=e.i(1146226),r=e.i(5169864),a=e.i(9722978),n=e.i(6273217);let i={"gray-700":"var(--ds-gray-700)","gray-900":"var(--ds-gray-900)"};function l(e){let{size:r=16,color:a="gray-700"}=e,n={color:i[a]||a};return(0,t.jsx)("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none",style:n,"aria-hidden":!0,children:(0,t.jsx)("path",{d:"M6 6l12 12M18 6L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function s(e){let{size:r=16}=e;return(0,t.jsx)("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,className:n.default.detailHeadingIcon,children:(0,t.jsx)("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function o(e){let{size:r=16,color:a="gray-900"}=e,n={color:i[a]||a};return(0,t.jsxs)("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none",style:n,"aria-hidden":!0,children:[(0,t.jsx)("path",{d:"M14 4h6m0 0v6m0-6L10 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M20 14v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function c(e){let{as:r,className:a,href:n,children:i,...l}=e;return"span"!==(r||"a")&&n?(0,t.jsx)("a",{className:a,href:n,...l,children:i}):(0,t.jsx)("span",{className:a,...l,children:i})}function u(e){let{className:r,children:i,size:l,...s}=e;return(0,t.jsx)("a",{...s,className:(0,a.clsx)(n.default.buttonLink,r),children:i})}function d(e){let{children:r,className:i}=e;return(0,t.jsx)("div",{className:(0,a.clsx)(n.default.note,i),children:r})}function m(e){let{width:r,height:i,rounded:l}=e;return(0,t.jsx)("span",{className:(0,a.clsx)(n.default.skeleton,l&&n.default.skeletonRounded),style:{width:r,height:i},"aria-hidden":!0})}let h={root:{startTime:0,endTime:1,duration:1,depth:0,children:[]},spanMap:{},resourceMap:{},filter:"",selected:null,baseScale:1,scaleRatio:1,scale:1,width:640,height:480,timelineWidth:640,timelineHeight:480,panelWidth:380,panelHeight:480,scrollbarWidth:0,timelineRef:{current:null},scrollSnapshotRef:{current:void 0},memoCacheRef:{current:new Map},getQuickLinks:()=>[],withPanel:!1,isMobile:!1,customPanelComponent:null},p=e=>(e.width-e.scrollbarWidth-Number(!!(e.selected&&e.withPanel))*e.panelWidth)/e.root.duration,f=(0,r.createContext)({state:h,dispatch:()=>{}});f.displayName="TraceViewerContext";let w=(e,t)=>{switch(t.type){case"setRoot":return e.scrollSnapshotRef.current=void 0,e.memoCacheRef.current.clear(),w({...e,root:t.root,spanMap:t.spanMap,resourceMap:Object.fromEntries(t.resources.map(e=>{let{name:t,attributes:r}=e;return[t,r]}))},{type:"detectBaseScale"});case"setSize":{let r=t.height-56-40-24,a=e.withPanel&&t.width<=768,n={...e,width:t.width,height:t.height,timelineWidth:t.width-Number(!!(e.selected&&e.withPanel&&!a))*e.panelWidth,timelineHeight:r,panelHeight:r,isMobile:a};return n.width!==e.width&&(n=w(n,{type:"detectBaseScale"})),n}case"setPanelWidth":{let r=Math.max(240,Math.min(t.width,e.width-240));return{...e,timelineWidth:e.width-r,panelWidth:r}}case"setFilter":return{...e,filter:t.filter};case"deselect":return w({...e,selected:null,timelineWidth:e.width},{type:"minScale"});case"select":{let r=e.spanMap[t.id];if(!r)return e;return{...e,selected:r,timelineWidth:e.width-(e.withPanel&&!e.isMobile?e.panelWidth:0)}}case"escape":if(e.selected)return w(e,{type:"deselect"});return w(e,{type:"resetScale"});case"toggleSelection":{let r=e;if(e.selected&&(r=w(r,{type:"deselect"})),e.selected?.span.spanId===t.id)return r;return w(r,{type:"select",id:t.id})}case"detectBaseScale":{let t=(e.width-e.scrollbarWidth)/e.root.duration;return{...e,baseScale:t,scale:t*e.scaleRatio}}case"setScale":return{...e,scaleRatio:t.scale,scale:e.baseScale*t.scale};case"resetScale":return w(e,{type:"scaleToRange",t1:e.root.startTime,t2:e.root.endTime});case"scaleToNode":{let r=e.spanMap[t.id];if(!r)return e;return w(w(e,{type:"setScale",scale:(e.width-e.scrollbarWidth-(e.withPanel&&!e.isMobile?e.panelWidth:0))/r.duration/e.baseScale}),{type:"setScrollSnapshot",anchorT:r.startTime-e.root.startTime,anchorX:0})}case"scaleToRange":{let r=Math.abs(t.t1-t.t2);return w(w(e,{type:"setScale",scale:(e.width-e.scrollbarWidth-(e.selected&&e.withPanel?e.panelWidth:0))/r/e.baseScale}),{type:"setScrollSnapshot",anchorT:Math.min(t.t1,t.t2)-e.root.startTime,anchorX:0})}case"adjustScaleRatio":{let{scaleRatio:r}=e;switch(t.direction){case -1:r*=.8;break;case 1:r*=1.25;break;default:r=1}let a=e.timelineRef.current;if(!a)return console.warn("timelineRef is null"),e;let{clientWidth:n,scrollLeft:i}=a;return w(w({...e,scaleRatio:r,scale:e.baseScale*r},{type:"minScale"}),{type:"setScrollSnapshot",anchorT:(i+.5*n)/e.scale,anchorX:.5*n})}case"trackpadScale":{let r=Math.max(p(e)/e.baseScale,e.scaleRatio*(1+.2*Math.sign(t.delta)*Math.sqrt(Math.abs(t.delta))));return w({...e,scaleRatio:r,scale:e.baseScale*r},{type:"setScrollSnapshot",anchorT:t.anchorT,anchorX:t.anchorX})}case"minScale":{let t=p(e);if(e.scale>=t)return e;return{...e,scale:t,scaleRatio:t/e.baseScale}}case"setScrollSnapshot":{let r=e.timelineRef.current;if(!r)return e;let{anchorT:a,anchorX:n}=t,i=a*e.scale-n,{scrollTop:l}=r,s=(l-24-8)/26,o=s+Math.ceil(e.timelineHeight/26);return e.scrollSnapshotRef.current={anchorT:a,anchorX:n,scrollLeft:i,scrollTop:l,startTime:e.root.startTime+i/e.scale,endTime:e.root.startTime+(i+e.timelineWidth)/e.scale,startRow:s,endRow:o,scale:e.scale},e}case"setWithPanel":if(e.withPanel===t.withPanel)return e;return{...e,withPanel:t.withPanel};case"forceRender":return e.memoCacheRef.current.set("",{}),{...e}}};function v(e){let{getQuickLinks:a,withPanel:n=!1,children:i,customSpanClassNameFunc:l,customSpanEventClassNameFunc:s,customPanelComponent:o=null}=e,c=(0,r.useRef)(null),u=(0,r.useRef)(void 0),d=(0,r.useRef)(a);d.current=a;let m=(0,r.useRef)(new Map),p=(0,r.useRef)(new Map),[v,_]=(0,r.useReducer)(w,h,e=>({...e,scrollbarWidth:(()=>{if(!("document"in globalThis))return 0;let e=document.createElement("div");e.style.width="400px",e.style.height="400px",e.style.overflow="scroll",document.body.appendChild(e);let t=400-e.scrollWidth;return e.remove(),t})(),timelineRef:c,scrollSnapshotRef:u,customSpanClassNameFunc:l,customSpanEventClassNameFunc:s,customPanelComponent:o,memoCacheRef:m,withPanel:n,getQuickLinks:e=>{let t=e.spanId,r=p.current.get(t);if(r)return r;let a=d.current?.(e)||[];return p.current.set(t,a),a}}));(0,r.useEffect)(()=>_({type:"setWithPanel",withPanel:n}),[n]);let x=(0,r.useMemo)(()=>({state:v,dispatch:_}),[v,_]);return(0,t.jsx)(f.Provider,{value:x,children:i})}let _=()=>(0,r.useContext)(f);var x=e.i(9698309);let g=(e,t)=>e.duration*t<64,b=(e,t)=>e.duration*t>=500,k=e=>e.isVercel?String(n.default.colorVercel):String(n.default[`color${e.resourceIndex%5}`]),j=(e,t)=>{let r=b(e,t),i=e.isHovered&&!r&&!1!==e.isHighlighted;return(0,a.clsx)(n.default.spanNode,r&&n.default.huge,g(e,t)&&n.default.small,e.isSelected&&n.default.selected,i&&n.default.xHover,e.isHighlighted?n.default.colorHighlight:k(e),!1===e.isHighlighted&&n.default.unlit)},y=(0,r.memo)(function(e){let{root:r,scale:a,spans:n,scrollSnapshotRef:i,cache:l,customSpanClassNameFunc:s,customSpanEventClassNameFunc:o}=e;return n.map(e=>(0,t.jsx)(T,{cacheKey:l.get(e.span.spanId),customSpanEventClassNameFunc:o,customSpanClassNameFunc:s,node:e,root:r,scale:a,scrollSnapshotRef:i},e.span.spanId))}),T=(0,r.memo)(function(e){let{node:i,root:l,scale:s,scrollSnapshotRef:o,customSpanClassNameFunc:c,customSpanEventClassNameFunc:u}=e,d=(0,r.useRef)(null);i.ref=d;let{span:m}=i,h=i.isInstrumentationHint?"Get Started":(0,x.formatDuration)(i.duration),p=(i.startTime-l.startTime)*s,f=24+26*i.row,w=i.duration*s,v=24,_=b(i,s),k=g(i,s),y=i.isHovered&&!_&&!1!==i.isHighlighted;k&&!y&&(v*=.4,f+=(24-v)*.5);let T=!1;if(y){let{duration:e,endTime:t}=l,r=o.current;r&&(e=r.endTime-r.startTime,t=r.endTime),T=t-i.startTime<.25*e}let S=c?c(i):"";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{"aria-label":`${m.name} - ${h}`,className:(0,a.clsx)(j(i,s),S),"data-span-id":m.spanId,"data-start-time":i.startTime-l.startTime,"data-right-side":T,ref:d,style:{"--span-width":`${w}px`,minWidth:y?w:void 0,width:y?void 0:w,height:v,maxWidth:y&&!T?(l.endTime-i.startTime)*s:void 0,containIntrinsicWidth:y?void 0:w,containIntrinsicHeight:v,left:T?void 0:p,right:T?(l.endTime-i.endTime)*s:void 0,top:f},type:"button",children:k&&!y?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:n.default.spanName,children:i.label||m.name}),_?(0,t.jsx)("span",{className:n.default.spanSpacer}):null,y||w>128?(0,t.jsx)("span",{className:n.default.spanDuration,children:h}):null]})}),i.events&&!k?i.events.map(e=>(0,t.jsx)(N,{customSpanEventClassNameFunc:u,event:e,node:i,root:l,scale:s},e.key)):null]})}),N=(0,r.memo)(function(e){let{event:i,node:l,root:s,scale:o,customSpanEventClassNameFunc:c}=e,u=(0,r.useRef)(null);i.ref=u;let{event:{name:d}}=i,m=(0,x.formatDuration)(i.timestamp-s.startTime),h=(i.timestamp-s.startTime)*o,p=24+26*l.row,f=c?c(i):"";return(0,t.jsxs)("div",{"aria-label":`${d} - ${m}`,className:(0,a.clsx)(n.default.spanNodeEvent,f,l.isHighlighted?n.default.colorHighlight:k(l),!1===l.isHighlighted&&n.default.unlit),"data-hovered":i.isHovered,ref:u,style:{left:h,top:p},children:[(0,t.jsxs)("div",{className:(0,a.clsx)(n.default.hoverInfo,(i.timestamp-l.startTime)/l.duration<.5?n.default.alignStart:n.default.alignEnd),children:[(0,t.jsx)("span",{className:n.default.eventName,children:d}),(0,t.jsx)("span",{className:n.default.eventTimestamp,children:m})]}),(0,t.jsx)("div",{className:n.default.eventDiamond})]})}),S=e=>`${(100*e).toFixed(3)}%`,L=(e,t)=>e<t?-1:+(e>t),M=e=>{let t={};for(let[r,a]of Object.entries(e)){let e=r.indexOf("."),n="",i="";-1!==e?(n=r.substring(0,e),i=r.substring(e+1)):i=r;let l=t[n];l||(l={prefix:n,attributes:[]},t[n]=l),l.attributes.push({key:r,suffix:i,value:String(a)})}let r=Array.from(Object.values(t)).sort((e,t)=>L(e.prefix,t.prefix));for(let e of r)e.attributes.sort((e,t)=>L(e.suffix,t.suffix));return r},q=()=>{let{state:{root:e,selected:i,resourceMap:l,getQuickLinks:s},dispatch:o}=_(),c=(0,r.useMemo)(()=>((e,t)=>{let r=[];if(!t)return r;for(let e=t;"parent"in e;e=e.parent)r.unshift(e);return r})(0,i),[e,i]),u=(0,r.useMemo)(()=>M(i?.span.attributes??{}),[i]),d=(0,r.useMemo)(()=>{let e=i?.span.resource;if(!e)return[];let t=l[e];return t?M(t):[]},[l,i]);if(!i)return null;let{span:m}=i,h=A(i);return(0,t.jsxs)(t.Fragment,{children:[i.isVercel?(0,t.jsx)(F,{node:i}):null,i.isInstrumentationHint?(0,t.jsx)(B,{}):null,!i.isInstrumentationHint&&c.length?(0,t.jsx)(E,{className:n.default.ancestorGroup,name:"Location",children:c.map(r=>(0,t.jsxs)("button",{className:n.default.ancestorNode,onClick:()=>o({type:"select",id:r.span.spanId}),type:"button",children:[(0,t.jsxs)("div",{className:n.default.ancestorText,children:[(0,t.jsx)("span",{className:n.default.ancestorName,children:r.label||r.span.name}),(0,t.jsx)("span",{className:n.default.ancestorDuration,children:(0,x.formatDuration)(r.duration)})]}),(0,t.jsx)("span",{"aria-hidden":!0,className:n.default.ancestorLineContainer,children:(0,t.jsx)("span",{className:(0,a.clsx)(n.default.ancestorLine,k(r)),style:{left:S((r.startTime-e.startTime)/e.duration),width:S(r.duration/e.duration)}})})]},`${i.span.spanId}.${r.span.spanId}`))}):null,h?(0,t.jsx)(V,{getQuickLinks:s,span:i.span}):null,i.events?.length?(0,t.jsx)(E,{name:"Events",children:i.events.map(a=>(0,t.jsxs)(r.Fragment,{children:[(0,t.jsxs)("dl",{className:n.default.spanDetailPanelAttribute,children:[(0,t.jsx)("dt",{className:n.default.spanDetailPanelAttributeKey,children:a.event.name}),(0,t.jsx)("dd",{className:n.default.spanDetailPanelAttributeValue,children:(0,x.formatDuration)(a.timestamp-e.startTime)})]}),Object.entries(a.event.attributes).map(e=>{let[r,n]=e;return(0,t.jsx)($,{name:`${a.event.name}.${r}`,value:n},r)})]},a.key))}):null,u.length?(0,t.jsx)(E,{name:"Attributes",children:u.map(e=>(0,t.jsx)(r.Fragment,{children:e.attributes.map(e=>{let{key:r,value:a}=e;return(0,t.jsx)($,{name:r,value:a},r)})},e.prefix))}):null,d.length?(0,t.jsx)(E,{name:"Resource",children:d.map(e=>(0,t.jsx)(r.Fragment,{children:e.attributes.map(e=>{let{key:r,value:a}=e;return(0,t.jsx)($,{name:r,value:a},r)})},e.prefix))}):null,i.isInstrumentationHint?null:(0,t.jsxs)(E,{name:"Library",children:[(0,t.jsx)($,{name:"name",value:m.library.name}),m.library.version?(0,t.jsx)($,{name:"version",value:m.library.version}):null]})]})};function D(e){let{attached:r=!1}=e,{state:{selected:i,isMobile:s,customPanelComponent:o},dispatch:c}=_();if(!i)return null;let{span:u}=i;return(0,t.jsxs)("div",{className:(0,a.clsx)(n.default.spanDetailPanel,s&&n.default.mobile),children:[r&&!s?(0,t.jsx)(z,{}):null,(0,t.jsx)("div",{className:n.default.spanDetailPanelTop,children:(0,t.jsxs)("div",{className:n.default.spanDetailPanelTopInfo,children:[(0,t.jsxs)("div",{className:n.default.spanDetailPanelTruncatedHeading,children:[i.isInstrumentationHint?null:(0,t.jsx)("span",{className:n.default.spanDetailPanelDuration,children:(0,x.formatDuration)(i.duration)}),(0,t.jsx)("span",{className:n.default.spanDetailPanelName,title:u.name,children:u.name})]}),(0,t.jsxs)("div",{className:n.default.spanDetailPanelCorner,children:[(0,t.jsx)("div",{className:n.default.spanDetailPanelCloseVerticalRule}),(0,t.jsx)("button",{"aria-label":"Close Span Details",className:n.default.spanDetailPanelClose,onClick:()=>c({type:"deselect"}),type:"button",children:(0,t.jsx)(l,{color:"gray-700",size:24})})]})]})}),(0,t.jsx)("div",{className:(0,a.clsx)("flex gap-3",n.default.spanDetailPanelBody),children:o||(0,t.jsx)(q,{})})]})}let P="vc-trace-span-exp:";function E(e){let{name:i,className:l="",children:o}=e,[c,u]=(0,r.useState)(()=>!("localStorage"in globalThis)||"0"!==localStorage.getItem(`${P}${i}`)),d=(0,r.useCallback)(()=>{u(e=>{let t=!e;return localStorage.setItem(`${P}${i}`,String(Number(t))),t})},[i]);return(0,t.jsxs)("div",{className:(0,a.clsx)(n.default.detailGroup,c?n.default.expanded:n.default.collapsed,l),children:[(0,t.jsxs)("button",{className:n.default.detailHeading,onClick:d,type:"button",children:[(0,t.jsx)("span",{children:i}),(0,t.jsx)(s,{})]}),c?o:null]})}let R=new Set(["OPTIONS","HEAD","GET","PUT","POST","DELETE"]),C={"Resolve Deployment":"How long it took Vercel's routing layer to retrieve details for the deployment.","Resolve Cache":"How long it took Vercel's routing layer to check for a cached function invocation.","Resolve Route":"How long it took Vercel's routing layer to resolve routing rules, including redirects and rewrites.","Invoke Middleware":"How long it took this middleware to start and run user code.","Invoke Function":"How long it took this Vercel Function to start and run user code.",waitUntil:"How long it took to run user code inside of waitUntil.","Start VM":"How long it took to start the Virtual Machine which contains the Vercel Function.","Spawn Node.js":"How long it took the Virtual Machine to start the Node.js runtime.","Spawn Python":"How long it took the Virtual Machine to start the Python runtime.","Init User Code":"How long it took to import the user code and run any globally-scoped code."},H=new Set(["Start VM","Spawn Node.js","Spawn Python","Init User Code"]),I=e=>{if(!e||!("span"in e))return null;let t=e.span.attributes,r=t["vercel.region"]||t["vercel.function.region"];return r?String(r):null},A=e=>{if(!e.isVercel)return!1;let{name:t}=e.span,r=t.indexOf(" ");if(-1===r)return!1;let a=t.substring(0,r);return R.has(a)};function F(e){let{node:r}=e,{name:a}=r.span,i=C[a];if(!i&&A(r)&&(i="How long it took for Vercel to process the request and send the response."),!i)return null;let l=(e=>{let{name:t}=e.span,r=I(e),a=I(e.parent);return"true"===e.span.attributes["vercel.middleware.internal"]?"The Vercel Toolbar created this middleware.":H.has(t)||"Invoke Function"===t&&e.children.some(e=>H.has(e.span.name))?"This function encountered a cold start.":r&&a&&r!==a?"This request was routed across regions.":null})(r);return(0,t.jsx)(E,{name:"What is this?",children:(0,t.jsxs)("div",{className:n.default.infraSpanDescription,children:[(0,t.jsx)("span",{children:i}),l?(0,t.jsx)(d,{children:l}):l]})})}let V=(0,r.memo)(function(e){let{getQuickLinks:r,span:a}=e,n=r(a);return n.length?(0,t.jsx)(E,{name:"Links",children:n.map(e=>{let{key:r,value:a}=e;return(0,t.jsx)(W,{link:a,name:r},r)})}):null});function W(e){let{name:i,link:l}=e,s=function(e){let[t,a]=(0,r.useState)({}),n=void 0!==e.__resolvedValue||void 0!==e.__rejectedValue;return(0,r.useEffect)(()=>{n||e.then(t=>{e.__resolvedValue=t}).catch(t=>{e.__rejectedValue=t}).finally(()=>a({}))},[e,n]),e.__resolvedValue}(l);return(0,t.jsxs)(c,{as:s?void 0:"span",className:(0,a.clsx)(n.default.spanDetailPanelAttribute,n.default.spanDetailPanelQuickLink),href:s?.href||"",children:[(0,t.jsx)("span",{className:n.default.spanDetailPanelAttributeKey,children:i}),(0,t.jsx)("span",{className:(0,a.clsx)(n.default.spanDetailPanelAttributeValue,n.default.spanDetailPanelQuickLinkLabel),children:s?(0,t.jsxs)(t.Fragment,{children:[s.label,s.icon||(0,t.jsx)(o,{color:"gray-900"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{height:18,width:32+8*i.length}),(0,t.jsx)(m,{height:18,rounded:!0,width:18})]})})]})}function B(){return(0,t.jsx)(E,{name:"What is this?",children:(0,t.jsxs)("div",{className:n.default.infraSpanDescription,children:[(0,t.jsx)("span",{children:"You can visualize your application's spans alongside Vercel's spans in this viewer."}),(0,t.jsx)(u,{href:"https://vercel.com/docs/tracing/instrumentation#adding-custom-spans",size:"small",target:"_blank",children:"Get Started"})]})})}function $(e){let{name:r,value:a}=e;return(0,t.jsxs)("dl",{className:n.default.spanDetailPanelAttribute,children:[(0,t.jsx)("dt",{className:n.default.spanDetailPanelAttributeKey,children:r}),(0,t.jsx)("dd",{className:n.default.spanDetailPanelAttributeValue,title:String(a),children:String(a)})]})}function z(){let{state:{panelWidth:e},dispatch:a}=_(),i=(0,r.useRef)({start:{x:0,width:e},x:0,width:e,isHeld:!1});i.current.width=e;let l=(0,r.useCallback)(e=>{if("mouse"!==e.pointerType)return;e.preventDefault();let t=i.current;t.start.x=e.clientX,t.x=e.clientX,t.start.width=t.width,t.isHeld=!0},[]),s=(0,r.useCallback)(()=>{a({type:"setPanelWidth",width:h.panelWidth})},[a]);return(0,r.useEffect)(()=>{let e=0,t=()=>{let e=i.current;a({type:"setPanelWidth",width:e.start.width+e.start.x-e.x})},r=r=>{i.current.isHeld&&(r.preventDefault(),i.current.x=r.clientX,cancelAnimationFrame(e),e=requestAnimationFrame(t))},n=()=>{i.current.isHeld=!1};return window.addEventListener("pointermove",r),window.addEventListener("pointerup",n),()=>{window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",n)}},[a]),(0,t.jsx)("div",{"aria-hidden":!0,className:n.default.spanDetailPanelResizer,onDoubleClick:s,onPointerDown:l})}function O(e){let{size:r=16}=e;return(0,t.jsxs)("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,t.jsx)("path",{d:"M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",stroke:"currentColor",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M11 8v6M8 11h6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M20 20l-3.5-3.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function K(e){let{size:r=16}=e;return(0,t.jsxs)("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,t.jsx)("path",{d:"M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",stroke:"currentColor",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M8 11h6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M20 20l-3.5-3.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function X(e){let{size:r=16}=e;return(0,t.jsx)("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:(0,t.jsx)("path",{d:"M6 12h12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function Q(){let{dispatch:e}=_(),a=(0,r.useCallback)(()=>{e({type:"adjustScaleRatio",direction:1})},[e]),i=(0,r.useCallback)(()=>{e({type:"adjustScaleRatio",direction:-1})},[e]),l=(0,r.useCallback)(()=>{e({type:"adjustScaleRatio",direction:0})},[e]);return(0,t.jsxs)("div",{className:n.default.zoomButtonGroup,children:[(0,t.jsx)("button",{"aria-label":"Zoom Out",className:n.default.zoomButton,onClick:i,type:"button",children:(0,t.jsx)(K,{size:18})}),(0,t.jsx)("div",{className:n.default.divider}),(0,t.jsx)("button",{"aria-label":"Reset Zoom",className:n.default.zoomButton,onClick:l,type:"button",children:(0,t.jsx)(X,{size:18})}),(0,t.jsx)("div",{className:n.default.divider}),(0,t.jsx)("button",{"aria-label":"Zoom In",className:n.default.zoomButton,onClick:a,type:"button",children:(0,t.jsx)(O,{size:18})})]})}var G=e.i(9096091);function U(e){let t=(0,r.useRef)({});return{setStyle:(0,r.useCallback)((r,a)=>{if(t.current[r]=a,e.current){if(!a)return void e.current.style.removeProperty(r);e.current.style.setProperty(r,a)}},[e]),styleRef:t,style:{...t.current}}}let Z=[1,2,4,5,8,10];function Y(e){let{scale:r}=e,{state:{root:i}}=_(),l=i.duration,s=Math.floor(Math.log10(l)),o=Math.max(2,Math.pow(10,s)*(Math.floor(Math.log10(.5*l))===s?1:.5)),c=o*r,u=1;for(let e of Z){if(o/e<24)break;u=e}o/=u,c/=u;let d=Math.ceil(l/o),m=Math.ceil(100/c)||1;return(0,t.jsx)("div",{className:n.default.markersContainer,children:(0,t.jsx)("div",{"aria-hidden":!0,className:n.default.markers,style:{width:Math.floor(i.duration*r+15),visibility:-1!==r?"visible":"hidden","--marker-width":`${c}px`},children:Array(d).fill(null).map((e,r)=>{let i=r%m==0;return(0,t.jsx)("span",{className:(0,a.clsx)(n.default.marker,!i&&n.default.notch),children:i?(0,t.jsx)("span",{className:n.default.markerLabel,children:(0,x.formatDuration)(o*r)}):null},String(r))})})})}function J(e){let{events:i,root:l,scale:s}=e,o=(0,r.useMemo)(()=>i.filter(e=>!1!==e.event.showVerticalLine),[i]);return(0,t.jsx)("div",{className:n.default.eventMarkersContainer,children:(0,t.jsx)("div",{"aria-hidden":!0,className:n.default.eventMarkers,style:{width:Math.floor(l.duration*s)},children:o.map(e=>(0,t.jsx)("span",{className:(0,a.clsx)(n.default.eventMarker),style:{left:Math.floor((e.timestamp-l.startTime)*s),...e.event.color&&{borderLeftColor:e.event.color}}},e.key))})})}function ee(e){var a;let i,{memoCacheRef:l,timelineRef:s,root:o,spans:c,events:u,scale:d,dispatch:m,scrollSnapshotRef:h}=e,p=(0,r.useRef)(!1),f=(0,r.useRef)(c);f.current=c;let w=(0,r.useRef)(u);w.current=u;let v=(0,r.useRef)(null),{style:_,setStyle:g}=U(v),b=(0,r.useRef)(null),k=(0,r.useRef)(null),{style:j,setStyle:y}=U(k),T=(0,r.useRef)(void 0),N=(0,r.useRef)(null),{style:S,setStyle:L}=U(N),M=(0,r.useRef)(0);(0,r.useEffect)(()=>{let e=s.current;if(!e)return;let t=M.current,r=0,a=!1,n=!1,i=!1,c=!1,u=0,h=0,v=Date.now()+500,_=()=>{T.current||(T.current=e.getBoundingClientRect())},k=e=>T.current?(e-24-8)/26:0,j=()=>{let e=l.current;for(let t of f.current)t.isHovered&&(t.isHovered=!1,e.set(t.span.spanId,{}));m({type:"forceRender"})},S=0,D=()=>{if(!p.current)return;T.current||_();let s=T.current;if(!s)return;let{scrollLeft:c,scrollTop:M}=e,q=Math.max(0,Math.min(t+c-s.left-8,o.duration*d)),P=`${q-c+8}px`;y("left",P),g("left",P);let E=o.startTime+q/d,R=E-o.startTime;if(R<0||R>o.duration?b.current?.removeAttribute("data-text"):b.current?.setAttribute("data-text",(0,x.formatTimeSelection)(R)),a){let e,a,n=t-r,l=Math.abs(n);if(!i){if(l<4)return;i=!0,L("display","flex"),j()}n>0?(L("left",""),L("right","0")):(L("left","0"),L("right","")),L("width",`${l}px`);let u=Math.max(0,Math.min(r+c-s.left-8,o.duration*d))/d;u<R?(e=u,a=R):(e=R,a=u),N.current?.setAttribute("data-range",`${(0,x.formatTimeSelection)(e)} — ${(0,x.formatTimeSelection)(a)}`),N.current?.setAttribute("data-duration",`${(0,x.formatTimeSelection)(a-e)} selected`)}if(Date.now()<v){S=requestAnimationFrame(D);return}if(c!==u||M!==h){u=c,h=M,S=requestAnimationFrame(D);return}if(t-s.left<128?b.current?.setAttribute("data-align","left"):t-s.left>s.width-128?b.current?.setAttribute("data-align","right"):b.current?.removeAttribute("data-align"),!i&&!n){let e=l.current,t=k(M)-2,r=k(M+s.height)+2;for(let a of f.current){let n=a.row>=t&&a.row<=r&&E>=a.startTime&&E<=a.endTime;a.isHovered!==n&&(a.isHovered=n,e.set(a.span.spanId,{}))}let a=12/d;for(let e of w.current){let t=E>=e.timestamp-a&&E<=e.timestamp+a;if(e.isHovered===t)continue;e.isHovered=t;let r=e.ref?.current;r&&r.setAttribute("data-hovered",String(t))}m({type:"forceRender"})}};S=requestAnimationFrame(D);let P=e=>{"mouse"===e.pointerType&&(p.current=!0)},E=()=>{p.current&&(p.current=!1,j())},R=e=>{let{clientX:r}=e;M.current=t=r,cancelAnimationFrame(S),S=requestAnimationFrame(D)},C=e=>{e.preventDefault()},H=e=>{if(2===e.button)c=!0,e.preventDefault();else{if(0!==e.button)return;c=!1}s.current?.contains(e.target)?(r=t,a=!0):(n=!0,requestAnimationFrame(j))},I=l=>{if(n=!1,!a||(a=!1,!i))return;if(i=!1,L("display",""),L("left",""),L("right",""),L("width",""),l.preventDefault(),l.stopImmediatePropagation(),c){c=!1;return}T.current||_();let s=T.current;if(!s)return;let{scrollLeft:u}=e,h=Math.max(0,Math.min((r+u-s.left-8)/d,o.duration)),p=Math.max(0,Math.min((t+u-s.left-8)/d,o.duration));m({type:"scaleToRange",t1:h+o.startTime,t2:p+o.startTime})},A=e=>{a&&"Escape"===e.key&&(c=!0,I(e))},F=()=>{T.current=void 0,q.current=void 0,cancelAnimationFrame(S),S=requestAnimationFrame(D)},V=()=>{cancelAnimationFrame(S),S=requestAnimationFrame(D)},W=new ResizeObserver(()=>{T.current=void 0});return W.observe(e),window.addEventListener("mousemove",R),e.addEventListener("contextmenu",C),window.addEventListener("mousedown",H),window.addEventListener("mouseup",I),window.addEventListener("blur",I),window.addEventListener("keydown",A,!0),window.addEventListener("scroll",F),e.addEventListener("scroll",V),e.addEventListener("pointerenter",P),e.addEventListener("pointerleave",E),()=>{W.disconnect(),window.removeEventListener("mousemove",R),e.removeEventListener("contextmenu",C),window.removeEventListener("mousedown",H),window.removeEventListener("mouseup",I),window.removeEventListener("blur",I),window.removeEventListener("keydown",A,!0),window.removeEventListener("scroll",F),e.removeEventListener("scroll",V),e.removeEventListener("pointerenter",P),e.removeEventListener("pointerleave",E),cancelAnimationFrame(S),M.current=t,j()}},[m,o,d,y,g,L,l,s,h]);let q=(0,r.useRef)(void 0);return a=e=>{let t=s.current;if(!t)return;T.current??=t.getBoundingClientRect();let r=T.current,a=Math.max(0,Math.min(M.current-r.left-8,r.width-16)),n=0,i=q.current;i?.anchorX===a?n=i.anchorT:q.current=i={anchorT:n=(t.scrollLeft+a)/d,anchorX:a},m({type:"trackpadScale",delta:e/64,anchorT:n,anchorX:a})},(i=(0,r.useRef)(a)).current=a,(0,r.useEffect)(()=>{let e=0,t=0,r=()=>{i.current(e),e=0},a=a=>{if(!a.ctrlKey&&!a.metaKey)return;a.preventDefault();let n=-a.deltaY;switch(a.deltaMode){case WheelEvent.DOM_DELTA_PAGE:n*=window.innerHeight;break;case WheelEvent.DOM_DELTA_LINE:n*=20}e+=n,cancelAnimationFrame(t),t=requestAnimationFrame(r)};return window.addEventListener("wheel",a,{passive:!1}),()=>{window.removeEventListener("wheel",a),cancelAnimationFrame(t)}},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:n.default.cursorMarkerStickyParent,children:(0,t.jsx)("div",{className:n.default.cursorMarkerLabelContainer,ref:v,style:_,children:(0,t.jsx)("div",{className:n.default.cursorMarkerLabel,ref:b})})}),(0,t.jsx)("div",{className:n.default.cursorMarkerStickyParent,children:(0,t.jsx)("div",{className:n.default.cursorMarkerContainer,ref:k,style:j,children:(0,t.jsx)("div",{className:n.default.cursorMarker,children:(0,t.jsx)("div",{className:n.default.cursorSelection,ref:N,style:S})})})})]})}function et(){return[]}let er=(0,r.memo)(function(e){let{timelineRef:a,rows:i,scale:l}=e,{state:{root:s,baseScale:o,timelineWidth:c,width:u,scrollbarWidth:d}}=_(),m=u+16,h=(()=>{let[e,t]=(0,r.useState)(1);return(0,r.useLayoutEffect)(()=>{let r=()=>t("devicePixelRatio"in globalThis&&globalThis.devicePixelRatio||1),a=matchMedia(`(resolution: ${e}dppx)`);return a.addEventListener("change",r),r(),()=>{a.removeEventListener("change",r)}},[e]),e})(),p=(0,r.useRef)(null),f=(0,r.useRef)(null),w=u/(u-d)*Math.min(u/c,o/l),v=Math.min(u,(c-d)*w);(0,r.useEffect)(()=>{let e,t=!1,r=0,n=e=>!!p.current?.contains(e),i=0,l=()=>{if(!t||!e)return;let n=a.current;n&&(n.scrollLeft=(r-.5*v-e.left)/w)},s=e=>{({clientX:r}=e),cancelAnimationFrame(i),i=requestAnimationFrame(l)},o=r=>{n(r.target)&&(t=!0,e=p.current?.getBoundingClientRect(),s(r))},c=()=>{t=!1,e=void 0},u=e=>{n(e.target)&&e.cancelable&&e.preventDefault()},d=e=>{t&&e.cancelable&&e.preventDefault()};return window.addEventListener("pointerdown",o),window.addEventListener("pointermove",s),window.addEventListener("pointerup",c),window.addEventListener("blur",c),window.addEventListener("touchstart",u,{passive:!1}),window.addEventListener("touchmove",d,{passive:!1}),()=>{window.removeEventListener("pointerdown",o),window.removeEventListener("pointermove",s),window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),window.removeEventListener("touchstart",u),window.removeEventListener("touchmove",d),cancelAnimationFrame(i)}},[a,w,v]),(0,r.useEffect)(()=>{let e=f.current,t=e?.getContext("2d");if(!e||!t)return;let r=requestAnimationFrame(()=>{t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.scale(h,h);let r=(m-16)/s.duration;for(let e of(t.fillStyle="#ccc",t.beginPath(),i))for(let a of e){let e=7+4*a.row;if(e>=45)break;let n=8+(a.startTime-s.startTime)*r,i=a.duration*r;t.roundRect(n,e,i,3,3)}t.fill()});return()=>cancelAnimationFrame(r)},[h,s,m,i]);let x=(0,r.useRef)(null),{style:g,setStyle:b}=U(x);return(0,r.useLayoutEffect)(()=>{let e=a.current;if(!e)return;let t=0,r=()=>{b("transform",`translateX(${8+e.scrollLeft*w}px)`)};r();let n=()=>{cancelAnimationFrame(t),t=requestAnimationFrame(r)};return e.addEventListener("scroll",n),()=>{cancelAnimationFrame(t),e.removeEventListener("scroll",n)}},[a,w,b]),(0,t.jsxs)("div",{className:n.default.mapContainer,ref:p,style:{width:v>0?m:"100%",height:56},children:[(0,t.jsx)("canvas",{className:n.default.mapCanvas,height:56*h,ref:f,style:{width:m,height:56},width:m*h}),(0,t.jsx)("div",{className:n.default.mapThumb,ref:x,style:{transform:g.transform,width:v>0?v:"calc(100% - 16px)",top:2,height:52}})]})});function ea(e){let{height:r,width:a,value:i,placeholder:l,onChange:s}=e;return(0,t.jsxs)("label",{className:n.default.searchInputLabel,children:[(0,t.jsx)("div",{className:n.default.searchInputPrefix,children:(0,t.jsx)(en,{})}),(0,t.jsx)("input",{type:"search",value:i,placeholder:l,onChange:s,style:{height:r,width:a}})]})}function en(){return(0,t.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",focusable:"false",children:[(0,t.jsx)("circle",{cx:"7",cy:"7",r:"4.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M11.5 11.5L14 14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}function ei(){return(0,t.jsx)("nav",{className:n.default.searchBar,children:(0,t.jsx)(el,{})})}function el(){let{dispatch:e}=_(),[a,i]=(0,r.useState)("");return(0,r.useEffect)(()=>{let t=setTimeout(()=>e({type:"setFilter",filter:a}),100);return()=>{clearTimeout(t)}},[e,a]),(0,t.jsx)("div",{className:n.default.searchInput,children:(0,t.jsx)(ea,{height:40,onChange:e=>i(e.target.value),placeholder:"Search spans…",value:a,width:"100%"})})}function es(e){let{getQuickLinks:r,children:a}=e;return(0,t.jsx)(v,{getQuickLinks:r,children:a})}let eo={traceId:"skeleton",spans:[{parentSpanId:"",spanId:"root",name:"root span",kind:1,resource:"vercel.runtime",startTime:[5e3,0],endTime:[6e3,0],duration:[1e3,0],library:{name:"vercel-site"},status:{code:1},attributes:{"vercel.ownerId":"team_abc"},traceFlags:1,events:[],links:[]}],resources:[{name:"vercel.runtime",attributes:{}}],rootSpanId:"root"};function ec(i){let{trace:l=eo,className:s="",scrollLock:o=!1,height:c,withPanel:u=!1,highlightedSpans:d}=i,m=l===eo,{state:h,dispatch:p}=_(),{timelineRef:f,scrollSnapshotRef:w}=h,v=h.memoCacheRef.current,x=(d?.length??0)>0;(0,r.useEffect)(()=>{let{root:e,map:t}=(0,G.parseTrace)(l);p({type:"setRoot",root:e,spanMap:t,resources:l.resources||[]})},[p,l]);let{rows:g,spans:b,events:k,scale:T}=(t=>{let{state:a,dispatch:n}=_(),{root:i,filter:l,scale:s,timelineRef:o,timelineWidth:c,spanMap:u,scrollSnapshotRef:d,selected:m,memoCacheRef:h}=a,p=function(e){let[t,a]=(0,r.useState)(e);return(0,r.useEffect)(()=>{if(t===e)return;let r=0,n=0,i=()=>{if(++r<=3){n=requestAnimationFrame(i);return}a(e)};return i(),()=>{cancelAnimationFrame(n)}},[t,e]),t}(a.timelineHeight),f=(0,r.useRef)(0),[w,v]=(0,r.useState)(et),[x,g]=(0,r.useState)(et),[b,k]=(0,r.useState)(et),[y,T]=(0,r.useState)(-1),N=(0,r.useRef)(void 0);return(0,r.useEffect)(()=>N.current?.(l),[l]),(0,r.useEffect)(()=>{if(t?.length){for(let e of w)for(let r of e){let e=t.includes(r.span.spanId);r.isHighlighted!==e&&(r.isHighlighted=e,h.current.set(r.span.spanId,{}))}n({type:"forceRender"})}},[w,t,n,h]),(0,r.useEffect)(()=>{if(!i.startTime)return;let t=new Worker(e.r(4853462)),r=++f.current;t.addEventListener("message",e=>{let t=e.data;switch(t.type){case"setRowsResult":if(t.isEnd)for(let e of t.rows)for(let t of e)t.span=u[t.span.spanId]?.span??t.span;v(t.rows);break;case"updateHighlight":{if(t.requestId!==r)return;let{matches:e}=t;v(t=>{for(let r of t)for(let t of r){let r=e.has(t.span.spanId);t.isHighlighted!==r&&(t.isHighlighted=r,h.current.set(t.span.spanId,{}))}return t}),n({type:"forceRender"})}}});let a={requestId:r,type:"calculateSpanPositions",root:i};return t.postMessage(a),N.current=e=>{let a=e.trim().toLocaleLowerCase();if(!a)return void v(e=>e.map(e=>e.map(e=>(e.isHighlighted=void 0,{...e}))));let n={type:"filterSpans",requestId:r=++f.current,root:i,filter:a};t.postMessage(n)},()=>{t.terminate()}},[i,u,n,h]),(0,r.useEffect)(()=>{if(!w.length)return;let e=o.current,t=d.current,r=!1,a=!1,n=0,l=0,u=Math.max(500,.5*c),m=Array(w.length).fill(null),h=e=>t?e<t.startRow?e-t.startRow:e>t.endRow?e-t.endRow:0:0,f=e=>{if(!t)return 0;let r=0;e.endTime<t.startTime?r=t.startTime-e.endTime:e.startTime>t.endTime&&(r=e.startTime-t.endTime);let a=Math.abs(h(e.row));return r||a?Math.sqrt(Math.pow(r/s,2)+Math.pow(24*a+2,2)):0},v=0,_=()=>{(r||!t)&&(r=!1,(()=>{if(!e)return;let{scrollLeft:r,scrollTop:a}=e,n=(a-24-8)/26,l=n+Math.ceil(p/26);d.current=t={anchorT:r/s,anchorX:0,scrollLeft:r,scrollTop:a,startTime:i.startTime+r/s,endTime:i.startTime+(r+c)/s,startRow:n,endRow:l,scale:s};for(let e=m.length;e--;)m[e]=null})()),(()=>{a=!0;let e=Math.min(1+l+Math.ceil(t?.endRow??1/0),w.length);for(let t=e;t--;){if(m[t])continue;let e=h(t);if(Math.abs(e)>l){if(a=!1,e>0)continue;break}let r=[],i=w[t];if(i){for(let e of i){if(!(0,G.adjustSpanVisibility)(e,s))continue;let t=f(e);n=Math.max(t,n),r.push({d:t,span:e})}m[t]=r}}})();let o=[],x=[];for(let e of m)if(e)for(let{d:t,span:r}of e)!(t>l)&&(o.push(r),r.events&&x.push(...r.events));l<u&&(!a||l<n)&&(l=Math.min(u,l+100),v=requestAnimationFrame(_)),g(o),k(x),T(s)};_();let x=Date.now(),b=e=>{(e.ctrlKey||e.metaKey)&&(x=Date.now())};e?.addEventListener("wheel",b);let j=()=>{Date.now()-x<=50||(r=!0,cancelAnimationFrame(v),v=requestAnimationFrame(_))};return e?.addEventListener("scroll",j),()=>{cancelAnimationFrame(v),e?.removeEventListener("wheel",b),e?.removeEventListener("scroll",j)}},[w,i,s,d,o,c,p]),(0,r.useEffect)(()=>{let e;if(!m)return;for(let t of x)if(t.span.spanId===m.span.spanId){e=t;break}let t=e?.ref?.current;if(e&&t)return e.isSelected=!0,t.className=j(e,s),()=>{e.isSelected=!1,t.className=j(e,s)}},[x,s,m]),{rows:w,spans:x,events:b,scale:y}})(d),N=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{let e=N.current;if(!e)return;let t=()=>{let t=e.getBoundingClientRect();p({type:"setSize",width:t.width-16,height:t.height})};t();let r=new ResizeObserver(t);return r.observe(e),window.addEventListener("resize",t),()=>{r.disconnect(),window.removeEventListener("resize",t)}},[p]);let S=(0,r.useRef)({t:0,x:-1,y:-1,spanId:""}),L=(0,r.useCallback)(e=>{let t=S.current,r=Date.now(),{clientX:a,clientY:i}=e,l=Math.sqrt(Math.pow(a-t.x,2)+Math.pow(i-t.y,2));if(r-t.t<=500&&l<=8)return(e.stopPropagation(),e.preventDefault(),t.spanId)?(p({type:"select",id:t.spanId}),void p({type:"scaleToNode",id:t.spanId})):void p({type:"resetScale"});let s=e.target;if(!s.closest(`.${String(n.default.timeline)}`))return;let o=s.closest("[data-span-id]"),c=o?.dataset.spanId||"";S.current={x:a,y:i,t:r,spanId:c},c&&(p({type:"toggleSelection",id:c}),e.stopPropagation())},[p]);(0,r.useLayoutEffect)(()=>{let e=f.current;if(!e)return;let t=w.current;t&&(e.scrollLeft=t.anchorT*T-t.anchorX)},[w,f,T]),(0,r.useEffect)(()=>{let e=h.selected?.span.spanId;if(!e)return;let t=setTimeout(()=>{let t=h.timelineRef.current,r=t?.querySelector(`[data-span-id="${e}"]`);if(!t||!r)return;let a=t.getBoundingClientRect(),n=r.getBoundingClientRect();n.width<a.width&&(n.left<a.left||n.right>a.right||n.top<a.top||n.bottom>a.bottom)&&r.scrollIntoView({block:"nearest",inline:"center",behavior:"smooth"})},500);return()=>{clearTimeout(t)}},[h.selected,h.timelineRef]),(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&p({type:"escape"})};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[p]),(0,r.useEffect)(()=>{if(!o)return;let e=document.documentElement,t=document.body;e.style.overflow="clip",t.style.overflow="clip";let r=e=>{e?.cancelable?e.preventDefault():window.scrollTo({left:0,top:0,behavior:"instant"})};return r(),window.addEventListener("scroll",r,{passive:!1}),()=>{e.style.overflow="",t.style.overflow="",window.removeEventListener("scroll",r)}},[o]);let M=Math.max(h.timelineHeight-h.scrollbarWidth,26+26*g.length-2+84),q=!!(h.isMobile&&h.selected);return(0,t.jsxs)("div",{className:(0,a.clsx)(n.default.traceViewer,m&&n.default.skeleton,s),onClickCapture:L,ref:N,style:{height:c,"--timeline-padding":"8px","--row-height":"24px","--row-padding":"2px","--search-height":`${40*!x}px`,"--search-gap":`${!x?8:2}px`,"--map-height":"56px","--timeline-width":`${h.timelineWidth}px`,"--timeline-height":`${h.timelineHeight}px`,"--timeline-scroll-width":`${Math.round(h.root.duration*h.scale)}px`,"--panel-width":`${h.panelWidth}px`,"--panel-height":`${h.panelHeight}px`,"--height":`${h.height}px`,"--scrollbar-width":`${h.scrollbarWidth}px`,"--marker-height":"24px","--marker-notch-height":"8px"},children:[x?null:(0,t.jsx)(ei,{}),(0,t.jsx)(er,{rows:g,scale:T,timelineRef:f}),(0,t.jsxs)("div",{className:(0,a.clsx)(n.default.traceViewerContent,q&&n.default.inert),children:[(0,t.jsx)("div",{className:n.default.timeline,ref:f,children:(0,t.jsx)("div",{style:{position:"relative",width:h.timelineWidth,height:h.timelineHeight-16,padding:8,paddingBottom:0},children:(0,t.jsxs)("div",{className:n.default.traceNode,style:{width:h.root.duration*T||void 0,height:M-16},children:[(0,t.jsx)(Y,{scale:T}),(0,t.jsx)(J,{events:k,root:h.root,scale:T}),(0,t.jsx)(ee,{dispatch:p,events:k,memoCacheRef:h.memoCacheRef,root:h.root,scale:T,scrollSnapshotRef:w,spans:b,timelineRef:f}),(0,t.jsx)(y,{cacheKey:v.get(""),cache:v,customSpanClassNameFunc:h.customSpanClassNameFunc,customSpanEventClassNameFunc:h.customSpanEventClassNameFunc,root:h.root,scale:T,scrollSnapshotRef:w,spans:b})]})})}),(0,t.jsx)("div",{className:n.default.zoomButtonTraceViewer,children:(0,t.jsx)(Q,{})})]}),u?(0,t.jsx)("div",{className:(0,a.clsx)(n.default.spanDetailPanelTraceViewer,!h.selected&&n.default.hidden,h.isMobile&&n.default.mobile),children:(0,t.jsx)(D,{attached:!0})}):null]})}function eu(e){let{className:r="",children:i=null}=e,{state:l}=_();return l.selected?(0,t.jsx)("div",{className:(0,a.clsx)(n.default.spanDetailPanelTraceViewer,r),style:{position:"relative","--search-height":"0","--search-gap":"0","--map-height":"0","--panel-width":"100%","--panel-height":"100%","--height":"100%","--scrollbar-width":`${l.scrollbarWidth}px`},children:(0,t.jsx)(D,{})}):i}function ed(e){return(0,t.jsx)(v,{getQuickLinks:e.getQuickLinks,withPanel:!0,children:(0,t.jsx)(ec,{withPanel:!0,...e})})}e.s(["TraceViewer",()=>ed,"TraceViewerPanel",()=>eu,"TraceViewerProvider",()=>es,"TraceViewerTimeline",()=>ec],5851942)}]);

//# debugId=b82495e5-eb3c-9701-0735-81b94af71f7b
//# sourceMappingURL=b43b32c0e7ebda3d.js.map