;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="7f60413f-dc54-5143-a67b-1850474281f1")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2679877,(e,t,n)=>{"use strict";var i,r="object"==typeof Reflect?Reflect:null,s=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(e,t){return new Promise(function(n,i){var r,s,a;function o(n){e.removeListener(t,l),i(n)}function l(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}x(e,t,l,{once:!0}),"error"!==t&&(r=e,s=o,a={once:!0},"function"==typeof r.on&&x(r,"error",s,a))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){if(c(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),void 0===a)a=s[t]=n,++e._eventsCount;else if("function"==typeof a?a=s[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=u(e))>0&&a.length>r&&!a.warned){a.warned=!0;var r,s,a,o=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=a.length,console&&console.warn&&console.warn(o)}return e}function f(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=f.bind(i);return r.listener=n,i.wrapFn=r,r}function m(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):g(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=Array(t),i=0;i<t;++i)n[i]=e[i];return n}function x(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function r(s){i.once&&e.removeEventListener(t,r),n(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var a,o=Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)s(l,this,t);else for(var c=l.length,u=g(l,c),n=0;n<c;++n)s(u[n],this,t);return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,s,a;if(c(t),void 0===(i=this._events)||void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return m(this,e,!0)},o.prototype.rawListeners=function(e){return m(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},9943777,e=>{"use strict";var t=e.i(444382);function n(e){let n=`${e};technicallyasecretbutwejustwanttomakethisharder`;return t.default.createHash("sha1").update(n).digest("hex")}e.s(["getRuleTemplateSignature",()=>n])},9465698,e=>{"use strict";var t=e.i(5169864),n=e.i(2405338),i=e.i(4689995),r=e.i(8042625),s=e.i(277234),a=e.i(4244280),o=e.i(5338940),l=e.i(455575),c=e.i(6060673);function u(e){let{projectId:u}=e,h=(0,l.useToasts)(),{team:g}=(0,o.useTeam)(),{data:x,mutate:v}=(0,c.useProject)(u),y=(0,r.encode)({teamId:g?.id,projectId:u}),{data:j,mutate:w,isLoading:b}=(0,n.default)(g&&u?`${a.API_FIREWALL}/firewall/bypass${y}`:null,s.fetchAPI),P=(0,t.useMemo)(()=>(function(e,t){if(!e&&!t)return null;let n=[];if(e)for(let t of e)n.push(t);if(t){let i=Math.floor(Date.now()/1e3);for(let r of t){let t=r.split("#");if(!["0.0.0.0/0","::/0"].includes(t[0])||t.length<2||Number.parseInt(t[1],10)>i){if(e?.find(e=>e.Ip===t[0]&&"*"===e.Domain))continue;n.push({Ip:t[0],Domain:"*",Note:"",Id:`*#${t[0]}`})}}}return n})(j?.result,x?.security?.firewallBypassIps),[j,x]),{trigger:A,isMutating:L}=(0,i.default)(`${a.API_FIREWALL}/firewall/bypass${y}`,p),{trigger:N,isMutating:C}=(0,i.default)(`${a.API_FIREWALL}/firewall/bypass${y}`,m),{trigger:I,isMutating:M}=(0,i.default)(`${a.API_FIREWALL}/firewall/bypass${y}`,d),{trigger:k,isMutating:R}=(0,i.default)(`${a.API_FIREWALL}/firewall/bypass${y}`,f),T=(0,t.useCallback)(async e=>{let t=e?A:N;try{await t(),h.success(`${e?"Paused":"Resumed"} System Mitigations`)}catch(t){throw h.error(t.message||`Failed to ${e?"Pause":"Resume"} system mitigations. Please try again.`),t}},[A,N,h]);return{bypassRules:P,updateBypass:(0,t.useCallback)(async(e,t)=>{("*"===t.domain||"All hosts"===t.domain)&&(t.projectScope=!0,t.domain=void 0);try{e?(await k(t),h.success(`Removed system bypass for ${t.sourceIp}`)):(await I(t),h.success(`Added system bypass for ${t.sourceIp}`)),await w(),t.projectScope&&await v()}catch(e){throw h.error(e.message||"Failed to update system bypass. Please try again."),e}},[I,k,h,w,v]),updateMitigationsBypassAll:T,isLoading:b||L||C||M||R}}async function d(e,t){let{arg:n}=t,i=JSON.stringify(n);return await (0,s.fetchAPI)(e,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:i})}async function f(e,t){let{arg:n}=t,i=JSON.stringify(n);return await (0,s.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0,body:i})}async function p(e){let t=JSON.stringify({allSources:!0,projectScope:!0});return await (0,s.fetchAPI)(e,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:t})}async function m(e){let t=JSON.stringify({allSources:!0,projectScope:!0});return await (0,s.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0,body:t})}e.s(["useFirewallBypass",()=>u],9465698)},3219719,(e,t,n)=>{var i=e.r(263217),r=e.r(660575),s=e.r(5729582),a=e.r(7791606),o=e.r(2728359);t.exports=function(e,t,n,l){if(!a(e))return e;t=r(t,e);for(var c=-1,u=t.length,d=u-1,f=e;null!=f&&++c<u;){var p=o(t[c]),m=n;if("__proto__"===p||"constructor"===p||"prototype"===p)break;if(c!=d){var h=f[p];void 0===(m=l?l(h,p,f):void 0)&&(m=a(h)?h:s(t[c+1])?[]:{})}i(f,p,m),f=f[p]}return e}},5120311,(e,t,n)=>{var i=e.r(716543);t.exports=function(e){return i(e,5)}},7829532,(e,t,n)=>{var i=e.r(3219719);t.exports=function(e,t,n){return null==e?e:i(e,t,n)}},594750,421794,e=>{"use strict";var t=e.i(5169864),n=e.i(455575),i=e.i(2405338),r=e.i(4689995),s=e.i(5120311),a=e.i(7829532),o=e.i(2793676),l=e.i(5610834),c=e.i(8042625),u=e.i(277234),d=e.i(4244280),f=e.i(5338940);let p={gen:{name:"Generic Attack",description:"Provide broad protection from various undefined or novel attack vectors."},java:{name:"Java Attack",description:"Mitigate risks of exploitation targeting Java-based applications or components."},lfi:{name:"Local File Inclusion Attack",description:"Prevent unauthorized access to local files through web applications."},ma:{name:"Multipart Attack",description:"Block attempts to bypass security controls using multipart/form-data encoding."},php:{name:"PHP Attack",description:"Safeguard against vulnerability exploits in PHP-based applications."},rce:{name:"Remote Execution Attack",description:"Prevent unauthorized execution of remote scripts or commands."},rfi:{name:"Remote File Inclusion Attack",description:"Prohibit unauthorized upload or execution of remote files."},sd:{name:"Scanner Detection",description:"Detect and prevent reconnaissance activities from network scanning tools."},sf:{name:"Session Fixation Attack",description:"Prevent unauthorized takeover of user sessions by enforcing unique session IDs."},sqli:{name:"SQL Injection Attack",description:"Prohibit unauthorized use of SQL commands to manipulate databases."},xss:{name:"XSS Attack",description:"Prevent injection of malicious scripts into trusted webpages."}};function m(e){return p[e]}function h(e){return e.endsWith("update")?"modified":e.endsWith("insert")?"created":e.endsWith("remove")?"deleted":e.endsWith("priority")?"reordered":"firewallEnabled"===e?"changed":""}function g(e,t,n){let i=n?"You":e.username,{id:r,action:s}=e;return"crs.update"===e.action?{id:r||"",principal:i,rule:r?t.owasp.ruleGroups?.[r].name??r:"",actionTaken:h(s)}:"ip.insert"===e.action||"ip.remove"===e.action?{id:r||"",principal:i,rule:(e.action,"IP Blocking Rule"),actionTaken:h(s)}:"rules.insert"===e.action||"rules.update"===e.action?{id:r||"",principal:i,rule:e.value.name,actionTaken:h(s)}:"rules.remove"===e.action?{id:r||"",principal:i,rule:"a Custom Rule",actionTaken:h(s)}:"rules.priority"===e.action?{id:r||"",principal:i,rule:"Rule",actionTaken:h(s)}:"managedRules.update"===e.action?{id:r||"",principal:i,rule:(()=>{if(!r)return"";let e=w(t,r);return e?e.name:r})(),actionTaken:e.value.active?"enabled":"disabled"}:"botId.toggle"===e.action?{id:r||"",principal:i,rule:"BotID Deep Analysis",actionTaken:e.value?"enabled":"disabled"}:{principal:i,id:r||"",rule:"Firewall",actionTaken:h(s)}}function x(e){return"bot_filter"===e||"bot_protection"===e}function v(e){return"managed_bot_filter"===e||"managed_bot_protection"===e}function y(e){let t=e?.managedRules;return t?.bot_filter??t?.bot_protection}function j(e){return e.bot_filter??e.bot_protection}function w(e,t){return"bot_filter"===t?e.bot_filter??e.bot_protection:"bot_protection"===t?e.bot_protection??e.bot_filter:e[t]}function b(e){if(!e)return;let t=e.draft??e.active;if(!t)return t;let n=new Map,i=Object.keys(t.crs).map(e=>{let{name:i,description:r}=p[e],s={id:e,action:t.crs[e].action,active:t.crs[e].active,name:i,description:r};return n.set(s.id,{...s,type:"owas"}),s}).sort((e,t)=>e.name.localeCompare(t.name)),r=t.rules.map(e=>{let t={id:e.id,description:e.description,name:e.name,action:e.action?.mitigate?.action==="rate_limit"?e.action.mitigate.rateLimit?.action||"log":e.action?.mitigate?.action||"log",active:e.active,value:e,isRateLimit:e.action?.mitigate?.action==="rate_limit"};return n.set(t.id,{...t,type:"custom_rule"}),t});t.ips.forEach(e=>{n.set(e.id,{...e,type:"ip_block"})});let s=t.changes.sort((e,t)=>t.createdAt.localeCompare(e.createdAt));return{currentConfig:t,crsRules:i,rules:r,changes:s,ruleMap:n}}async function P(e){let[t]=e;return(await (0,u.fetchAPI)(t,{method:"GET",throwOnHTTPError:!0,returnStatus:!0})).body}function A(e){let{projectId:s,ruleId:a}=e,{team:o}=(0,f.useTeam)(),u=(0,l.useRouter)(),p=(0,c.encode)({teamId:o?.id,projectId:s}),{data:m,mutate:h,isLoading:g}=(0,i.default)(o&&s?[`${d.API_FIREWALL}/firewall/config${p}`,p]:null,async e=>P(e)),x=(0,n.useToasts)(),v=(0,t.useMemo)(()=>b(m?{...m,draft:null}:void 0),[m]),y=(0,t.useMemo)(()=>b(m),[m]),{trigger:j,isMutating:w}=(0,r.default)(`${d.API_FIREWALL}/firewall/config/draft${p}`,L),{trigger:A,isMutating:I}=(0,r.default)([`${d.API_FIREWALL}/firewall/config/`,`/activate${p}`],N),{trigger:M}=(0,r.default)(`${d.API_FIREWALL}/firewall/config${p}`,L),{trigger:k,isMutating:R}=(0,r.default)(`${d.API_FIREWALL}/firewall/config/draft${p}`,C),T=(0,t.useCallback)(async e=>{try{let t=await L(`${d.API_FIREWALL}/firewall/config/draft${p}`,{arg:e});h({...m||{active:null,versions:[t]},draft:t},{revalidate:!1}).then(()=>null,()=>null)}catch(e){throw x.error(e.message||"Failed to update Firewall. Please try again."),e}},[p,x,m,h]),_=(0,t.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2?arguments[2]:void 0;try{await M(e),t&&(await h(),u.refresh(),n?.())}catch(e){throw x.error(e.message||"Failed to update Firewall. Please try again."),e}},[h,x,m,M,u.refresh]),E=(0,t.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2?arguments[2]:void 0;try{let i=await j(e);await h({...m||{active:null,versions:[i]},draft:i},{revalidate:!1}),t&&(n?.(),h().then(()=>null,()=>null))}catch(e){throw x.error(e.message||"Failed to update Firewall. Please try again."),e}},[h,j,x,m]),S=(0,t.useCallback)(async()=>{try{await k(),await h()}catch(e){throw x.error(e.message||"Failed to discard Firewall changes. Please try again."),e}},[h,k,x]),O=(0,t.useCallback)(async(e,t)=>{try{await A(t);let n=e?.toastSuccessMessage??"Your Firewall changes have been applied successfully";x.success(n),u.refresh(),await h().catch(()=>null)}catch(t){throw x.error(e?.toastErrorMessage||t.message||"Failed to publish Firewall changes. Please try again."),t}},[A,h,x,u]),F=(0,t.useCallback)(()=>{h().then(()=>null,()=>null)},[h]),$=(0,t.useMemo)(()=>{if(!a||!y)return;let e=y.rules.find(e=>e.id===a);if(e)return e.value},[a,y]),B=(0,t.useMemo)(()=>!y||!y.rules.some(e=>e.isRateLimit),[y]);return{activeConfig:v,config:y,showRateLimitModal:B,selectedRule:$,forceConfig:_,updateConfig:E,reorderItem:T,discardChanges:S,publishChanges:O,isPublishing:I,isDiscarding:R,isUpdatingConfig:w,isLoadingConfig:g&&!m,refresh:F}}async function L(e,t){let{arg:n}=t;return(await (0,u.fetchAPI)(e,{method:"PATCH",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify(n)})).body}async function N(e,t){let[n,i]=e,{arg:r="draft"}=t;return await (0,u.fetchAPI)(`${n}${r}${i}`,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify({})})}async function C(e){return await (0,u.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0})}function I(e,t){if(Object.hasOwn(e,"value")){let n=(0,s.default)(e);return n=(0,o.default)(n,"value.id"),"action"===t.type?n.isRateLimit?(0,a.default)(n,"value.action.mitigate.rateLimit.action",t.value):(0,a.default)(n,"value.action.mitigate.action",t.value):(0,a.default)(n,"value.active",t.value),{id:e.id,action:"rules.update",value:n.value}}let n="action"===t.type?{action:t.value,active:e.active}:{action:"disable"===e.action?"log":e.action,active:t.value};return{id:e.id,action:"crs.update",value:n}}e.s(["RULES_TO_NAMES",0,p,"botProtectionFromConfig",()=>y,"botProtectionFromRulesets",()=>j,"createActionConfig",()=>g,"crsRuleToConfig",()=>m,"getRulesetFromRulesets",()=>w,"isBotProtectionData",()=>v,"isBotProtectionManagedRuleset",()=>x],421794),e.s(["formatPatchRule",()=>I,"useFirewallConfig",()=>A],594750)},3774835,e=>{"use strict";var t=e.i(277234),n=e.i(2405338);function i(e){let{projectIdOrName:i,teamIdOrSlug:r}=e;return(0,n.default)(["/v1/security/firewall/managed-rules",new URLSearchParams({projectId:i,teamId:r}).toString()],e=>{let[n,i]=e;return(0,t.default)(`${n}?${i}`)})}e.s(["useManagedRulesets",()=>i])},6319736,e=>{"use strict";var t=e.i(1146226),n=e.i(5169864);let i=!1;function r(e){let{fallback:r,data:s,children:a}=e;return!function(){let e=(0,n.useRef)(i),[,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{e.current||(i=!0,e.current=!0,t())},[]),i}()||s.includes(void 0)?(0,t.jsx)(t.Fragment,{children:r}):(0,t.jsx)(t.Fragment,{children:a})}e.s(["EnsureSWRData",()=>r],6319736)},681099,e=>{"use strict";var t=e.i(2405338),n=e.i(8042625),i=e.i(277234),r=e.i(5338940);function s(e){let{isReady:s,team:a}=(0,r.useTeam)();return(0,t.default)(()=>e&&s?`/api/v1/microfrontends/groups/${e}/projects${(0,n.encode)({teamId:a?.id})}`:null,e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{fallbackData:{projects:[]}})}e.s(["useMicrofrontendsGroupProjects",()=>s])},9148191,e=>{"use strict";var t=e.i(5169864),n=e.i(5610834),i=e.i(5338940),r=e.i(6161994),s=e.i(681099),a=e.i(6060673);function o(){let e=(0,n.useParams)(),{data:o}=(0,a.useProject)(e?.project),l=o?.microfrontends?.groupIds[0],{isReady:c,team:u}=(0,i.useTeam)(),{data:d,isLoading:f}=(0,r.useMicrofrontendsGroups)(),{data:p,isLoading:m}=(0,s.useMicrofrontendsGroupProjects)(l),h=p?.projects.find(e=>e.microfrontends?.isDefaultApp),g=o?.microfrontends!==void 0&&!o.microfrontends.isDefaultApp;return(0,t.useMemo)(()=>({defaultProjectName:h?.name,defaultProjectBaseUrl:h?`/${u?.slug}/${h.name}`:null,groupName:d?.groups.find(e=>e.group.id===l)?.group.name??h?.name,isChildMicrofrontend:g,isLoading:!c||!u||m||f,isMicrofrontend:(o?.microfrontends?.groupIds?.length??0)>0}),[h,l,g,f,m,c,o?.microfrontends?.groupIds?.length,u,d])}e.s(["useMicrofrontendsProjectInfo",()=>o])},9367781,e=>{"use strict";var t=e.i(1146226),n=e.i(9148191),i=e.i(7132425);function r(e){let{childHelp:r,parentHelp:s}=e,{isChildMicrofrontend:a,isMicrofrontend:o}=(0,n.useMicrofrontendsProjectInfo)();if(!o)return null;let l=a?r:s;return l?(0,t.jsx)(i.MicrofrontendsBadge,{pageContext:l}):null}e.s(["MicrofrontendsHelpBadge",()=>r])},523386,e=>{"use strict";var t=e.i(1146226),n=e.i(421794);function i(e){let{change:i,isCurrentUser:r,managedRulesets:s}=e,{principal:a,rule:o,actionTaken:l}=(0,n.createActionConfig)(i,s,r);return"ip.insert"===i.action||"ip.remove"===i.action?"ip.insert"===i.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),"for host"," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[i.value.hostname," "]}),"on IP"," ",(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium",children:i.value.ip})]}):(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]})]}):"firewallEnabled"===i.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," to "]}),i.value?"enabled":"disabled"]}):"crs.update"===i.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),"configuration"]}):"rules.insert"===i.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),l,i.value.active?" and enabled ":" ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]})]}):"rules.remove"===i.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]})]}):"rules.update"===i.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),"configuration"]}):"managedRules.update"===i.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),i.value.active?(0,t.jsxs)(t.Fragment,{children:["in"," ",(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium",children:i.value.action})," ","mode"]}):null]}):"botId.toggle"===i.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[l," "]}),(0,t.jsx)("span",{className:"text-copy-14",children:o})]}):(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[a," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),"configuration"]})}e.s(["ChangeLineItem",()=>i])},3420813,e=>{"use strict";var t=e.i(1146226),n=e.i(5169864),i=e.i(2504781),r=e.i(455575),s=e.i(1717203),a=e.i(7557283),o=e.i(594750),l=e.i(3774835),c=e.i(6891161),u=e.i(8522580),d=e.i(57106),f=e.i(7917902),p=e.i(7218483),m=e.i(9148191),h=e.i(523386),g=e.i(8651268);function x(e){let{changes:n=[],disabled:i,isDiscarding:r,isPublishing:s,managedRulesets:a,onClose:o,onDiscard:l,onPublish:p,open:g}=e,{user:x}=(0,f.useAccount)(),y=r||s||i,{defaultProjectBaseUrl:j,defaultProjectName:w,groupName:b,isChildMicrofrontend:P,isMicrofrontend:A}=(0,m.useMicrofrontendsProjectInfo)();return(0,t.jsxs)(c.Modal.Modal,{active:g,drawerClassname:"z-[5002]",onClickOutside:o,children:[(0,t.jsxs)(c.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(c.Modal.Header,{children:(0,t.jsx)(c.Modal.Title,{children:1===n.length?"Review Change":`Review ${n.length} Changes`})}),(0,t.jsx)("div",{className:"flex w-full flex-col rounded-md border divide-y",children:n.map(e=>(0,t.jsx)(v,{change:e,viewerId:x?.uid,children:(0,t.jsx)(h.ChangeLineItem,{change:e,isCurrentUser:e.userId===x?.uid,managedRulesets:a})},`${e.createdAt}-${e.id}`))}),P?(0,t.jsxs)(u.Note,{className:"mt-4",children:["These changes will only be applied to paths routed to this microfrontend. Firewall rules for the entire domain should be added to"," ",(0,t.jsx)(d.Link,{href:`${j}/firewall/configure`,icon:!1,children:w}),"."]}):null,A&&!P?(0,t.jsxs)(u.Note,{className:"mt-4",children:["These rules will apply to all microfrontends in the"," ",(0,t.jsx)(d.Link,{href:`${j}/settings/microfrontends`,children:b})," ","group."]}):null]}),(0,t.jsxs)(c.Modal.Actions,{children:[(0,t.jsx)(c.Modal.Action,{onClick:o,type:"secondary",children:"Cancel"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Modal.Action,{disabled:y,loading:r,onClick:()=>l().then(o,()=>null),type:"secondary",children:"Discard All Changes"}),(0,t.jsx)(c.Modal.Action,{disabled:y,loading:s,onClick:()=>p().then(o,()=>null),children:"Publish"})]})]})]})}function v(e){let{change:n,children:i,viewerId:r}=e;return(0,t.jsxs)("div",{className:"flex h-[72px] items-center justify-between gap-x-4 p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,t.jsx)(g.PrincipalAvatar,{principalId:n.userId,principal:{type:"user",uid:n.userId,username:n.username},viewerId:r}),i]}),(0,t.jsx)("p",{className:"text-copy-14 whitespace-nowrap text-gray-900",children:(0,p.useAgo)(new Date(n.createdAt).getTime())})]})}let y=(0,n.createContext)({open:!1,setOpen:()=>{}});y.displayName="ReviewChangeContext";let j="review-firewall-changes-key";function w(e){let{children:c,projectIdOrName:u,teamIdOrSlug:d}=e,f=(0,r.useToasts)(),{can:p}=(0,s.default)(),[m,h]=(0,n.useState)(!1),g=(0,n.useRef)(null),v=(0,n.useMemo)(()=>({open:m,setOpen:h}),[m,h]),{config:w,isDiscarding:b,isPublishing:P,publishChanges:A,discardChanges:L}=(0,o.useFirewallConfig)({projectId:u}),{data:N}=(0,l.useManagedRulesets)({projectIdOrName:u,teamIdOrSlug:d}),C=p(a.Action.All,a.Resource.SeawallConfig),I=(0,n.useCallback)(()=>{f.removeToastByKey(j),g.current=null},[f]);return(0,n.useEffect)(()=>{m&&I()},[m,I]),(0,n.useEffect)(()=>{if(!m)return w?.changes&&w.changes.length>0&&null===g.current?(g.current=j,f.message({key:j,text:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Review changes to publish the updated Firewall configuration to production"}),(0,t.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,t.jsx)(i.Button,{onClick:()=>{setTimeout(()=>h(!0),30)},size:"small",children:"Review Changes"})})]}),hideX:!0,preserve:!0})):null===g.current||w?.changes&&0!==w.changes.length||(f.removeToastByKey(g.current),g.current=null),()=>{g.current&&(f.removeToastByKey(g.current),g.current=null)}},[w,f,m]),(0,t.jsxs)(y.Provider,{value:v,children:[c,(0,t.jsx)(x,{changes:w?.changes||[],disabled:!C,isDiscarding:b,isPublishing:P,managedRulesets:N??{},onClose:()=>h(!1),onDiscard:L,onPublish:A,open:m&&w?.changes&&w.changes.length>0||!1})]})}function b(){return(0,n.useContext)(y)}e.s(["ReviewChangeProvider",()=>w,"useReviewChangeContext",()=>b],3420813)},2801134,e=>{"use strict";var t=e.i(1146226),n=e.i(7557283),i=e.i(1717203),r=e.i(3306538),s=e.i(2504781),a=e.i(972022),o=e.i(6319736),l=e.i(3420813);function c(e){let{currentConfig:c}=e,{setOpen:u}=(0,l.useReviewChangeContext)(),d=(0,i.useCanAct)(n.Resource.SeawallConfig,[n.Action.Read,n.Action.List]);return(0,t.jsx)(o.EnsureSWRData,{data:[c],fallback:null,children:c?.changes&&c.changes.length>0&&d?(0,t.jsx)(s.Button,{onClick:()=>u(!0),prefix:(0,t.jsx)(a.CloudUpload,{size:16}),suffix:(0,t.jsx)(r.Badge,{className:"min-w-[28px]",size:"sm",variant:"blue",children:c.changes.length}),variant:"secondary",children:"Review Changes"}):null})}e.s(["ReviewChangesButton",()=>c])},6482765,e=>{"use strict";var t=e.i(1146226),n=e.i(3869281),i=e.i(6891161),r=e.i(3500331),s=e.i(57106),a=e.i(1438473),o=e.i(5169864);function l(e){let{open:l,isEnabled:c,isLoading:u,onClose:d,onSubmit:f,confirmText:p}=e,[m,h]=(0,o.useState)(!1),[g,x]=(0,o.useState)(!1),v=u||!c&&(!g||!m);!l&&(m||g)&&(h(!1),x(!1));let y=c?"Resume":"Pause",j=c?(0,t.jsx)("p",{children:"Are you sure you want to resume all system mitigations?"}):(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["You are pausing ",(0,t.jsx)("strong",{children:"all DDoS protections"}),". Here's what to expect:"]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial pl-3 pt-3",children:[(0,t.jsxs)("div",{className:"flex flex-row items-start justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-600",children:"•"}),(0,t.jsxs)("p",{className:"text-copy-14",children:["All traffic will be accepted by your project over the"," ",(0,t.jsx)("strong",{children:"next 24 hours"})]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-start justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-600",children:"•"}),(0,t.jsx)("p",{className:"text-copy-14",children:"You will incur usage fees for all malicious traffic, including failed requests"})]}),(0,t.jsxs)("div",{className:"flex flex-row items-start justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-600",children:"•"}),(0,t.jsx)("p",{className:"text-copy-14",children:"Malicious traffic and associated fees will continue until DDoS protection is manually resumed or after 24 hours elapses"})]})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial pt-2",children:(0,t.jsxs)("p",{className:"text-copy-14",children:["System mitigations should be paused as a temporary measure. Permanent system bypasses may be applied through the firewall configuration page."," ",(0,t.jsxs)(s.Link,{href:"./firewall/configure",variant:"blend",className:"inline-flex items-center gap-1",children:["Configure ",(0,t.jsx)(a.ArrowRight,{size:12})]})]})})]});return(0,t.jsxs)(i.Modal.Modal,{active:l,onClickOutside:d,children:[(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(i.Modal.Title,{children:`${y} System Mitigations`}),(0,t.jsx)(i.Modal.P,{children:j}),c?null:(0,t.jsx)(i.Modal.Inset,{last:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["To confirm, enter the project name ",(0,t.jsxs)("b",{children:[p," "]})," ","below:"]}),(0,t.jsx)(r.Input,{"aria-label":"Project name",disabled:u,name:"projectName",onChange:e=>x(()=>e.target.value===p)}),(0,t.jsx)(n.Checkbox,{onChange:e=>h(e.target.checked),children:"I understand that pausing system mitigations may result in additional fees due to unmitigated attack traffic."})]})})]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:d,type:"secondary",children:"Cancel"}),(0,t.jsx)(i.Modal.Action,{disabled:v,loading:u,onClick:f,children:y})]})]})}e.s(["MitigationsBypassModal",()=>l])},8362250,5793260,e=>{"use strict";var t=e.i(1146226),n=e.i(57106),i=e.i(6891161),r=e.i(2713868),s=e.i(5169864);function a(e){let{open:a,isEnabled:o,onClose:l,onSubmit:c}=e,u=o?"Disable":"Enable",d=(0,s.useRef)(null);return(0,t.jsxs)(i.Modal.Modal,{active:a,onClickOutside:l,children:[(0,t.jsxs)(i.Modal.Body,{children:[(0,t.jsx)(i.Modal.Header,{children:(0,t.jsx)(i.Modal.Title,{children:`${u} Attack Mode`})}),o?(0,t.jsx)(i.Modal.P,{children:"Are you sure you want to disable Attack Mode?"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Modal.P,{children:["When you enable Attack Mode, all traffic, excluding verified bots, will be challenged. This means:",(0,t.jsxs)("ul",{className:"my-2 flex flex-col gap-2 pl-4",children:[(0,t.jsx)("li",{className:"text-copy-14",children:"• Verified bots will still have access"}),(0,t.jsxs)("li",{className:"text-copy-14",children:["• All other traffic will be served a"," ",(0,t.jsx)(n.Link,{external:!0,href:"/docs/vercel-firewall/firewall-concepts#challenge",isDifferentZone:!0,variant:"highlight",children:"challenge"})," ","to verify it is originating from real browsers"]}),(0,t.jsx)("li",{className:"text-copy-14",children:"• Bots that fail challenges will be blocked"}),(0,t.jsx)("li",{className:"text-copy-14",children:"• Human visitors in browsers will continue normally after solving the challenge"})]}),"We recommend enabling this mode only when experiencing a very large and unexpected spike in traffic to stop unwanted automated traffic from accessing your site."]}),(0,t.jsx)(n.Link,{external:!0,href:"/docs/attack-challenge-mode",isDifferentZone:!0,variant:"highlight",children:"Learn More"})]})]}),(0,t.jsx)("div",{ref:d,className:"contents",children:(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:l,type:"secondary",children:"Cancel"}),o?(0,t.jsx)(i.Modal.Action,{onClick:()=>c(),children:u}):(0,t.jsx)("div",{children:(0,t.jsx)(r.SplitButton,{buttonProps:{onClick:()=>c(36e5)},menuAlignment:"bottom-end",menuButtonLabel:"Select Duration",menuItems:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.SplitButtonMenuItem,{menuItemProps:{onClick:()=>c(216e5)},title:"Enable for 6 Hours"}),(0,t.jsx)(r.SplitButtonMenuItem,{menuItemProps:{onClick:()=>c(864e5)},title:"Enable for 24 Hours"})]}),menuProps:{width:192,containerRef:d},children:"Enable for 1 Hour"})})]})})]})}e.s(["ConfirmationAttackMode",()=>a],8362250);var o=e.i(4689995),l=e.i(8042625),c=e.i(277234),u=e.i(4244280),d=e.i(5338940);async function f(e,t){let{arg:n}=t;return await (0,c.fetchAPI)(e,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify(n)})}function p(){let{team:e}=(0,d.useTeam)(),t=(0,l.encode)({teamId:e?.id});return(0,o.default)(`${u.API_SECURITY}/attack-mode${t}`,f)}e.s(["useUpdateAttackMode",()=>p],5793260)}]);

//# debugId=7f60413f-dc54-5143-a67b-1850474281f1
//# sourceMappingURL=f690f54c70cf6f3b.js.map