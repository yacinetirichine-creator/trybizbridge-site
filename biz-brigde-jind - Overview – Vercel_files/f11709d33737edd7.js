;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="72e95058-9068-1253-9111-f06634d8dca8")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4594102,e=>{"use strict";var t=e.i(1146226),n=e.i(2504781),r=e.i(5255926),i=e.i(5468328),o=e.i(2064047),s=e.i(3306538),a=e.i(8674454),l=e.i(4991687),d=e.i(8459493),c=e.i(7448864),h=e.i(6694387),u=e.i(1232681),m=e.i(6161994),f=e.i(9424270),g=e.i(6362863),x=e.i(8876434),p=e.i(7399351),j=e.i(1933683),v=e.i(2425341),b=e.i(57106),y=e.i(1717203),w=e.i(7557283),N=e.i(2720056),k=e.i(5169864),S=e.i(6551679),P=e.i(6060673),E=e.i(1138941),M=e.i(7206786),T=e.i(7643270),C=e.i(9668517),A=e.i(4030453),L=e.i(1906681),R=e.i(455575),F=e.i(8042625),I=e.i(277234),$=e.i(7917902),O=e.i(185801);e.i(9623499);var D=e.i(5576066),G=e.i(7722264),B=e.i(4244280);function U(){let[e,n]=(0,k.useState)(null),i=(0,R.useToasts)(),o=(0,E.useProjectIdOrName)(),{team:s,isLoading:a}=(0,$.useAccount)(),l=s?.id,{data:d,isLoading:c,mutate:h}=(0,P.useProject)(o),{can:m,isLoading:f}=(0,y.default)(),g=f?void 0:m(w.Action.Update,w.Resource.TeamMicrofrontends),[x,p]=(0,k.useState)(),j=x??!d?.microfrontends?.doNotRouteWithMicrofrontendsRouting,[v,b]=(0,k.useState)(!1),N=f||c||a,S=!N&&g&&void 0!==j&&!d?.microfrontends?.doNotRouteWithMicrofrontendsRouting!==j,M=(0,k.useMemo)(()=>N?(0,t.jsx)(r.Skeleton,{width:256}):e?(0,t.jsx)(A.Error,{error:e}):g?(0,t.jsxs)(u.FieldsetFooter.Status,{children:["Learn more about ",(0,t.jsx)(D.Link,{external:!0,href:"/docs/microfrontends/path-routing#microfrontends-domain-routing",type:"highlight",children:"Microfrontends Aliases"}),"."]}):(0,t.jsxs)(u.FieldsetFooter.Status,{children:["You need additional permissions to manage ",(0,t.jsx)(D.Link,{external:!0,href:"/docs/microfrontends/path-routing#microfrontends-domain-routing",type:"highlight",children:"Microfrontends Aliases"})," settings."]}),[N,e,g]);async function T(){try{if(!d?.id)return void n(Error("No project found."));if(!l)return void n(Error("No team ID found."));b(!0),n(null),await (0,I.fetchAPI)(`${(0,B.API_PROJECTS_MICROFRONTENDS)(d.id)}${(0,F.encode)({teamId:l})}`,{method:"PATCH",body:{doNotRouteWithMicrofrontendsRouting:!j},throwOnHTTPError:!0}),await h(),i.success(`Domains on this project will ${j?"now":"no longer"} be routed with microfrontends routing.`)}catch(e){(0,G.isError)(e)&&n(e)}b(!1)}return d?.microfrontends?.isDefaultApp?null:(0,t.jsx)(O.ProjectSettingsFieldset,{description:(0,t.jsxs)(t.Fragment,{children:["Configure whether domain aliases for this project should route requests according to the"," ",(0,t.jsx)("span",{className:"font-mono ",children:"microfrontends.json"})," configuration. If this setting is disabled, domains in this project will route all paths to this project only. Requires a redeploy to take effect."]}),disabled:!g,error:e,note:M,onSave:T,saveDisabled:!S,saveLoading:v,title:"Microfrontends Routing",children:(0,t.jsx)("div",{className:"flex flex-row gap-2",children:N?(0,t.jsx)(r.Skeleton,{height:40,width:256}):(0,t.jsx)(L.Toggle,{checked:j??!1,onChange:e=>p(e),disabled:!g||v,label:"Microfrontends Aliases",size:"large",children:(0,t.jsx)("p",{className:"text-copy-14",children:j?"Enabled":"Disabled"})})})})}var q=e.i(3500331),H=e.i(9480212);function _(){let[e,n]=(0,k.useState)(null),i=(0,R.useToasts)(),o=(0,E.useProjectIdOrName)(),{team:s,isLoading:a}=(0,$.useAccount)(),l=s?.id,{data:d,mutate:c,isLoading:h}=(0,P.useProject)(o),m=d?.id,{can:f,isLoading:g}=(0,y.default)(),x=g?void 0:f(w.Action.Update,w.Resource.TeamMicrofrontends),[p,j]=(0,k.useState)(!1),[v,N,S]=(0,H.default)("/"),[M,T]=(0,k.useState)(!1),C=g||h||a;(0,k.useEffect)(()=>{N(d?.microfrontends?.defaultRoute??""),j(d?.microfrontends?.enabled??!1)},[d,N]);let L=!C&&x&&v!==d?.microfrontends?.defaultRoute&&(d?.microfrontends?.defaultRoute!==void 0||""!==v),D=(0,k.useMemo)(()=>C?(0,t.jsx)(r.Skeleton,{width:256}):e?(0,t.jsx)(A.Error,{error:e}):x?p?(0,t.jsxs)(u.FieldsetFooter.Status,{children:["Learn more about the ",(0,t.jsx)(b.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#set-a-default-route",tab:!0,variant:"highlight",children:"Default Route"}),"."]}):(0,t.jsxs)(u.FieldsetFooter.Status,{children:["The ",(0,t.jsx)(b.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#set-a-default-route",tab:!0,variant:"highlight",children:"Default Route"})," may only be modified when microfrontends are enabled for the project."]}):(0,t.jsxs)(u.FieldsetFooter.Status,{children:["You need additional permissions to manage your project's ",(0,t.jsx)(b.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#set-a-default-route",tab:!0,variant:"highlight",children:"Default Route"}),"."]}),[C,p,e,x]);async function U(){T(!0);try{if(!m)return;n(null),await (0,I.fetchAPI)(`${(0,B.API_PROJECTS_MICROFRONTENDS)(m)}${(0,F.encode)({teamId:l})}`,{method:"PATCH",body:{defaultRoute:v},throwOnHTTPError:!0}),await c(),S(),i.success("Saved default route for this project.")}catch(e){(0,G.isError)(e)&&n(e)}T(!1)}return(0,t.jsx)(O.ProjectSettingsFieldset,{description:"Modify the path that Vercel uses to show screenshots and for the default link to the project.",disabled:!1===x,error:e,note:D,onSave:U,saveDisabled:!L,saveLoading:M,title:"Default Route",children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:C?(0,t.jsx)(r.Skeleton,{height:40,width:128}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(q.Input,{"aria-label":"Default Route",disabled:!p||M,maxLength:40,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&U()},placeholder:"/default-route",value:v,width:"35%"})})})})}var z=e.i(8522580),V=e.i(6292193);function Y(){let[e,n]=(0,k.useState)(null),i=(0,R.useToasts)(),o=(0,E.useProjectIdOrName)(),{team:s,isLoading:a}=(0,$.useAccount)(),l=s?.id,{data:d,mutate:c,isLoading:h}=(0,P.useProject)(o),m=d?.id,{can:f,isLoading:g}=(0,y.default)(),x=g?void 0:f(w.Action.Update,w.Resource.TeamMicrofrontends),[p,j]=(0,k.useState)(!1),[v,b]=(0,k.useState)(!1),[N,S]=(0,k.useState)(!1),M=g||h||a;(0,k.useEffect)(()=>{b(d?.microfrontends?.routeObservabilityToThisProject??!1),j(d?.microfrontends?.enabled??!1)},[d,b]);let T=!M&&x&&!!d?.microfrontends?.routeObservabilityToThisProject!==v,C=(0,k.useMemo)(()=>M?(0,t.jsx)(r.Skeleton,{width:256}):e?(0,t.jsx)(A.Error,{error:e}):x?p?(0,t.jsxs)(u.FieldsetFooter.Status,{children:["Learn more about ",(0,t.jsx)(D.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#observability-data-routing",type:"highlight",children:"Observability Routing"}),"."]}):(0,t.jsxs)(u.FieldsetFooter.Status,{children:[(0,t.jsx)(D.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#observability-data-routing",type:"highlight",children:"Observability Routing"})," may only be modified when microfrontends are enabled for the project."]}):(0,t.jsxs)(u.FieldsetFooter.Status,{children:["You need additional permissions to manage your project's ",(0,t.jsx)(D.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#observability-data-routing",type:"highlight",children:"Observability Routing"}),"."]}),[M,p,e,x]);async function U(){S(!0);try{if(!m)return;n(null),await (0,I.fetchAPI)(`${(0,B.API_PROJECTS_MICROFRONTENDS)(m)}${(0,F.encode)({teamId:l})}`,{method:"PATCH",body:{routeObservabilityToThisProject:v},throwOnHTTPError:!0}),await c(),i.success("Saved observability routing for this project.")}catch(e){(0,G.isError)(e)&&n(e)}S(!1)}return d?.microfrontends?.isDefaultApp?null:(0,t.jsx)(O.ProjectSettingsFieldset,{description:(0,t.jsx)(t.Fragment,{children:"Send Speed Insights and Analytics data to this project. If disabled, this data will all be recorded in the default application for the microfrontends group."}),disabled:!1===x,error:e,note:C,onSave:U,saveDisabled:!T,saveLoading:N,title:"Observability Routing",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[M?(0,t.jsx)(r.Skeleton,{height:40,width:128}):(0,t.jsx)("div",{className:"flex flex-row items-start justify-start gap-2 flex-initial",children:(0,t.jsx)(L.Toggle,{checked:v,disabled:!p||N,label:"Route observability data to this project",onChange:e=>b(e),size:"large",children:(0,t.jsx)("p",{className:"text-copy-14",children:v?"Enabled":"Disabled"})})}),(0,t.jsx)("div",{className:"flex flex-col items-center justify-start gap-2 flex-initial",children:(0,t.jsxs)(z.Note,{children:["For Speed Insights, this requires"," ",(0,t.jsx)(V.InlineCode,{children:"@vercel/speed-insights"})," at version"," ",(0,t.jsx)(V.InlineCode,{children:"1.2.0"})," or newer. For Analytics, this requires ",(0,t.jsx)(V.InlineCode,{children:"@vercel/analytics"})," at version"," ",(0,t.jsx)(V.InlineCode,{children:"1.5.0"})," or newer."]})})]})})}var W=e.i(6318858),J=e.i(2560270),K=e.i(7957424),Q=e.i(681099),X=e.i(6891161),Z=e.i(9481787),ee=e.i(2689512);function et(e){let{isOpen:r,onClose:i,onError:s,onSuccess:a,projects:l,teamId:d,teamSlug:c}=e,[h,u]=(0,k.useState)(!1),m=(0,k.useCallback)(async()=>{if(d&&0!==l.length&&!h){u(!0);try{(await Promise.all(l.map(e=>en(d,e)))).every(e=>e)?a?.():s?.()}finally{u(!1)}}},[s,a,l,d,h]),f=l.filter(e=>e.link?.productionBranch),g=l.filter(e=>!e.link?.productionBranch);return(0,t.jsxs)(X.Modal,{active:r,onClickOutside:i,children:[(0,t.jsxs)(X.Modal.Body,{children:[(0,t.jsx)(X.Modal.Header,{children:(0,t.jsx)(X.Modal.Title,{children:"Generate Fallback Preview Deployments"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-copy-14",children:"In order to ensure that a fallback deployment exists for the Preview environment, you can automatically generate a deployment for each project using their production branch. This will trigger a new deployment for each project in the microfrontends group."}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(o.Entity.List,{children:f.map(e=>{let n=(0,Z.getDashboardHref)(`/${e.name}`,c);return(0,t.jsx)(o.Entity,{className:"py-4",left:(0,t.jsx)(ee.ProjectAvatar,{project:e,size:24}),right:(0,t.jsx)(b.Link,{href:`/${c}/${e.name}/deployments`,tab:!0,children:(0,t.jsx)("p",{className:"text-label-12 text-blue-900",children:"View Deployments"})}),children:(0,t.jsx)(o.Entity.Content,{title:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsx)(b.Link,{href:n,tab:!0,type:"primary",children:(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:e.name})})})})})})})}),g.length>0&&(0,t.jsx)(z.Note,{fill:!0,label:!1,type:"warning",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-copy-14 text-amber-900",children:"No deployments will be generated for the following projects which are not connected to Git:"}),(0,t.jsx)("ul",{className:"list-disc ml-4 mt-1",children:g.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(b.Link,{href:`/${c}/${e.name}/settings/git`,tab:!0,children:e.name})},e.id))})]})})]})]}),(0,t.jsxs)(X.Modal.Actions,{children:[(0,t.jsx)(n.Button,{onClick:i,type:"secondary",disabled:h,children:"Skip"}),(0,t.jsx)(n.Button,{onClick:m,disabled:h,loading:h,children:"Generate Deployments"})]})]})}async function en(e,t){if(!t.link?.productionBranch)return!0;try{let n=`${B.API_GIT_TRIGGER}/${t.id}/branch/${encodeURIComponent(t.link.productionBranch)}?${new URLSearchParams({teamId:e,triggerOnlyForTarget:"preview"}).toString()}`;return await (0,I.fetchAPI)(n,{method:"POST",body:{},throwOnHTTPError:!0}),!0}catch(e){return console.error(e),!1}}function er(){let[e,n]=(0,k.useState)(null),i=(0,R.useToasts)(),o=(0,E.useProjectIdOrName)(),{team:s,isLoading:a}=(0,$.useAccount)(),l=s?.id,d=(0,C.useTeamSlug)(),{data:c,isLoading:h}=(0,P.useProject)(o),f=c?.id,{data:g,isLoading:x,mutate:p}=(0,m.useMicrofrontendsGroups)(),j=c?.microfrontends?.groupIds[0],v=g?.groups.find(e=>e.group.id===j),{can:b,isLoading:N}=(0,y.default)(),S=N?void 0:b(w.Action.Update,w.Resource.TeamMicrofrontends),{data:M}=(0,K.useCustomEnvironments)(f),T=M?.customEnvironments||[],{data:L}=(0,Q.useMicrofrontendsGroupProjects)(j),B=L?.projects||[],[U,q]=(0,k.useState)(),[H,_]=(0,k.useState)(!1),[V,Y]=(0,k.useState)(!1),W=U??v?.group.fallbackEnvironment,J=N||h||x||a,X=!J&&S&&U&&U!==v?.group.fallbackEnvironment,Z=(0,k.useMemo)(()=>{let e=[{label:"Same Environment",value:"SAME_ENV",description:"Use the same environment as the current request. If that project does not have a deployment for this environment, an error page will be shown explaining the missing fallback."},{label:"Production",value:"PRODUCTION",description:"Always fallback to the production environment. In the case of custom environments, requests will fallback to Production only if there is no custom environment with the same slug for the other project."}];return T.forEach(t=>{e.push({label:t.slug,value:t.slug,description:`Fallback to the ${t.slug} environment. Requests to any project in this group without a custom environment with this slug will show an error.`})}),e},[T]),ee=(0,k.useMemo)(()=>{let e=[];if(!W||!B.length)return e;if("SAME_ENV"!==W&&"PRODUCTION"!==W){let n=B.filter(e=>!(e.customEnvironments||[]).some(e=>e.slug===W));n.length>0&&e.push((0,t.jsxs)("div",{children:['The following projects do not have the "',W,'" environment. Requests to these projects in non-production environments will show an error page when the fallback is triggered.',(0,t.jsx)("ul",{className:"pl-4 mt-1 mb-2 ml-4 list-disc",children:n.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(D.Link,{href:`/${d}/${e.name}/settings/environments`,children:e.name})},e.id))})]}))}if("SAME_ENV"===W){let n=B.filter(e=>!e.link);if(n.length>0&&e.push((0,t.jsxs)("div",{children:["The following projects are not connected to Git. You may need to manually create fallback deployments in the preview environment. If a preview deployment is not available, requests to these projects will show an error page when the fallback is triggered.",(0,t.jsx)("ul",{className:"pl-4 mt-1 mb-2 ml-4 list-disc",children:n.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(D.Link,{href:`/${d}/${e.name}/settings/git`,children:e.name})},e.id))})]})),B.length>1){let n=new Set;B.forEach(e=>{(e.customEnvironments||[]).forEach(e=>{n.add(e.slug)})});let r=[];B.forEach(e=>{let t=new Set((e.customEnvironments||[]).map(e=>e.slug)),i=Array.from(n).filter(e=>!t.has(e));i.length>0&&r.push({projectName:e.name,missingEnvs:i})}),r.length>0&&e.push((0,t.jsxs)("div",{children:["Not all projects have the same custom environments. Requests to other microfrontends projects in those environments will show an error page for a missing fallback:",(0,t.jsx)("ul",{className:"pl-4 mt-1 mb-2 ml-4 list-disc",children:r.map(e=>(0,t.jsxs)("li",{children:[(0,t.jsx)(D.Link,{href:`/${d}/${e.projectName}/settings/environments`,children:e.projectName})," ","(missing: ",e.missingEnvs.join(", "),")"]},e.projectName))})]}))}}return e},[W,B,d]),en=(0,k.useMemo)(()=>J?(0,t.jsx)(r.Skeleton,{width:256}):e?(0,t.jsx)(A.Error,{error:e}):S?(0,t.jsxs)(u.FieldsetFooter.Status,{children:["Learn more about ",(0,t.jsx)(D.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#fallback-environment",type:"highlight",children:"Fallback Environment"}),"."]}):(0,t.jsxs)(u.FieldsetFooter.Status,{children:["You need additional permissions to manage your project's ",(0,t.jsx)(D.Link,{external:!0,href:"/docs/microfrontends/managing-microfrontends#fallback-environment",type:"highlight",children:"Fallback Environment"}),"."]}),[J,e,S,c?.microfrontends?.isDefaultApp]);async function er(){try{if(!j)return void n(Error("No microfrontends group found."));if(!l)return void n(Error("No team ID found."));if(!U)return void n(Error("Please select a fallback environment."));if("SAME_ENV"!==U&&"PRODUCTION"!==U&&!T.some(e=>e.slug===U))return void n(Error("The selected fallback environment is not a valid custom environment."));_(!0),n(null),await (0,I.fetchAPI)(`/api/v2/teams/${encodeURIComponent(l)}/microfrontends/${encodeURIComponent(j)}${(0,F.encode)({teamId:l})}`,{method:"PATCH",body:{fallbackEnvironment:U},throwOnHTTPError:!0}),await p(),i.success("Saved fallback environment for this microfrontends group."),"SAME_ENV"===U&&Y(!0)}catch(e){(0,G.isError)(e)&&n(e)}_(!1)}return c?.microfrontends?.isDefaultApp?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O.ProjectSettingsFieldset,{description:(0,t.jsx)(t.Fragment,{children:"Configure the environment that requests should fall back for requests to microfrontends projects that were not built in that environment. This setting applies to non-production environments only."}),disabled:!S,error:e,note:en,onSave:er,saveDisabled:!X,saveLoading:H,title:"Fallback Environment",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[J?(0,t.jsx)(r.Skeleton,{height:40,width:256}):(0,t.jsx)(ei,{values:Z,selectedValue:W,onChange:e=>q(e),disabled:!S||H,width:256}),ee.length>0&&(0,t.jsx)("div",{className:"flex flex-col gap-2",children:ee.map(e=>(0,t.jsx)(z.Note,{fill:!0,type:"warning",children:e},String(e)))})]})}),(0,t.jsx)(et,{isOpen:V,onClose:()=>Y(!1),onError:()=>{Y(!1),i.error("Failed to generate preview deployments for every project.")},onSuccess:()=>{Y(!1),i.success("Preview deployments generated successfully!")},projects:B,teamSlug:d||"",teamId:l})]}):null}function ei(e){let{values:n,selectedValue:r,onChange:i,disabled:o,width:s}=e;return(0,t.jsxs)(l.MenuContainer,{position:"bottom-start",children:[(0,t.jsx)(h.MenuButton,{align:"start","aria-label":"Select fallback environment",disabled:o,shape:"square",style:{padding:"0 var(--geist-gap-half)",width:s},suffix:(0,t.jsx)(J.ChevronDown,{}),svgOnly:!0,type:"secondary",typeName:"button",children:(0,t.jsx)("p",{className:"text-copy-14",children:n.find(e=>e.value===r)?.label??"Not specified"})}),(0,t.jsx)(a.Menu,{width:s+160,children:n.map(e=>{let{label:n,value:o,description:s}=e;return(0,t.jsx)(d.MenuItem,{onClick:()=>{o!==r&&i(o)},style:{height:"auto",padding:"var(--geist-space-gap-quarter)"},suffix:r===o?(0,t.jsx)(W.Check,{}):null,children:(0,t.jsxs)("div",{className:"flex flex-col py-1",children:[(0,t.jsx)("p",{className:"text-heading-14",children:n}),(0,t.jsx)("p",{className:"text-copy-14",children:s})]})},o)})})]})}var eo=e.i(6807021),es=e.i(9722978),ea=e.i(1098160),el=e.i(7102400),ed=e.i(1583207),ec=e.i(4111070),eh=e.i(4121886),eu=e.i(9301985),em=e.i(5307161);function ef(){let e=(0,E.useProjectIdOrName)(),o=(0,C.useTeamSlug)(),{data:s,isLoading:a,mutate:l}=(0,P.useProject)(e),{data:d,isLoading:c,mutate:h}=(0,m.useMicrofrontendsGroups)(void 0,{revalidateOnMount:!0}),u=d?.groups.find(e=>e.group.id===s?.microfrontends?.groupIds[0]),{defaultProject:x}=(0,T.partitionMicrofrontendsProjects)(u?.projects||[]),p=!!(!s||a||c||s.microfrontends?.enabled&&!u),{can:j}=(0,y.default)(),v=j(w.Action.Update,w.Resource.Project),{manageMicrofrontendsModals:N,ManageMicrofrontendsMenu:S,toggleAddingProject:A,setIsRemovingProject:L,toggleCreateMicrofrontend:R}=(0,M.useMicrofrontendsGroupActions)({mutateMicrofrontendsGroups:h,microfrontendsGroup:u,mutateProject:l}),F=s?.microfrontends?.isDefaultApp&&x,I=s?.microfrontends?.enabled&&x&&s.id!==x.id,$=(0,k.useMemo)(()=>{let e,n="/docs/microfrontends/managing-microfrontends";return F?e="Manage projects in this Microfrontends Group.":I?e=(0,t.jsxs)(t.Fragment,{children:["Manage settings for this child Microfrontends application. The group can be configured from the"," ",(0,t.jsx)(b.Link,{href:`/${o}/${x.name}/settings/microfrontends`,variant:"underline",children:"default app"}),"."]}):(e="Configure microfrontends to split apart large applications, incrementally migrate sites, or improve your developer velocity.",n="/docs/microfrontends"),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:[e," ",(0,t.jsx)(b.Link,{href:n,variant:"highlight",external:!0,children:"Learn more"})]})},[I,F,x?.name,o]);return(0,t.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,t.jsxs)(b.Link,{className:"-my-1 -ml-2 flex items-center gap-1 rounded-[var(--geist-radius)] px-2 py-1 text-gray-900 !outline-offset-0 transition-colors hover:bg-gray-200",href:`/${o}/~/settings/microfrontends`,children:[(0,t.jsx)(g.ArrowLeft,{size:12}),(0,t.jsx)("span",{children:"Microfrontends"})]}),u&&x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.SlashForward,{className:"hidden md:inline",color:"gray-500"}),(0,t.jsx)(b.Link,{className:`-my-1 rounded-[var(--geist-radius)] px-2 py-1 text-gray-900 !outline-offset-0 transition-colors hover:bg-gray-200 ${F?"font-medium":""} truncate`,href:`/${o}/${x.name}/settings/microfrontends`,children:u.group.name})]}):null,I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.SlashForward,{className:"hidden md:inline",color:"gray-500"}),(0,t.jsx)(b.Link,{className:"-my-1 truncate rounded-[var(--geist-radius)] px-2 py-1 font-medium text-gray-900 !outline-offset-0 transition-colors hover:bg-gray-200",href:`/${o}/${s.name}/settings/microfrontends`,children:s.name})]}):null]}),(0,t.jsxs)("div",{className:"flex flex-row flex-wrap items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,t.jsx)("h1",{className:"text-heading-24",children:"Microfrontends"})}),(0,t.jsx)(r.Skeleton,{show:p,children:$})]}),F?(0,t.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,t.jsx)(i.Tooltip,{disableTriggers:v,text:v?void 0:"Additional permissions required to add projects to this group.",children:(0,t.jsx)(n.Button,{disabled:!v,onClick:()=>A(),children:"Add Project"})}),(0,t.jsx)(S,{type:"secondary",size:"medium",hideAddProject:!0})]}):null]})]}),(0,t.jsx)(eg,{microfrontendsGroup:u,microfrontendsGroupsResponse:d,isLoading:p,teamSlug:o,setIsRemovingProject:L,viewingProject:s,mutateMicrofrontendsGroups:h,mutateProject:l,toggleCreateMicrofrontend:R,toggleAddingProject:A}),s?.microfrontends?.enabled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_,{}),(0,t.jsx)(er,{}),(0,t.jsx)(Y,{}),(0,t.jsx)(U,{})]}):null,N]})}function eg(e){let{microfrontendsGroup:o,microfrontendsGroupsResponse:s,isLoading:a,teamSlug:l,setIsRemovingProject:d,viewingProject:c,mutateMicrofrontendsGroups:h,mutateProject:u,toggleCreateMicrofrontend:m,toggleAddingProject:f}=e,g=s?.groups,[x,p]=(0,k.useState)(!1),j=!!g?.length,v=(0,em.useBillingPlan)(),{teamHasExceededMaxGroups:b}=(0,ed.useMicrofrontendsBilling)({groupId:o?.group?.id});if(a||!l||!g||!c)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eb,{}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,t.jsx)(r.Skeleton,{children:(0,t.jsx)("p",{className:"text-heading-20",children:"Configuration"})}),(0,t.jsx)(r.Skeleton,{height:14,width:256})]}),(0,t.jsx)("div",{className:"pb-4 border-0 rounded bg-background-100 shadow-border",children:(0,t.jsx)(eo.ExpandCollapseWithButton,{ariaLabel:"Expand microfrontends config",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center h-12 px-4 border-b border-gray-400 rounded-t bg-background-200",children:(0,t.jsx)(r.Skeleton,{height:12,width:256})}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 p-4 pl-6",children:[(0,t.jsx)(r.Skeleton,{height:12,width:100}),(0,t.jsx)(r.Skeleton,{height:12,width:200}),(0,t.jsx)(r.Skeleton,{height:12,width:256}),(0,t.jsx)(r.Skeleton,{height:12,width:160}),(0,t.jsx)(r.Skeleton,{height:12,width:200}),(0,t.jsx)(r.Skeleton,{height:12,width:260})]})]})})})]})]});let y=b&&"hobby"===v?"You have reached the maximum number of microfrontends groups for hobby.":void 0;return o&&(0,T.partitionMicrofrontendsProjects)(o.projects).defaultProject?(0,t.jsx)(ex,{microfrontendsGroup:o,setIsRemovingProject:d,viewingProject:c,teamSlug:l,toggleAddingProject:f}):(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(S.MicrofrontendsEmptyState,{description:j?"You can add this project to an existing group or create a new group to add it to.":"Create a new microfrontends group to get started.",title:"This project is not a microfrontend",children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,t.jsx)(i.Tooltip,{disableTriggers:!y,text:y,children:(0,t.jsx)(n.Button,{disabled:!!y,onClick:m,type:"secondary",children:"Create Group"})}),g.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Button,{onClick:()=>p(!0),children:"Add to Group"}),x?(0,t.jsx)(ec.AddProjectToMfeGroupModal,{onClose:()=>p(!1),onSuccess:async()=>{await Promise.all([h(),u?.()].filter(Boolean))},project:c}):null]}):null]})}),(0,t.jsx)(eh.UnlockMoreGroupsWithProBanner,{})]})}function ex(e){let{microfrontendsGroup:n,setIsRemovingProject:r,viewingProject:i,teamSlug:o,toggleAddingProject:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ep,{setIsRemovingProject:r,microfrontendsGroup:n,teamSlug:o,viewingProject:i}),(0,t.jsx)(ey,{microfrontendsGroup:n,viewingProject:i,toggleAddingProject:s})]})}function ep(e){let{setIsRemovingProject:r,microfrontendsGroup:c,teamSlug:u,viewingProject:m}=e,f=c.projects,{sortedProjects:g,defaultProject:v,otherProjects:S}=(0,T.partitionMicrofrontendsProjects)(f,{viewingProjectName:m?.name}),P=m?.name===v?.name,E=P?Math.min(S.length,3):1,[M,C]=(0,k.useState)(!1),{can:A}=(0,y.default)(),L=A(w.Action.Update,w.Resource.Project),R=(0,k.useMemo)(()=>S.length<=E?null:P?M?"Show Less":"All Child Projects":"Other Child Projects",[S.length,M,E,P]);return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(el.AnimateChangeInHeight,{children:g.slice(0,(M?S.length:E)+1).map(e=>{let{isDefaultApp:n}=e.microfrontends||{},c=m?.name===e.name;return(0,t.jsxs)(k.Fragment,{children:[n?null:(0,t.jsx)(ej,{}),(0,t.jsx)(o.Entity.List,{className:(0,es.clsx)("border border-gray-400 shadow-none",n?"":"ml-4",n||c?"bg-background-100":"bg-background-200"),children:(0,t.jsx)(o.Entity,{className:(0,es.clsx)(n?"py-3 pl-4 pr-2":"px-2 py-1"),left:(0,t.jsx)(N.ProjectAvatar,{project:e,size:18}),right:(0,t.jsxs)("div",{className:"flex flex-row items-center h-8 gap-1",children:[n?(0,t.jsx)(i.Tooltip,{text:"The Default App is the entry point for the microfrontends group.",children:(0,t.jsx)(s.Badge,{size:"sm",variant:"blue-subtle",children:"Default App"})}):(0,t.jsx)(s.Badge,{size:"sm",variant:"gray-subtle",className:"border border-gray-500 bg-background-200",children:"Child App"}),n||P||c?(0,t.jsxs)(l.MenuContainer,{children:[(0,t.jsx)(h.MenuButton,{"aria-label":"Menu",shape:"square",svgOnly:!0,size:"small",type:"tertiary",children:(0,t.jsx)(x.MoreHorizontal,{})}),(0,t.jsxs)(a.Menu,{width:200,children:[(0,t.jsx)(d.MenuItem,{href:`/${u}/${e.name}`,children:"View Project"}),P||c?(0,t.jsx)(ev,{onClick:()=>r?.(e),canUpdateProject:L,isDefaultApp:n}):(0,t.jsx)(d.MenuItem,{isLink:!0,href:`/${u}/${v?.name}/settings/microfrontends`,children:"Manage Group"})]})]}):null]}),children:(0,t.jsx)(o.Entity.Content,{title:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(b.Link,{href:c?`/${u}/${e.name}`:`/${u}/${e.name}/settings/microfrontends`,variant:"underline",className:"font-medium",children:e.name}),!n&&c?(0,t.jsx)(i.Tooltip,{text:"You are viewing this application",children:(0,t.jsx)(j.Eye,{})}):null,n?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:[f.length," projects"]}):null]})})})})]},e.id)})}),R?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ej,{}),(0,t.jsx)(n.Button,{size:"small",type:"secondary",suffix:(0,t.jsx)(ea.motion.div,{animate:{rotate:180*!M},children:(0,t.jsx)(p.ChevronUp,{})}),onClick:()=>{C(e=>!e)},className:"mb-2 ml-4",children:R})]}):null]})}function ej(e){let{className:n}=e;return(0,t.jsx)("div",{className:(0,es.clsx)("my-[3px] ml-8 h-[9px] w-[1.5px] rounded bg-gray-400",n)})}function ev(e){let{canUpdateProject:n,onClick:r,isDefaultApp:o}=e;return n?o?(0,t.jsx)(i.Tooltip,{text:"The default app can not be removed from a group",children:(0,t.jsx)(d.MenuItem,{disabled:!0,children:"Remove from Group"})}):(0,t.jsx)(d.MenuItem,{onClick:r,type:"error",children:"Remove from Group"}):(0,t.jsx)(i.Tooltip,{text:"Additional permissions required",children:(0,t.jsx)(c.MenuItemLocked,{children:"Remove from Group"})})}function eb(){let e=(0,t.jsx)(o.Entity.List,{className:"ml-4 border border-gray-400 shadow-none",children:(0,t.jsx)(o.Entity,{left:(0,t.jsx)(r.Skeleton,{height:20,rounded:!0,width:20}),padding:2,children:(0,t.jsx)(o.Entity.Content,{title:(0,t.jsx)(r.Skeleton,{height:14,width:100,className:"my-[5px]"})})})});return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(o.Entity.List,{className:"border border-gray-400 shadow-none",children:(0,t.jsx)(o.Entity,{left:(0,t.jsx)(r.Skeleton,{height:20,rounded:!0,width:20}),padding:4,children:(0,t.jsx)(o.Entity.Content,{title:(0,t.jsx)(r.Skeleton,{height:14,width:100,className:"my-[5px]"})})})}),(0,t.jsx)(ej,{}),e,(0,t.jsx)(ej,{}),e]})}function ey(e){let{microfrontendsGroup:n,viewingProject:r,toggleAddingProject:i}=e,{projects:o,config:s,configDeploymentId:a}=n,{extraReferences:l,missingReferences:d}=(0,T.partitionConfigReferencedProjects)(s,o),c=n?.config?.applications[r?.name];return(0,t.jsx)(O.ProjectSettingsFieldset,{title:c?"Configuration":"Finish setting up your microfrontend",headerNote:c?null:(0,t.jsx)(v.Stopwatch,{}),description:null,note:(0,t.jsxs)(u.FieldsetFooter.Status,{children:["Learn more about ",(0,t.jsx)(b.Link,{external:!0,href:"/docs/microfrontends/configuration",tab:!0,variant:"highlight",children:"Microfrontends Configuration"})," and ",(0,t.jsx)(b.Link,{external:!0,href:"/docs/microfrontends/path-routing",tab:!0,variant:"highlight",children:"Path Routing"}),"."]}),children:(0,t.jsx)(eu.MicrofrontendsConfig,{projects:o,config:s,configDeploymentId:a,extraReferences:l,missingReferences:d,toggleAddingProject:i,viewingProject:r})})}e.s(["MicrofrontendsGroup",()=>ef],4594102)}]);

//# debugId=72e95058-9068-1253-9111-f06634d8dca8
//# sourceMappingURL=12d17a08ac106b0c.js.map