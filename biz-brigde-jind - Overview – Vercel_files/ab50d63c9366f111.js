;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="4f2345f8-d984-af2b-5935-0fc724241cfb")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7418298,e=>{"use strict";var t=e.i(1146226),a=e.i(6582838),s=e.i(85322),i=e.i(5610834),r=e.i(9928621);function n(){let e=(0,i.useParams)()||{teamSlug:"",project:""},{data:n}=(0,a.useDashboardProject)({teamSlug:e.teamSlug,project:e.project}),l=(0,s.isFeatureEnabled)(n.webAnalytics),o=!!(l&&n.microfrontendsConfig?.enabled&&!n.microfrontendsConfig?.isDefaultApp&&!n.microfrontendsConfig?.routeObservabilityToThisProject);return(0,t.jsx)(r.DefaultValuesSetter,{defaultValues:{isLoadingDefaults:!1,isFeatureEnabled:l,microfrontendsDataInDefaultApp:o}})}e.s(["ContextLoader",()=>n])},916685,e=>{"use strict";var t=e.i(5169864),a=e.i(2405338),s=e.i(8042625),i=e.i(277234),r=e.i(5338940),n=e.i(1138941),l=e.i(7946377),o=e.i(9576722),c=e.i(933103),d=e.i(188217),u=e.i(9928621),p=e.i(2415772);let m={keepPreviousData:!0,shouldRetryOnError:e=>403!==(e.statusCode||e.status)},x=(e,c)=>{let{range:d,filter:u,environment:p,limit:x=250,pause:h,...y}=e,{isReady:f,team:g}=(0,r.useTeam)(),j=(0,n.useProjectIdOrName)(),{isEnabled:v,isLoading:b}=(0,o.useWebAnalyticsStatus)(),S=(0,t.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.encode)({from:d.from.toISOString(),to:d.to.toISOString(),tz:(0,l.getClientTimezone)(),teamId:g?.id,projectId:j,filter:JSON.stringify(u),environment:p,limit:x,...y,...e})},[p,u,x,j,d.from,d.to,y,g?.id]),w="/api/web-analytics/stats",N=(0,t.useCallback)(async e=>{let{type:t,search:a}=e;return(0,i.fetchAPI)(`${w}${S({type:t,search:a})}`,{throwOnHTTPError:!0})},[w,S]),{data:k,isLoading:T}=(0,a.default)(f&&v&&!b&&!h?`${w}${S()}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...c});return{data:(0,t.useMemo)(()=>k?.data||[],[k]),isLoading:!f||T||b,searchTopStats:N}};e.s(["isBreakdownData",0,e=>"topGroups"in e,"useAsyncSearchTopStats",0,()=>{let{hasData:e}=(0,u.useWebAnalyticsContext)(),[a]=(0,c.useWebAnalyticsQueryState)(),s=(0,d.useGenericOptions)(),{searchTopStats:i}=x({type:a.client_type,...s},{fallbackData:e?void 0:{data:[]}});return(0,t.useCallback)(async(e,t)=>(await i({search:e,type:t})).data,[i])},"useOverviewData",0,(e,t)=>{let{range:c,filter:d,environment:u}=e,{isReady:p,team:x}=(0,r.useTeam)(),h=(0,n.useProjectIdOrName)(),{isEnabled:y,isLoading:f}=(0,o.useWebAnalyticsStatus)();return(0,a.default)(p&&y&&!f?`/api/web-analytics/overview${(0,s.encode)({from:c.from.toISOString(),to:c.to.toISOString(),tz:(0,l.getClientTimezone)(),teamId:x?.id,projectId:h,filter:JSON.stringify(d),environment:u})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...t})},"useRealtimeData",0,(e,t)=>{let{filter:l,environment:c}=e,{isReady:d,team:u}=(0,r.useTeam)(),p=(0,n.useProjectIdOrName)(),{isEnabled:x,isLoading:h}=(0,o.useWebAnalyticsStatus)();return(0,a.default)(d&&x&&!h?`/api/web-analytics/realtime${(0,s.encode)({teamId:u?.id,projectId:p,filter:JSON.stringify(l),environment:c})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...t})},"useTimeseriesData",0,(e,c,d)=>{let{range:u,filter:p,environment:x,groupBy:h,jsonProperty:y}=e,{isReady:f,team:g}=(0,r.useTeam)(),j=(0,n.useProjectIdOrName)(),{isEnabled:v,isLoading:b}=(0,o.useWebAnalyticsStatus)(),S=!!h,{data:w,isLoading:N}=(0,a.default)(f&&v&&!b&&!c.pause?`${S?"/api/web-analytics/timeseries-breakdown":"/api/web-analytics/timeseries"}${(0,s.encode)({from:u.from.toISOString(),to:u.to.toISOString(),tz:(0,l.getClientTimezone)(),teamId:g?.id,projectId:j,groupBy:h,filter:JSON.stringify(p),jsonProperty:y,environment:x})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...d}),k=(0,t.useMemo)(()=>c.showPlaceholder?[76,73,80,75,40,56,58,60,65,56,52,48,34,40,40,35,33,25,30,16,12,10].map(e=>e/5).map((e,t)=>({key:new Date(Date.now()-24*t*36e5).toISOString().slice(0,10),devices:1e3*e,total:1e4*e,bounceRate:50})).reverse():[],[c.showPlaceholder]);return{data:w?.data??k,isLoading:!f||N}},"useTopStatsData",0,x,"useUserEvents",0,(e,t)=>{let{range:l,filter:c,environment:d,userId:u}=e,{isReady:x,team:h}=(0,r.useTeam)(),y=(0,n.useProjectIdOrName)(),{isEnabled:f,isLoading:g}=(0,o.useWebAnalyticsStatus)(),j=(0,a.default)(x&&f&&!g&&u&&""!==u?`/api/web-analytics/users/${u}/events${(0,s.encode)({from:l.from.toISOString(),to:l.to.toISOString(),teamId:h?.id,projectId:y,filter:JSON.stringify(c),environment:d})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{shouldRetryOnError:m.shouldRetryOnError,...t});return{isLoading:j.isLoading,data:{events:j.data?.events.map(e=>({...e,timestamp:(0,p.fromTbDateTimeString)(e.timestamp)}))||[]}}},"useUserList",0,(e,t)=>{let{range:l,filter:c,environment:d}=e,{isReady:u,team:x}=(0,r.useTeam)(),h=(0,n.useProjectIdOrName)(),{isEnabled:y,isLoading:f}=(0,o.useWebAnalyticsStatus)(),g=(0,a.default)(u&&y&&!f?`/api/web-analytics/users/list${(0,s.encode)({from:l.from.toISOString(),to:l.to.toISOString(),teamId:x?.id,projectId:h,filter:JSON.stringify(c),environment:d})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...t});return{isLoading:g.isLoading,data:{users:g.data?.users.map(e=>({...e,lastActivity:(0,p.fromTbDateTimeString)(e.lastActivity)}))||[]}}}])},2296385,e=>{"use strict";var t=e.i(933103);function a(){let[e]=(0,t.useWebAnalyticsQueryState)();return e.filter.hostname&&"values"in e.filter.hostname?e.filter.hostname.values[0]:null}e.s(["useFilterHostname",()=>a])},7320407,3663372,449488,9547191,e=>{"use strict";var t=e.i(1146226),a=e.i(5074502),s=e.i(9239936),i=e.i(4313344),r=e.i(1649649),n=e.i(3343953),l=e.i(7952834),o=e.i(7917902),c=e.i(6352514),d=e.i(119294),u=e.i(5255926),p=e.i(1794286),m=e.i(5610834),x=e.i(5169864),h=e.i(5924191),y=e.i(9928621),f=e.i(188217),g=e.i(933103),j=e.i(9576722),v=e.i(60582),b=e.i(7432042),S=e.i(916685),w=e.i(9161090);function N(e){let{hasData:a}=e,[s]=(0,g.useWebAnalyticsQueryState)(),{data:i}=(0,S.useRealtimeData)({..."all"!==s.environment?{environment:s.environment}:{},...s.filter.hostname?{filter:{hostname:s.filter.hostname}}:{}},{refreshInterval:(0,b.default)("5s"),fallbackData:a?void 0:{devices:0}});return(0,t.jsx)("span",{className:"ml-2 inline-block border-0 border-l border-[var(--accents-2)] pl-2",children:(0,t.jsx)(w.VisitorCount,{count:i?.devices||0,loading:!i})})}e.s(["OnlineVisitorCounter",()=>N],3663372);var k=e.i(5468328),T=e.i(992159),A=e.i(57106),C=e.i(376725);function P(e){let{hostname:a,children:s,withFavicon:i=!0}=e;return(0,t.jsxs)("span",{className:"flex h-6 flex-row items-center gap-1",children:[(0,t.jsx)(A.Link,{external:!0,href:`https://${a}`,style:{paddingTop:1,gap:2},children:(0,t.jsxs)("span",{className:"flex flex-row items-center gap-1",children:[i?(0,t.jsx)(C.Favicon,{url:a},`favicon-${a}`):null,(0,t.jsx)("p",{className:"max-w-80 truncate font-[500] text-gray-1000",children:a})]})}),(0,t.jsx)("span",{className:"flex flex-row items-center",children:s})]})}function I(e){let{domains:a,production:s,filteredDomain:i,children:r}=e,n=i??s??"";return(0,t.jsxs)(P,{hostname:n,children:[i?(0,t.jsx)(T.Filter,{}):(0,t.jsx)(D,{domains:a,production:s}),r]})}function D(e){let{domains:a,production:s}=e;if(!a||a.length<=1||!s)return null;let i=a.filter(e=>e.name!==s).toSorted((e,t)=>e.name.localeCompare(t.name));return(0,t.jsxs)(k.Tooltip,{className:"mt-px cursor-pointer text-xs tracking-wider",delay:!1,maxWidth:"auto",position:"bottom",text:(0,t.jsx)("span",{className:"p4",children:i.map(e=>(0,t.jsx)(P,{hostname:e.name,withFavicon:!1},e.name))}),children:["+",a.length-1]})}var _=e.i(2296385);function L(e){let{domains:a,production:s,children:i}=e,r=(0,_.useFilterHostname)();return(0,t.jsx)(I,{domains:a,filteredDomain:r,production:s,children:i})}e.s(["PageHostnameWithFilter",()=>L],449488);var W=e.i(5343305),O=e.i(215852),F=e.i(1905601);function E(){let e=(0,m.useParams)()??{teamSlug:"",project:""};return function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,O.useIsomorphicSuspenseSWR)((0,F.getProjectDomainsKey)({teamId:e,projectName:t,...a}),async(e,t)=>(await t(e)).domains,s)}(e.teamSlug,e.project)}e.s(["useCurrentProjectDomains",()=>E],9547191);var B=e.i(579135),U=e.i(6143247);function R(){let e=(0,m.useRouter)(),[b,S]=(0,g.useWebAnalyticsQueryState)(),{environment:w}=b,{user:N,team:k}=(0,o.useAccount)(),T=k||N,A=T?.billing?.plan||"hobby",C=(0,B.useCurrentProjectNameAndIdSuspense)(),{mutate:P}=(0,h.useSWRConfig)(),{isEnabled:I}=(0,j.useWebAnalyticsStatus)(),{setUpgradeModalSource:D,microfrontendsDataInDefaultApp:_}=(0,y.useWebAnalyticsContext)(),{isPlus:L}=(0,r.useIsWebAnalyticsBilling)(),W=(0,f.useTimeSelection)(A,"webAnalyticsPlans",L,"7d"),O=(0,x.useMemo)(()=>(0,a.findAvailablePresets)(A,"webAnalyticsPlans",L),[A,L]);return _?null:(0,t.jsxs)("div",{className:"flex flex-col items-start md:items-start lg:items-end justify-center gap-2 flex-initial self-stretch",children:[I?(0,t.jsx)(s.LimitBanner,{onClickUpgrade:()=>{d.analytics.track(c.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:A,projectId:C.id,teamId:k?.id||N?.uid,type:"usage-banner"}),D("limit_banner")}}):null,(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-4",children:[v.IS_DASH?(0,t.jsx)("div",{className:(0,U.cn)("-mt-1 flex-1",v.IS_DASH&&"pl-1"),children:(0,t.jsx)(x.Suspense,{fallback:(0,t.jsx)(u.Skeleton,{width:100}),children:(0,t.jsx)(M,{})})}):null,(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial -mx-4 md:mx-0",children:[(0,t.jsx)(i.EnvironmentSelector,{environment:w,onChange:e=>{S({environment:e})}}),(0,t.jsx)(p.Calendar,{compact:!0,minValue:W.minAllowedDate,onChange:(e,t)=>{let{start:a,end:s}=e;t?S({period:t}):S({from:new Date(a),to:new Date(s)})},onLockedClick:()=>{d.analytics.track(c.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:A,projectId:C.id,teamId:k?.id||N?.uid,type:"calendar"}),D("calendar")},presetIndex:Object.values(O).findIndex(e=>e.period===W.period),presets:O,value:{start:W.range.from,end:W.range.to},width:"164px"}),v.IS_DASH?null:(0,t.jsx)(n.OptionsMenu,{revalidateFeatureState:()=>{(0,l.revalidateProject)(P,C),e.refresh()}})]})]})]})}function M(){let{hasData:e,microfrontendsDataInDefaultApp:a}=(0,y.useWebAnalyticsContext)(),{data:s}=(0,W.useCurrentDashboardProject)(),{data:i}=E();return(0,t.jsx)(L,{domains:i,production:s.domain||null,children:a?null:(0,t.jsx)(N,{hasData:e})})}e.s(["ControlBar",()=>R],7320407)},5521320,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(9722978),i=e.i(60582),r=e.i(9928621),n=e.i(5838627),l=e.i(57106),o=e.i(2327481),c=e.i(6292193),d=e.i(3969752),u=e.i(9576722),p=e.i(7977213);let m=[{id:"nextjs",name:"Next.js",addStep:{snippet:'import { Analytics } from "@vercel/analytics/next"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your app's layout."]})}},{id:"remix",name:"Remix",addStep:{snippet:'import { Analytics } from "@vercel/analytics/remix"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your root file."]})}},{id:"create-react-app",name:"React",addStep:{snippet:'import { Analytics } from "@vercel/analytics/react"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your main app file."]})}},{id:"sveltekit",name:"Sveltekit",addStep:{snippet:"import { injectAnalytics } from '@vercel/analytics/sveltekit'",title:"Add injectAnalytics()",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"injectAnalytics()"})," function in your main layout file."]})}},{id:"nuxtjs",name:"Nuxt",addStep:{snippet:"import { Analytics } from '@vercel/analytics/nuxt'",title:"Add the Vue component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," Vue component into main component."]})}},{id:"astro",name:"Astro",addStep:{snippet:"import Analytics from '@vercel/analytics/astro'",title:"Add the Astro component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," Astro component into your base layout."]})}},{id:"other",name:"Other",addStep:{snippet:'import { inject } from "@vercel/analytics"',title:"Call inject()",description:(0,t.jsxs)(t.Fragment,{children:["Import the ",(0,t.jsx)(c.InlineCode,{children:"inject()"})," function and call it in your app's layout or main component."]})}}].map(e=>{let{id:a,name:s,addStep:i}=e;return{id:a,name:s,icon:(0,t.jsx)("div",{}),steps:function(e){let{snippet:a,title:s,description:i}=e;return[{title:"Install our package",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{children:"Start by installing @vercel/analytics in your existing project."}),(0,t.jsx)(d.DependencySnippet,{dependency:"@vercel/analytics"})]})},{title:(0,t.jsx)("span",{className:"whitespace-nowrap",children:s}),content:(0,t.jsxs)("span",{children:[i,(0,t.jsx)(n.CodeBlock,{className:"grid",hideLineNumbers:!0,language:"javascript",textToCopy:a,children:a}),(0,t.jsxs)("span",{children:["For full examples and further reference, please refer to our"," ",(0,t.jsx)(l.Link,{external:!0,href:"/docs/analytics/quickstart#add-the-analytics-component-to-your-app",variant:"highlight",children:"documentation"})]})]})},{title:"Deploy & Visit your Site",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Deploy your changes and visit the deployment to collect your page views."}),(0,t.jsx)("p",{className:"text-gray-900",children:"If you don't see data after 30 seconds, please check for content blockers and try to navigate between pages on your site."})]})}]}(i)}});function x(e){let{hasData:a,isEnabled:s}=e,{isEnabled:i,isLoading:r,hasData:n}=(0,u.useWebAnalyticsStatus)();return(0,t.jsx)(o.Onboarding,{agentInstallationType:p.InstallationType.WebAnalytics,description:"To start counting visitors and page views, follow these steps.",frameworks:m,title:"Get Started",visible:r?s&&!a:i&&!n})}var h=e.i(8522580),y=e.i(5255926),f=e.i(9307255),g=e.i(9148191);function j(e){let{hasData:a}=e,{defaultProjectName:s,defaultProjectBaseUrl:i,groupName:r,isLoading:n}=(0,g.useMicrofrontendsProjectInfo)(),{getProjectUrl:o}=(0,f.useDashboardNavigation)();return n?(0,t.jsx)(v,{children:(0,t.jsx)(y.Skeleton,{height:124,width:512})}):(0,t.jsxs)(v,{children:[(0,t.jsxs)("span",{className:"inline-block",children:[(0,t.jsx)("span",{className:"font-medium",children:"Web Analytics"})," is enabled for this project, ",a?"but data is being":"and data will be"," sent to"," ",(0,t.jsx)(l.Link,{className:"underline",href:`${i}/analytics`,children:s}),", the default app for the"," ",(0,t.jsx)(l.Link,{className:"underline",href:`${i}/settings/microfrontends`,children:r})," ","microfrontends group.",(0,t.jsx)("br",{}),"To send data to this project instead, visit the"," ",(0,t.jsx)(l.Link,{className:"underline",href:o("/settings/microfrontends#observability-routing"),children:"microfrontends settings"}),"."]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)(l.ButtonLink,{href:`${i}/analytics`,children:"View Default App"}),(0,t.jsx)(l.ButtonLink,{href:"/docs/microfrontends/managing-microfrontends#observability-data-routing",tab:!0,type:"secondary",children:"Learn More"})]}),a?null:(0,t.jsxs)(h.Note,{type:"warning",children:["You still need to install the package in your project.",(0,t.jsx)("br",{})]})]})}function v(e){let{children:a}=e;return(0,t.jsx)("div",{className:"bg-background-100 border rounded-lg py-10",children:(0,t.jsx)("span",{className:"flex flex-col items-center text-center gap-4 mx-auto max-w-[360px] md:max-w-[512px]",children:a})})}var b=e.i(7320407);function S(e){let{children:n}=e,{hasData:l,isFeatureEnabled:o,microfrontendsDataInDefaultApp:c}=(0,r.useWebAnalyticsContext)();return(0,t.jsxs)("div",{className:(0,s.clsx)("container",{"-mt-6":!i.IS_DASH,"max-h-[880px] overflow-y-hidden pt-px":!o}),children:[i.IS_DASH&&o?(0,t.jsx)("div",{className:"pb-4 pt-0",children:(0,t.jsx)(b.ControlBar,{})}):null,o?(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(x,{hasData:l,isEnabled:o})}):null,c?(0,t.jsx)(j,{hasData:l}):n,o?null:(0,t.jsx)("div",{className:"absolute inset-0 -mt-6 bg-gradient-to-b from-transparent from-0% via-background-100 to-background-100"})]})}e.s(["DynamicPageWrapper",()=>S],5521320)},4951496,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(9928621),i=e.i(5903121),r=e.i(579135);function n(){let{upgradeModalSource:e,setUpgradeModalSource:n}=(0,s.useWebAnalyticsContext)(),l=(0,r.useCurrentProjectNameAndId)(),o=(0,a.useCallback)(()=>n(null),[n]);return(0,t.jsx)(i.UpgradeModal,{onClose:o,projectId:l?.id,source:e})}e.s(["UpgradeModalEntry",()=>n])},963717,e=>{"use strict";var t=e.i(1146226),a=e.i(2590593),s=e.i(9834685),i=e.i(933103);e.s(["useFilterProps",0,e=>{let{filter:r={},removeFilter:n,toggleFilter:l}=(0,s.useWebAnalyticsFilter)(),[o,c]=(0,i.useWebAnalyticsQueryState)(),d=i.allowedGroupBys.includes(e),u=r[e],p=[];return u&&(p=(0,i.isPropertiesFilterValue)(u)?Object.entries(u.properties):u.values.map(e=>[e])),{filterTags:p,enableBreakdown:d,activeBreakdown:o.group_by===e,onRowClick:t=>{l({[e]:{values:[t.key],operator:"eq"}})},onBreakdownClick:()=>{o.group_by===e?c({group_by:null}):d&&c({group_by:e})},getKey:e=>e[1]?.toString()||e[0],renderFilterTag:s=>2===s.length?(0,t.jsx)(a.FilterTag,{onRemoveTag:()=>{n(e,s[0])},value:s[0],children:s.join(": ")}):(0,t.jsx)(a.FilterTag,{onRemoveTag:()=>{n(e)},value:s[0],children:"Clear Filter"})}}])},5104554,e=>{"use strict";var t=e.i(1146226),a=e.i(57106),s=e.i(992159),i=e.i(2640326);function r(e){let{emptyIcon:r,emptyMessage:n}=function(e){let{hasFilter:r,type:n}=e;return r?{emptyIcon:(0,t.jsx)(s.Filter,{className:"!text-gray-700"}),emptyMessage:"No data for active filter"}:{emptyIcon:(0,t.jsx)(i.Analytics,{className:"!text-gray-700"}),emptyMessage:"route"===n?(0,t.jsxs)(t.Fragment,{children:["No route data found.",(0,t.jsx)("br",{}),"If you have not already, please"," ",(0,t.jsx)(a.Link,{external:!0,href:"/docs/analytics/quickstart#add-@vercel/analytics-to-your-project",children:"upgrade"})," ","to the latest version of ",(0,t.jsx)("code",{children:"@vercel/analytics"})]}):"No data found for selected period."}}(e);return(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-2",children:[r,(0,t.jsx)("span",{className:"px-8 text-center text-sm text-gray-900",children:n})]})}e.s(["EmptyState",()=>r])},3218526,e=>{"use strict";var t=e.i(1146226),a=e.i(3162826),s=e.i(5756088),i=e.i(2504781),r=e.i(57106),n=e.i(5169864),l=e.i(2590593),o=e.i(4394132),c=e.i(205804),d=e.i(376725),u=e.i(1649649),p=e.i(963717),m=e.i(9834685),x=e.i(933103),h=e.i(5104554),y=e.i(916685),f=e.i(7432042),g=e.i(188217),j=e.i(119294),v=e.i(6352514),b=e.i(7917902),S=e.i(9576722),w=e.i(9928621);e.i(6483798);var N=e.i(8287059),k=e.i(579135);let T=new Map(Array.from(x.UTMLabelByParam).map(e=>{let[t,a]=e;return[a,t]}));function A(){return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(P,{loading:!0,items:[],type:o.AnalyticsType.Visitors}),children:(0,t.jsx)(C,{})})}function C(){let{user:e,team:n,isTeam:o}=(0,b.useAccount)(),A=n||e,C=A?.billing?.plan||"hobby",I=(0,k.useCurrentProjectNameAndId)(),{isPlus:D,plan:_}=(0,u.useIsWebAnalyticsBilling)(),L=D||"enterprise"===C,{showPlaceholder:W}=(0,S.useWebAnalyticsStatus)(),O=(0,N.useOpenUpgradeModal)(),{setUpgradeModalSource:F,hasData:E}=(0,w.useWebAnalyticsContext)(),B={fallbackData:E?void 0:{data:[]}},U=(0,g.useGenericOptions)(),[R,M]=(0,x.useWebAnalyticsQueryState)(),{data:H,isLoading:q}=(0,y.useTopStatsData)({type:"referrer",...U},{refreshInterval:(0,f.default)("60s"),...B}),{data:G,isLoading:$}=(0,y.useTopStatsData)({type:"query_params",jsonProperty:R.search_param,pause:!L||"utm"!==R.source_type,...U},B),V=(0,y.useAsyncSearchTopStats)(),z="referrer"===R.source_type?q:$,Q=R.tab,J="referrer"===R.source_type?H:G,K=U.range,Y=!o,Z=()=>{j.analytics.track(v.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:C,projectId:I?.id,teamId:n?.id||e?.uid,type:"utm-parameters"}),o?F("utm_parameters"):O({source:"web-analytics-utm-parameters-upsell",forceCreateTeam:!0})},X="utm"===R.source_type,ee=X?"query_params":"referrer",et=(0,p.useFilterProps)(ee),{filter:ea,removeFilter:es,toggleFilter:ei}=(0,m.useWebAnalyticsFilter)(),er=D||"enterprise"===_,en="Referrers";return X&&(en="UTM Parameters"),(0,t.jsx)(P,{...et,items:J,loading:z,onSearch:e=>V(e,ee),range:K,renderEmptyState:()=>er||!X?(0,t.jsx)(h.EmptyState,{hasFilter:Object.keys(ea).length>0}):(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-3",children:[(0,t.jsx)(s.LockClosed,{color:"gray-800"}),(0,t.jsxs)("span",{className:"text-sm text-gray-900",children:[Y?"Create a pro team, then upgrade to ":"Upgrade to ",(0,t.jsx)("span",{className:"font-medium text-gray-1000",children:"Web Analytics Plus"})," ","to access this feature"]}),(0,t.jsxs)("div",{className:"mt-1 flex items-center justify-center gap-4",children:["pro"===_?(0,t.jsx)(i.Button,{onClick:Z,size:"small",type:"secondary",children:Y?"Create a team":"Upgrade"}):null,(0,t.jsx)(r.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",title:"Learn more about Web Analytics Plus",type:"highlight",children:"Learn more"})]})]}),renderItemPrefix:e=>"referrer"!==R.source_type?null:""===e.key?(0,t.jsx)(a.CornerDownRight,{color:"gray-700"}):(0,t.jsx)(d.Favicon,{url:e.key},e.key),renderItemTitle:e=>{let a=e.key,s=`https://${a}`;return"referrer"!==R.source_type?(0,t.jsx)(t.Fragment,{children:e.key}):""===a||"unknown"===a?"Direct":ea.referrer&&"values"in ea.referrer&&"t.co"===ea.referrer.values[0]?(0,t.jsx)(r.Link,{className:c.default["hover-link"],href:`https://x.com/search?q=${encodeURIComponent(s)}`,prefetch:!1,referrerPolicy:"no-referrer",children:a}):(0,t.jsx)(r.Link,{className:c.default["hover-link"],href:s,prefetch:!1,referrerPolicy:"no-referrer",children:a})},skeleton:W,title:en,titleSwitcherItems:["Referrers","UTM Parameters"],..."utm"===R.source_type&&{filterTags:Object.entries(ea.query_params&&(0,x.isPropertiesFilterValue)(ea.query_params)?ea.query_params.properties:{}),onRowClick:e=>{ei({query_params:{properties:{[R.search_param]:e.key},operator:"eq"}})},renderFilterTag:e=>(0,t.jsx)(l.FilterTag,{onRemoveTag:()=>{es("query_params",e[0])},value:e[0],children:`${x.UTMLabelByParam.get(e[0])||"Unknown"}: ${e[1]||"Unknown"}`}),renderTabBar:()=>(0,t.jsx)(l.PanelTabBar,{activeTab:x.UTMLabelByParam.get(R.search_param)??"Source",onSelectTab:e=>{M({search_param:T.get(e)})},tabs:Array.from(x.UTMLabelByParam.values())})},onTitleSwitcherChange:e=>{"Referrers"===e&&M({source_type:"referrer"}),"UTM Parameters"===e&&M({source_type:"utm"})},type:Q})}function P(e){return(0,t.jsx)(l.Panel,{description:"Which sites refer the most traffic to your project",filterTags:[],title:"Referrers",titleSwitcherItems:["Referrers","UTM Parameters"],...e})}e.s(["TopReferrers",()=>A])},4870288,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(57106),i=e.i(2590593),r=e.i(4394132),n=e.i(205804),l=e.i(963717),o=e.i(933103),c=e.i(9459801),d=e.i(5104554),u=e.i(2296385),p=e.i(916685),m=e.i(188217),x=e.i(7432042),h=e.i(9928621),y=e.i(9576722),f=e.i(3748432);function g(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(b,{loading:!0,items:[],type:r.AnalyticsType.Visitors}),children:(0,t.jsx)(v,{})})}let j=["Pages","Routes","Hostnames"];function v(){let{showPlaceholder:e}=(0,y.useWebAnalyticsStatus)(),{hasData:i}=(0,h.useWebAnalyticsContext)(),r=(0,m.usePageHostname)(),g=(0,m.useGenericOptions)(),[j,v]=(0,o.useWebAnalyticsQueryState)(),{data:S,isLoading:w}=(0,p.useTopStatsData)({type:j.page_type,...g},{refreshInterval:(0,x.default)("60s"),...{fallbackData:i?void 0:{data:[]}}}),N=(0,p.useAsyncSearchTopStats)(),k=(0,l.useFilterProps)(j.page_type),T=(0,u.useFilterHostname)(),A=(0,a.useMemo)(()=>"route"===j.page_type?"Routes":"hostname"===j.page_type?"Hostnames":"Pages",[j.page_type]),C=T||r;return(0,t.jsx)(f.ConditionalNavigationMarker,{enabled:!w,phase:"content",label:"InternalTopPages",children:(0,t.jsx)(b,{...k,type:j.tab,loading:w,skeleton:e,items:S,range:g.range,onSearch:e=>N(e,j.page_type),onTitleSwitcherChange:e=>{"Pages"===e&&v({page_type:"path"}),"Routes"===e&&v({page_type:"route"}),"Hostnames"===e&&v({page_type:"hostname"})},renderEmptyState:()=>(0,t.jsx)(d.EmptyState,{hasFilter:Object.keys(j.filter).length>0,type:j.page_type}),renderItemTitle:e=>C&&"path"===j.page_type?(0,t.jsx)(s.Link,{className:n.default["hover-link"],href:`https://${C}${e.key}`,prefetch:!1,children:(0,t.jsx)(c.RouteHighlighter,{route:e.key})}):(0,t.jsx)(c.RouteHighlighter,{route:e.key}),title:A})})}function b(e){return(0,t.jsx)(i.Panel,{description:"Which pages are the most visited in your project",filterTags:[],title:j[0],titleSwitcherItems:j,...e})}e.s(["TopPages",()=>g])},5607014,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(2590593),i=e.i(4394132),r=e.i(963717),n=e.i(9928621),l=e.i(9576722),o=e.i(916685),c=e.i(188217),d=e.i(933103);function u(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(m,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(p,{})})}function p(){let e=(0,r.useFilterProps)("os_name"),[a]=(0,d.useWebAnalyticsQueryState)(),{hasData:s}=(0,n.useWebAnalyticsContext)(),{showPlaceholder:i}=(0,l.useWebAnalyticsStatus)(),u=(0,c.useGenericOptions)(),{data:p,isLoading:x}=(0,o.useTopStatsData)({type:"os_name",...u},{fallbackData:s?void 0:{data:[]}});return(0,t.jsx)(m,{...e,items:p,range:u.range,loading:x,skeleton:i,type:a.tab})}function m(e){return(0,t.jsx)(s.Panel,{filterTags:[],...e,description:"Which operating systems your visitors are using",limit:5,title:"Operating Systems",valueDisplayMode:"percentage"})}e.s(["TopOperatingSystems",()=>u])},5717396,e=>{"use strict";var t=e.i(1146226),a=e.i(7577497),s=e.i(2504781),i=e.i(57106),r=e.i(5169864),n=e.i(2590593),l=e.i(205804),o=e.i(4394132),c=e.i(9834685),d=e.i(963717),u=e.i(5104554),p=e.i(9928621),m=e.i(9576722),x=e.i(916685),h=e.i(188217),y=e.i(933103),f=e.i(7917902),g=e.i(119294),j=e.i(6352514);e.i(6483798);var v=e.i(8287059),b=e.i(579135);function S(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(k,{loading:!0,items:[],type:o.AnalyticsType.Visitors}),children:(0,t.jsx)(w,{})})}function w(){let{filter:e}=(0,c.useWebAnalyticsFilter)(),{user:a,team:s,isTeam:i}=(0,f.useAccount)(),n=s||a,l=n?.billing?.plan||"hobby",o="hobby"===l,d=(0,v.useOpenUpgradeModal)(),{setUpgradeModalSource:u,hasData:S}=(0,p.useWebAnalyticsContext)(),{showPlaceholder:w}=(0,m.useWebAnalyticsStatus)(),k=(0,h.useGenericOptions)(),{range:T}=k,[A,C]=(0,y.useWebAnalyticsQueryState)(),P=A.tab,I=A.event_property,[D,_]=(0,r.useState)([]),[L,W]=(0,r.useState)(null),{data:O,isLoading:F}=(0,x.useTopStatsData)({type:L||e.event_name?"event_data":"event_name",...k,...L&&{jsonProperty:L},pause:o},{fallbackData:S?void 0:{data:[]}}),E=(0,r.useMemo)(()=>o?[]:O,[O,o]),B=(0,r.useCallback)(e=>{e?C({event_property:e}):C({event_property:null})},[C]);if((0,r.useEffect)(()=>{L&&L!==I&&B(L)},[I,L,B]),e.event_name&&!F&&O.length>0&&!L){let e=O[0];_(O.map(e=>e.key)),I?W(I):e.key===L||I||W(e.key)}!e.event_name&&L&&(W(null),_([]),B(void 0));let U=(0,b.useCurrentProjectNameAndId)();return(0,t.jsx)(N,{data:E,eventProperties:D,loading:F,onClickUpgrade:()=>{g.analytics.track(j.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:l,projectId:U?.id,teamId:s?.id||a?.uid,type:"custom-events"}),i?u("top_events"):d({source:"web-analytics-custom-event-upsell",forceCreateTeam:!0})},onSelectProperty:W,range:T,requiresCreation:!i,requiresUpgrade:o,selectedProperty:L,skeleton:w,type:P})}function N(e){let{data:a,loading:s,skeleton:i,selectedProperty:r,type:l,range:o,eventProperties:p,onSelectProperty:m,requiresCreation:h,requiresUpgrade:y,onClickUpgrade:f}=e,{filter:g,removeFilter:j,toggleFilter:v}=(0,c.useWebAnalyticsFilter)(),b=(0,d.useFilterProps)("event_name"),S=(0,d.useFilterProps)("event_data"),w=[...b.filterTags||[],...S.filterTags||[]],N=Object.keys(g).length>0,k=(0,x.useAsyncSearchTopStats)();return(0,t.jsx)(n.Panel,{...g.event_name?S:b,description:"Which events are triggered the most",filterTags:w,items:a,limit:5,loading:s,onRowClick:e=>{g.event_name?v({event_data:{properties:{[r??""]:e.key},operator:"eq"}}):v({event_name:{values:[e.key],operator:"eq"}})},onSearch:e=>k(e,r||g.event_name?"event_data":"event_name"),range:o,valueDisplayMode:"all-values",...g.event_name&&r&&m&&p?{renderTabBar:()=>(0,t.jsx)(n.PanelTabBar,{activeTab:r,onSelectTab:m,tabs:p})}:{},renderEmptyState:()=>N?(0,t.jsx)(u.EmptyState,{hasFilter:!0}):(0,t.jsx)(T,{onClickUpgrade:f,requiresCreation:h,requiresUpgrade:y}),renderFilterTag:e=>2===e.length?(0,t.jsx)(n.FilterTag,{onRemoveTag:()=>{j("event_data",e[0])},value:e[0],children:e.join(": ")}):(0,t.jsx)(n.FilterTag,{onRemoveTag:()=>{j("event_name")},value:e[0],children:e[0]}),renderItemTitle:e=>e.key||"Unknown",skeleton:i,title:"Events",totalCountLabel:"Total",type:l})}function k(e){return(0,t.jsx)(n.Panel,{filterTags:[],...e,description:"Which events are triggered the most",limit:5,valueDisplayMode:"all-values",renderItemTitle:e=>e.key||"Unknown",title:"Events",totalCountLabel:"Total"})}function T(e){let{requiresUpgrade:r,onClickUpgrade:n,requiresCreation:o}=e;return(0,t.jsx)("div",{className:l.default["empty-state-wrapper"],children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{className:"rounded-full border border-gray-100 p-2",children:(0,t.jsx)("svg",{fill:"none",height:"24",viewBox:"0 0 32 32",width:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M17.1111 5L6 18.3333H15.9999L14.8889 27.2222L25.9999 13.8889H15.9999L17.1111 5Z",stroke:"var(--accents-5)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})})}),(0,t.jsx)("h4",{className:"font-semibold text-gray-1000",children:"No custom events"}),(0,t.jsxs)("div",{className:l.default["empty-state-description"],children:[(0,t.jsx)(a.Balancer,{children:"Set up custom events to gain a deeper understanding of user behavior on your site."}),(0,t.jsx)("div",{style:{marginTop:2},children:(0,t.jsxs)(a.Balancer,{children:[r?(0,t.jsxs)(t.Fragment,{children:[o?"Create ":"Upgrade to "," a ",(0,t.jsx)("b",{children:"Pro"})," ","team to access this feature."," "]}):(0,t.jsxs)(t.Fragment,{children:["Track button clicks, form submissions, and other user actions."," "]}),(0,t.jsx)(i.Link,{external:!0,href:"/docs/analytics/custom-events",variant:"highlight",children:"Learn more"})]})}),r?(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"flex flex-col items-center justify-start flex-initial",children:(0,t.jsx)("div",{style:{marginTop:"var(--geist-gap-half)"},children:(0,t.jsx)(s.Button,{onClick:n,size:"small",children:o?"Create a team":"Upgrade to Pro"})})})}):null]})]})})}e.s(["TopEvents",()=>S])},8230391,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(2590593),i=e.i(4394132),r=e.i(7946377),n=e.i(7950227),l=e.i(963717),o=e.i(9928621),c=e.i(9576722),d=e.i(916685),u=e.i(188217),p=e.i(933103);function m(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(h,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(x,{})})}function x(){let e=(0,l.useFilterProps)("country"),{hasData:a}=(0,o.useWebAnalyticsContext)(),{showPlaceholder:s}=(0,c.useWebAnalyticsStatus)(),i=(0,u.useGenericOptions)(),[r]=(0,p.useWebAnalyticsQueryState)(),{data:n,isLoading:m}=(0,d.useTopStatsData)({type:"country",...i},{fallbackData:a?void 0:{data:[]}});return(0,t.jsx)(h,{...e,items:n,range:i.range,loading:m,skeleton:s,type:r.tab})}function h(e){return(0,t.jsx)(s.Panel,{filterTags:[],...e,description:"Which countries your visitors are from",limit:5,renderItemPrefix:e=>(0,t.jsx)(n.Flag,{countryCode:e.key}),renderItemTitle:e=>(0,r.getCountryName)(e.key),title:"Countries",valueDisplayMode:"percentage"})}e.s(["TopCountries",()=>m])},6692046,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(2590593),i=e.i(4394132),r=e.i(963717),n=e.i(933103),l=e.i(9928621),o=e.i(9576722),c=e.i(916685),d=e.i(188217);function u(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(m,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(p,{})})}function p(){let[e,s]=(0,n.useWebAnalyticsQueryState)(),i=(0,r.useFilterProps)(e.client_type),{hasData:u}=(0,l.useWebAnalyticsContext)(),{showPlaceholder:p}=(0,o.useWebAnalyticsStatus)(),x=(0,d.useGenericOptions)(),{data:h,isLoading:y}=(0,c.useTopStatsData)({type:e.client_type,...x},{fallbackData:u?void 0:{data:[]}}),f={items:h,range:x.range,loading:y,skeleton:p,type:e.tab},g=(0,a.useMemo)(()=>"device_type"===e.client_type?"Devices":"Browsers",[e.client_type]),j=(0,a.useMemo)(()=>"device_type"===e.client_type?"Which devices your visitors are using":"Which browsers your visitors are using",[e.client_type]);return(0,t.jsx)(m,{...i,...f,description:j,onTitleSwitcherChange:e=>{"Devices"===e&&s({client_type:"device_type"}),"Browsers"===e&&s({client_type:"client_name"})},renderItemTitle:t=>"device_type"===e.client_type&&n.DeviceLabelByValue.get(t.key)||t.key,title:g})}function m(e){return(0,t.jsx)(s.Panel,{description:"Which devices your visitors are using",filterTags:[],title:"Devices",...e,limit:5,titleSwitcherItems:["Devices","Browsers"],valueDisplayMode:"percentage"})}e.s(["TopBrowsers",()=>u])},6577918,e=>{"use strict";var t=e.i(1146226),a=e.i(9722978),s=e.i(5169864),i=e.i(1098160),r=e.i(9771394),n=e.i(9576722),l=e.i(9834685),o=e.i(205804);function c(e){let{children:n}=e,[l,c]=(0,s.useState)(!1),[u,p]=(0,s.useState)(!1);return(0,t.jsx)(i.motion.div,{className:(0,a.clsx)(l&&"no-skeleton-animations",!u&&o.default["fast-filter-tooltip"]),layout:"position",children:(0,t.jsxs)(r.PlaceholderContext.Provider,{value:l,children:[(0,t.jsx)(s.Suspense,{fallback:null,children:(0,t.jsx)(d,{setShowPlaceholder:c,setUsedWebAnalyticsFilter:p})}),n]})})}function d(e){let{setShowPlaceholder:t,setUsedWebAnalyticsFilter:a}=e,{showPlaceholder:i}=(0,n.useWebAnalyticsStatus)();(0,s.useEffect)(()=>{t(i)},[t,i]);let{usedWebAnalyticsFilter:r}=(0,l.useWebAnalyticsFilter)();return(0,s.useEffect)(()=>{a(r)},[a,r]),null}e.s(["PlaceholderProvider",()=>c])},1738815,e=>{e.v({chart:"page-module__r1m6Pq__chart",faded:"page-module__r1m6Pq__faded",gray:"page-module__r1m6Pq__gray",headerWrapper:"page-module__r1m6Pq__headerWrapper"})},3814106,e=>{"use strict";var t=e.i(1146226),a=e.i(9722978),s=e.i(5169864),i=e.i(188217),r=e.i(9928621),n=e.i(933103),l=e.i(9576722),o=e.i(9834685),c=e.i(916685),d=e.i(2122549),u=e.i(8013097),p=e.i(4424077),m=e.i(8545185),x=e.i(1589821),h=e.i(1598965),y=e.i(3489437),f=e.i(9629316),g=e.i(4466224),j=e.i(1166930),v=e.i(2435473),b=e.i(6597077),S=e.i(4230411),w=e.i(6517212),N=e.i(8125826),k=e.i(4085287),T=e.i(388027),A=e.i(7013170),C=e.i(4905664),P=e.i(1230902),I=e.i(351890),D=e.i(9806773),_=e.i(931197),L=e.i(3322724);e.i(5406151);var W=e.i(1376250),O=e.i(7946377);e.i(7286972);var F=e.i(5693388);let E=["var(--ds-blue-700)","var(--ds-amber-700)","var(--ds-purple-700)","var(--ds-pink-700)","var(--ds-blue-600)","var(--ds-amber-500)","var(--ds-purple-600)"],B=e=>E[e%E.length];function U(e){var a,i;let{data:r,width:l,type:o,overwriteUnitLabel:c,height:d,formatKey:E,groupBy:U,groupByProperty:R}=e,M=(0,L.useIsMobile)(),H=(0,s.useMemo)(()=>Object.fromEntries(Object.entries(r.topGroups).map(e=>{let[t,a]=e;return[t,a.map(e=>({...e,date:10===e.key.length?(0,W.toZonedTime)(e.key,(0,O.getClientTimezone)()):new Date(e.key||0)}))]})),[r]),q=(0,s.useMemo)(()=>Object.keys(H).sort((e,t)=>{let a=H[e].reduce((e,t)=>e+t[o],0);return H[t].reduce((e,t)=>e+t[o],0)-a}),[H,o]),G=r.totalGroupCount-q.length,$=l-60-30,V=d-25-50,z=q[0],Q=e=>e.date,J=e=>e[o],K=(0,N.bisector)(e=>e.date).left,Y=H[z]??[],Z=(0,k.extent)(Y,Q),X=(0,f.scaleTime)({range:[0,$],domain:Z}),ee=(0,y.scaleLinear)({domain:[0,1.04*((0,T.max)(Y,J)||100)],range:[V,0],nice:!0}),{tooltipData:et,tooltipLeft:ea,showTooltip:es,hideTooltip:ei}=(0,w.useTooltip)(),er=(a=Z[0],i=Z[1],1>=(0,C.differenceInDays)(i,a)?_.Granularity.Hour:_.Granularity.Day);return(0,t.jsxs)("div",{className:"relative *:select-none",children:[(0,t.jsx)("svg",{height:d,onMouseLeave:ei,onMouseMove:e=>{let t=(0,m.localPoint)(e)||{x:0,y:0},a=X.invert(t.x-60),s={dataPoints:[],date:new Date(a)};if(q.forEach((e,t)=>{let i,r=H[e],n=K(r,a,1),l=r[n-1],c=r[n];i=l&&c?a.valueOf()-l.date.valueOf()>c.date.valueOf()-a.valueOf()?c:l:l||c,0===t&&(s.range=(0,F.formatRangeWithGranularity)(i.date,er),s.end=(0,P.format)(i.date,"MMM d, yyyy"),s.relativeTime=(0,F.formatRelativeTime)(i.date,er,"1h"!==er?(0,I.startOfToday)():void 0)),i&&s.dataPoints.push({...i,value:i[o]})}),!s.dataPoints.length)return void ei();let i=X(s.dataPoints[0].date),r=ee(J(s.dataPoints[0]));es({tooltipData:s,tooltipLeft:i,tooltipTop:r})},width:"100%",children:(0,t.jsxs)(h.Group,{left:60,top:25,children:[(0,t.jsx)(x.GridRows,{numTicks:3,pointerEvents:"none",scale:ee,stroke:"var(--accents-2)",width:$}),q.map((e,a)=>(0,t.jsxs)(s.default.Fragment,{children:[(0,t.jsx)(g.AreaClosed,{data:H[e]??[],fill:B(a),fillOpacity:.01,x:e=>X(Q(e)),y:e=>ee(J(e)),yScale:ee}),(0,t.jsx)(v.LinePath,{data:H[e]??[],stroke:B(a),strokeWidth:2,x:e=>X(Q(e)),y:e=>ee(J(e))})]},e)),(0,t.jsx)(p.AxisLeft,{hideAxisLine:!0,hideTicks:!0,numTicks:3,scale:ee,tickFormat:e=>Number(e)%1!=0?"":(0,O.formatNumberCompact)(Number(e)),tickLabelProps:()=>({dx:"-0.5em",dy:"0.25em",textAnchor:"end",fontSize:12,fill:"var(--accents-4)"})}),(0,t.jsx)(u.AxisBottom,{hideAxisLine:!0,hideTicks:!0,numTicks:M?2:7,scale:X,tickFormat:e=>{var t,a;return t=String(e),a=(0,A.differenceInHours)(Z[1],Z[0]),(0,D.timeToAutomaticLocale)(t,a<24?{hour:"numeric",minute:"numeric",hour12:!1}:{month:"numeric",day:"numeric"})},tickLabelProps:()=>({dy:"0.25em",fill:"var(--accents-4)",fontSize:12,textAnchor:"middle"}),top:V}),et?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(j.Line,{from:{x:ea,y:0},pointerEvents:"none",stroke:"var(--geist-foreground)",strokeWidth:2,to:{x:ea,y:V+7}})}):null]})}),et?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.TooltipWithBounds,{className:"pointer-events-none absolute flex flex-col justify-center whitespace-nowrap rounded bg-background-100 px-4 py-2 text-sm text-gray-1000 shadow-tooltip",left:(ea??0)+60,style:{background:"auto"},top:40,children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("span",{className:"flex-1 font-normal",children:c||(0,O.labelFromType)(o)}),(0,t.jsx)("span",{className:"text-gray-900",children:et.range})]}),(0,t.jsxs)("div",{className:"-mx-4 my-1 flex gap-1 border-y bg-background-200 px-4 py-1",children:[(0,t.jsx)("span",{children:"split by"}),(0,t.jsx)("span",{className:"inline-block max-w-[min(400px,40vw)] truncate font-medium",children:R||n.StatLabelByParam.get(U)||U})]}),q.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1.5",children:[(0,t.jsx)("div",{className:"size-2 rounded-full",style:{backgroundColor:B(a)}}),(0,t.jsx)("span",{className:"max-w-[min(400px,40vw)] flex-1 truncate",title:E?.(e),children:E?.(e)||(0,t.jsx)("span",{className:"text-gray-800",children:"Not set"})}),(0,t.jsx)("span",{className:"self-end pl-2 font-mono font-bold",children:(0,O.formatNumber)("number"==typeof et.dataPoints[a]?.value?et.dataPoints[a].value:0)})]},E?.(e)||a)),G>0&&(0,t.jsxs)("span",{className:"text-gray-800",children:["+",(0,O.formatNumber)(G)," more"]})]},Math.random()),(0,t.jsx)(b.Tooltip,{className:"pointer-events-none absolute flex -translate-x-1/2 flex-col items-center justify-center whitespace-nowrap rounded-[99px] bg-[var(--geist-background)] px-[var(--geist-space-2x)] py-[var(--geist-space)] shadow-[var(--ds-shadow-tooltip)] dark:shadow-none",left:ea??0,offsetLeft:60,offsetTop:32,top:d-25-50,unstyled:!0,children:(0,t.jsx)("p",{className:"text-[12px] leading-[16px] font-medium text-gray-1000",children:et.relativeTime||et.end||"Now"})})]}):null]})}var R=e.i(9028632);function M(e){let{data:a,type:s,loading:i,range:r,overwriteUnitLabel:l,groupBy:o,formatKey:u,formatYAxis:p}=e,[m,x]=(0,n.useWebAnalyticsQueryState)();return i||Array.isArray(a)&&0===a.length?null:(0,t.jsx)(d.ParentSize,{children:e=>{let{width:i,height:n}=e;return(0,c.isBreakdownData)(a)?(0,t.jsx)(U,{data:a,formatKey:u,groupBy:o||"",height:n,overwriteUnitLabel:l,type:s,width:i}):(0,t.jsx)(R.Graph,{data:a,formatYAxis:p,height:n,onSelectionChange:e=>{let[t,a]=e;x({from:t,to:a})},overwriteUnitLabel:l,range:r,type:s,width:i})}})}var H=e.i(4394132),q=e.i(1738815),G=e.i(7432042);function $(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(z,{}),children:(0,t.jsx)(V,{})})}function V(){let{hasData:e,microfrontendsDataInDefaultApp:s}=(0,r.useWebAnalyticsContext)(),[d]=(0,n.useWebAnalyticsQueryState)(),{showPlaceholder:u}=(0,l.useWebAnalyticsStatus)(),{filter:p,groupBy:m,groupByProperty:x}=(0,o.useWebAnalyticsFilter)(),h=p.event_name&&!(0,n.isPropertiesFilterValue)(p.event_name)?p.event_name.values[0]:void 0,y=(0,i.useGenericOptions)(),f=!!p.event_name,g=!!(("event_name"===m||"event_data"===m)&&f&&!d.event_property),{data:j,isLoading:v}=(0,c.useTimeseriesData)({...y,groupBy:m||void 0,jsonProperty:x||void 0},{showPlaceholder:u,pause:g},{refreshInterval:(0,G.default)(m?"30s":"10s"),fallbackData:e?void 0:{data:Array(7).fill(0).map((e,t)=>({key:new Date(Date.now()-24*t*36e5).toISOString().slice(0,10),devices:0,total:0})).reverse()}}),b=d.tab;return(0,t.jsxs)("div",{className:(0,a.clsx)((v||g)&&`${q.default.faded} pointer-events-none`,u&&"grayscale"),style:{position:"relative",height:400},children:[(0,t.jsx)(M,{data:s?[]:j,formatKey:e=>"country"===m?(0,O.getCountryName)(e):e,groupBy:x||m||void 0,loading:(0,c.isBreakdownData)(j)?0===Object.keys(j).length:0===j.length,overwriteUnitLabel:b===H.AnalyticsType.TotalCount?h:void 0,range:y.range,type:b,...b===H.AnalyticsType.BounceRate&&{formatYAxis:e=>`${e}%`}}),u&&!s?(0,t.jsx)("div",{className:"absolute right-6 top-2 rounded bg-gray-100 px-1.5 py-0.5 text-xs font-medium text-gray-800",children:"Demo Data"}):null]})}function z(){return(0,t.jsx)("div",{className:(0,a.clsx)(q.default.faded,"pointer-events-none"),style:{position:"relative",height:400}})}e.s(["TimeseriesChart",()=>$],3814106)},7944103,e=>{"use strict";var t=e.i(1146226),a=e.i(1649649),s=e.i(5169864),i=e.i(188217),r=e.i(9928621),n=e.i(7433697),l=e.i(933103),o=e.i(9576722),c=e.i(9834685),d=e.i(916685),u=e.i(4394132),p=e.i(9031150),m=e.i(2979333),x=e.i(7300),h=e.i(7432042),y=e.i(5307161);function f(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(j,{}),children:(0,t.jsx)(g,{})})}function g(){let e=(0,y.useBillingPlan)(),{isPlus:f}=(0,a.useIsWebAnalyticsBilling)(),{period:g,range:j}=(0,i.useTimeSelection)(e,"webAnalyticsPlans",f),{hasData:v}=(0,r.useWebAnalyticsContext)(),{setEnvironment:b}=(0,n.useEnvironment)(),[S,w]=(0,l.useWebAnalyticsQueryState)(),{showPlaceholder:N,isEnabled:k,hasData:T,isLoading:A}=(0,o.useWebAnalyticsStatus)();(0,s.useEffect)(()=>{!A&&(T||b("all"))},[T,k,A,b]);let{filter:C}=(0,c.useWebAnalyticsFilter)(),P=C.event_name&&!(0,l.isPropertiesFilterValue)(C.event_name)?C.event_name.values[0]:void 0,I=(0,i.useGenericOptions)(),{data:D}=(0,d.useOverviewData)(I,{refreshInterval:(0,h.default)("10s"),fallbackData:v?void 0:{devices:0,total:0}}),{data:_}=(0,d.useOverviewData)({...I,range:(0,i.getDateRangeBefore)(j)},{revalidateOnFocus:!1}),L=S.tab;return(0,t.jsxs)(x.Tabs,{children:[(0,t.jsx)(x.Tab,{active:L===u.AnalyticsType.Visitors,label:"Visitors",loading:!D||N,onClick:(0,p.withAwaitPaint)(()=>w({tab:u.AnalyticsType.Visitors})),period:g,trend:_&&D?(0,m.getPercentageTrend)(_.devices,D.devices):void 0,value:N?0:D?.devices??0}),(0,t.jsx)(x.Tab,{active:L===u.AnalyticsType.TotalCount,label:P||"Page Views",loading:!D||N,onClick:(0,p.withAwaitPaint)(()=>w({tab:u.AnalyticsType.TotalCount})),period:g,trend:_&&D?(0,m.getPercentageTrend)(_.total,D.total):void 0,value:N?0:D?.total??0}),(0,t.jsx)(x.Tab,{active:L===u.AnalyticsType.BounceRate,className:"!border-r",label:"Bounce Rate",loading:!D||N,onClick:(0,p.withAwaitPaint)(()=>w({tab:u.AnalyticsType.BounceRate})),period:g,trend:_&&D?(0,m.getPercentageTrend)(_.bounceRate,D.bounceRate,{isPercent:!0,isNegativeGood:!0}):void 0,value:N?0:D?.bounceRate??0,valueSuffix:(0,t.jsx)("span",{children:"%"})})]})}function j(){return(0,t.jsxs)(x.Tabs,{children:[(0,t.jsx)(x.Tab,{active:!1,label:"Visitors",loading:!0,period:"7d",value:0}),(0,t.jsx)(x.Tab,{active:!1,label:"Page Views",loading:!0,period:"7d",value:0}),(0,t.jsx)(x.Tab,{active:!1,className:"!border-r",label:"Bounce Rate",loading:!0,period:"7d",value:0,valueSuffix:(0,t.jsx)("span",{children:"%"})})]})}e.s(["CategoryTabs",()=>f])},7906826,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(5255926),i=e.i(2652226),r=e.i(3663372),n=e.i(449488),l=e.i(5343305),o=e.i(9547191),c=e.i(9928621),d=e.i(7320407),u=e.i(60582);function p(){return(0,t.jsx)(i.default,{buttonsClassName:"self-stretch",dashPreventButtonPortaling:!u.IS_DASH,...!u.IS_DASH?{buttons:(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(d.ControlBar,{})})}:{},description:(0,t.jsx)("div",{className:"-mt-1",children:(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(s.Skeleton,{width:100}),children:(0,t.jsx)(m,{})})}),title:(0,t.jsx)("h1",{className:"text-[32px] leading-[40px] tracking-[-0.79px] font-medium",children:"Web Analytics"})})}function m(){let{hasData:e,microfrontendsDataInDefaultApp:a}=(0,c.useWebAnalyticsContext)(),{data:s}=(0,l.useCurrentDashboardProject)(),{data:i}=(0,o.useCurrentProjectDomains)();return(0,t.jsx)(n.PageHostnameWithFilter,{domains:i,production:s.domain||null,children:a?null:(0,t.jsx)(r.OnlineVisitorCounter,{hasData:e})})}var x=e.i(5223937),h=e.i(7087273);function y(e){return(0,t.jsx)(i.default,{buttons:e.cards?(0,t.jsx)(h.Scroller,{childrenContainerClassName:"gap-4",overflow:"x",withButtons:!0,children:e.cards.map(e=>(0,a.createElement)(f,{...e,key:e.title}))}):void 0,buttonsClassName:"flex-1 w-full lg:w-3/5",columnClassName:"flex-1",containerStyle:{marginBottom:"3rem",...e.containerStyle},dashPreventButtonPortaling:!0,description:(0,t.jsx)("span",{className:"flex gap-8",children:(0,t.jsxs)("span",{className:"flex flex-1 flex-col gap-8",children:["string"==typeof e.description?(0,t.jsxs)("p",{className:"text-copy-14",children:[" ",e.description," "]}):e.description,e.children]})}),title:e.title})}function f(e){let{icon:a,title:s,children:i}=e;return(0,t.jsx)("span",{className:"w-80 shrink-0 p-0.5",children:(0,t.jsxs)(x.Material,{className:"flex flex-col gap-2 p-6",children:[a,(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium mt-4",children:s}),i]})})}var g=e.i(57106),j=e.i(2504781),v=e.i(2640326),b=e.i(1101517),S=e.i(9658738),w=e.i(3228096),N=e.i(3884708),k=e.i(2375916),T=e.i(2442931),A=e.i(5155984),C=e.i(5468328),P=e.i(5610834);e.i(6483798);var I=e.i(8287059),D=e.i(6000680),_=e.i(7952834),L=e.i(5338940),W=e.i(6891161),O=e.i(455575),F=e.i(5924191),E=e.i(9957872),B=e.i(1438473),U=e.i(1513230);function R(e){let{plan:a,planIteration:s}=e;return(0,t.jsx)(E.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:"Included in your plan",tabIndex:0,title:(0,t.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:["Web Analytics ","hobby"===a?"on Hobby":""]}),value:"included",children:"pro"===a?(0,t.jsx)(U.ProFeatures,{isProPlus:"pro"===a&&"plus"===s}):(0,t.jsx)(U.HobbyFeatures,{})})}var M=e.i(6450656);function H(e){let{currency:a}=e;return(0,t.jsx)(E.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:(0,M.withPricing)("{fee} / month (once for your entire team)",{currency:a}),tabIndex:0,title:(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Web Analytics Plus"}),value:"addon",children:(0,t.jsx)(U.PlusFeatures,{})})}var q=e.i(2924439),G=e.i(2466450);function $(e){let{currency:a}=e;return(0,t.jsx)(E.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:`${(0,G.formatCurrency)(q.pricingMenu.pro.price,a)} / month`,tabIndex:0,title:(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Web Analytics on Pro"}),value:"upgraded",children:(0,t.jsx)(U.ProFeatures,{isProPlus:!0})})}var V=e.i(4055164),z=e.i(6352514),Q=e.i(119294);e.i(1307729);var J=e.i(7416719);let K="web-analytics-enable-modal",Y={step:"choose",isProcessing:!1,selectedOption:"included"},Z=(0,V.create)((e,t)=>({...Y,team:null,projectId:null,plan:"hobby",planIteration:void 0,currency:"USD",isPlusEnabled:!1,isTrialing:!1,setProps:t=>{let{isPlusEnabled:a,team:s,projectId:i,source:r,onSuccess:n,onClose:l,onError:o,upgradeTeamModalStore:c}=t,d=s?.billing?.plan??"hobby",u=s?.billing?.planIteration;e({team:s,projectId:i,plan:d,planIteration:u,source:r,currency:s?.billing?.currency??"USD",isTrialing:"pro"===d&&s?.billing?.status==="trialing",isPlusEnabled:a,onSuccess:n,onError:o,onClose:l,upgradeTeamModalStore:c})},open:async a=>{e(Y);let{isPlusEnabled:s,isProcessing:i,doNext:r,plan:n,onClose:l,onSuccess:o}=t();(!1===a||"enterprise"===n||"pro"===n&&s)&&!i&&(l?.(),await r(),o?.("included"))},select:a=>{let{plan:s,projectId:i}=t();e({selectedOption:a,addOnToBeEnabled:{type:"pro"===s?"webAnalyticsPlus":"webAnalytics",additionalConfigurations:{projectId:i,source:"enable-modal"}}})},startProcessing:()=>e({isProcessing:!0}),stopProcessing:()=>e({isProcessing:!1}),doNext:async()=>{let{addOnToBeEnabled:a,isTrialing:s,onClose:i,onSuccess:r,plan:n,projectId:l,selectedOption:o,step:c,team:d,upgradeTeamModalStore:u,source:p,onError:m}=t();function x(){e({isProcessing:!0})}function h(){e({isProcessing:!1})}if("confirm"===c||"included"===o)try{x(),await (0,J.enableWebAnalytics)({team:d,projectId:l,withPlus:"addon"===o,source:p}),r?.(o)}catch(e){m?.(e?.message??"Unknown error")}finally{h(),i?.()}else"pro"!==n||s?(i?.(),e({step:"closed"}),u?.open({source:K,teamHint:d?.id,trialBehavior:"disallow-trial",forceImmediateUpgrade:s,addOn:a,onConversionStart:x,onConversionError:h,onConversionSuccess:()=>{h(),r?.(o)},disabledSteps:["team-members"]}),Q.analytics.track(z.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:n,type:"enable-modal"})):e({step:"confirm"})}}));function X(e){let{onClose:a}=e,{currency:s,isProcessing:i,plan:r,planIteration:n,selectedOption:l,select:o,doNext:c}=Z(),d=Z(e=>(function(e){let{selectedOption:a}=e;return"included"===a?{label:"Enable"}:{label:"Continue",type:"secondary",suffix:(0,t.jsx)(B.ArrowRight,{})}})(e));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(W.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(W.Modal.Header,{children:(0,t.jsx)(W.Modal.Title,{children:"Enable Web Analytics"})}),(0,t.jsx)("p",{className:"text-label-13 text-gray-900",style:{marginBottom:"0.5rem"},children:"Options"}),(0,t.jsxs)(E.ChoiceboxGroup,{direction:"column",label:"plan",onChange:e=>{o(e)},type:"radio",value:l,children:[(0,t.jsx)(R,{plan:r,planIteration:n}),"pro"===r?(0,t.jsx)(H,{currency:s}):(0,t.jsx)($,{currency:s})]})]}),(0,t.jsxs)(W.Modal.Actions,{children:[(0,t.jsx)(W.Modal.Action,{onClick:a,type:"secondary",children:"Cancel"}),(0,t.jsx)(W.Modal.Action,{loading:i,onClick:()=>void c(),suffix:d.suffix,type:d.type,children:d.label})]})]})}function ee(e){let{project:s,active:i,onClose:r,onEnabling:n,source:l}=e,{mutate:o}=(0,F.useSWRConfig)(),{isProcessing:c,setProps:d,step:u,open:p,doNext:m,startProcessing:x,stopProcessing:h}=Z(),y=(0,O.useToasts)(),f=(0,P.useRouter)(),g=(0,I.useOpenUpgradeModal)(),j=(0,I.useUpgradeModalIsOpen)(),{enableWebAnalyticsPlus:v,WebAnalyticsPlusModal:b,isWebAnalyticsPlusEnabled:S}=(0,D.useToggleWebAnalyticsPlus)({source:K,skipPostConfirm:!0,onStart:x,onSuccess:()=>void m(),onClose:()=>{r(),h()}}),{team:w,isTeam:N}=(0,L.useTeam)();return(0,a.useEffect)(()=>d({team:w,projectId:s.id,source:l,upgradeTeamModalStore:{isOpen:j,open:g},isPlusEnabled:S,onClose:r,onSuccess(){let e=new URL(window.location.toString());e.searchParams.delete("enable"),(0,_.revalidateProject)(o,s),f.replace(e.toString()),f.refresh()},onError(e){y.error(e)}}),[S,r,g,s,f,d,w,l,j,o,y.error]),(0,a.useEffect)(()=>n?.(c),[c,n]),(0,a.useEffect)(()=>{i&&p(N)},[i,p,N]),(0,a.useEffect)(()=>{"confirm"===u&&i&&v?.()},[i,v,u]),"choose"===u?(0,t.jsx)(W.Modal.Modal,{active:i,onClickOutside:r,children:(0,t.jsx)(X,{onClose:r})}):b}function et(e){let s=(0,T.useCanToggleWebAnalytics)(),i=(0,P.useSearchParams)(),[r,n]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),c=(0,a.useCallback)(()=>n(!1),[n]),d=(0,a.useCallback)(()=>n(!0),[n]);return(0,a.useEffect)(()=>{i?.get("enable")==="1"&&n(!0)},[i]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.Tooltip,{text:s?void 0:"Additional permissions are required to enable this feature.",children:(0,t.jsx)(j.Button,{disabled:!s,loading:l,onClick:d,width:120,children:"Enable"})}),e.project?(0,t.jsx)(A.CompatRouterAllowed,{children:(0,t.jsx)(ee,{active:r,onClose:c,onEnabling:e=>o(e),project:e.project,source:i?.get("source")??void 0})}):null]})}function ea(e){let{project:a}=e;return(0,t.jsx)(y,{cards:[{icon:(0,t.jsx)(v.Analytics,{}),title:"Real-time insights into your traffic",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Ensure smooth performance with real-time bandwidth analysis."})},{icon:(0,t.jsx)(N.Lightning,{}),title:"Deeper insights with custom events",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Track whatever is relevant for your website."})},{icon:(0,t.jsx)(k.Shield,{}),title:"Respects visitor privacy",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Web Analytics doesn't rely on cookies and doesn't store personal information."})},{icon:(0,t.jsx)(w.Globe,{}),title:"First-party, at the edge",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Data is collected through your own domain."})},{icon:(0,t.jsx)(b.CodeBlock,{}),title:"Easy integration",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Start collecting data with one line of code. Supports all major frameworks."})},{icon:(0,t.jsx)(S.Gauge,{}),title:"Your site stays fast",children:(0,t.jsx)("p",{className:"text-copy-14",children:"The light-weight trackings script is less than 5kb."})}],description:"Collect valuable insights on user behavior and site performance with detailed page view metrics. Gain knowledge on top pages.",title:(0,t.jsxs)("h1",{className:"text-[32px] leading-[40px] tracking-[-0.79px] font-medium",children:[" ","Web Analytics"," "]}),children:(0,t.jsxs)("span",{className:"flex items-center gap-3",children:[(0,t.jsx)(et,{project:a}),(0,t.jsx)(j.Button,{type:"tertiary",children:(0,t.jsx)(g.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",children:"Limits & Pricing"})})]})})}function es(){let{isFeatureEnabled:e}=(0,c.useWebAnalyticsContext)();return e?(0,t.jsx)(p,{}):(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(ea,{project:null}),children:(0,t.jsx)(ei,{})})}function ei(){let{data:e}=(0,l.useCurrentDashboardProject)();return(0,t.jsx)(ea,{project:e})}e.s(["DynamicHeading",()=>es],7906826)},5670055,e=>{"use strict";var t=e.i(1146226),a=e.i(7577497),s=e.i(3306538),i=e.i(2504781),r=e.i(57106),n=e.i(7917902),l=e.i(119294),o=e.i(6352514),c=e.i(2065543),d=e.i(5169864),u=e.i(2590593),p=e.i(205804),m=e.i(4394132),x=e.i(9834685),h=e.i(963717),y=e.i(5104554),f=e.i(933103),g=e.i(9928621),j=e.i(9576722),v=e.i(916685),b=e.i(188217),S=e.i(5307161),w=e.i(579135);function N(){return(0,t.jsx)(d.Suspense,{fallback:(0,t.jsx)(T,{loading:!0,items:[],type:m.AnalyticsType.Visitors}),children:(0,t.jsx)(A,{children:(0,t.jsx)(k,{})})})}function k(){let{filter:e,setFilter:a,removeFilter:s,toggleFilter:i}=(0,x.useWebAnalyticsFilter)(),r=(0,h.useFilterProps)("flags"),n=Object.keys(e).length>0,l="hobby"===(0,S.useBillingPlan)(),{hasData:o}=(0,g.useWebAnalyticsContext)(),{showPlaceholder:c}=(0,j.useWebAnalyticsStatus)(),p=(0,b.useGenericOptions)(),{range:m}=p,[w]=(0,f.useWebAnalyticsQueryState)(),N=w.tab,k=(0,d.useMemo)(()=>{let e=w.filter.flags;if(e)return(0,f.isPropertiesFilterValue)(e)?Object.keys(e.properties)[0]:e.values[0]},[w.filter.flags]),{data:A,isLoading:P}=(0,v.useTopStatsData)({type:"flags",...p,jsonProperty:k},{fallbackData:o?void 0:{data:[]}}),I=(0,d.useMemo)(()=>l?[]:A,[A,l]);return(0,t.jsx)(T,{...r,filterTags:r.filterTags,items:I,loading:P,onRowClick:t=>{e.flags?(0,f.isPropertiesFilterValue)(e.flags)?i({flags:{properties:{[k??""]:t.key},operator:"eq"}}):a({flags:{properties:{[k??""]:t.key},operator:"eq"}}):i({flags:{values:[t.key],operator:"eq"}})},range:m,renderEmptyState:()=>n?(0,t.jsx)(y.EmptyState,{hasFilter:!0}):(0,t.jsx)(C,{}),renderFilterTag:e=>2===e.length?(0,t.jsx)(u.FilterTag,{onRemoveTag:()=>{s("flags",e[0])},value:e[0],children:e.join(": ")}):(0,t.jsx)(u.FilterTag,{onRemoveTag:()=>{s("flags")},value:e[0],children:e[0]}),skeleton:c,type:N})}function T(e){return(0,t.jsx)(u.Panel,{filterTags:[],...e,description:"Which flags are recorded the most",limit:5,renderItemTitle:e=>e.key||"Unknown",title:"Flags",titleBadge:(0,t.jsx)(s.Badge,{size:"sm",variant:"pink",children:"Beta"}),totalCountLabel:"Total",valueDisplayMode:"all-values"})}function A(e){let{children:a}=e,{user:s,team:i}=(0,n.useAccount)(),r=i||s,c=r?.billing?.plan||"hobby",d=(0,w.useCurrentProjectNameAndId)();return(0,t.jsx)("div",{className:"tailwind flex-1",onClick:()=>{setTimeout(()=>{let e=!1;try{let t=JSON.parse(new URL(location.href).searchParams.get("filter")||"{}");e="flags"in t}catch{}l.analytics.track(o.AnalyticsEvent.ANALYTICS_CLICKED_ON_FLAGS,{currentPlan:c,projectId:d?.id,teamId:i?.id||s?.uid,hasFlagsFilter:e})},100)},children:a})}function C(e){let{requiresUpgrade:s,onClickUpgrade:n,requiresCreation:l}=e;return(0,t.jsx)("div",{className:p.default["empty-state-wrapper"],children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{className:"flex size-[42px] items-center justify-center rounded-full border border-gray-100 p-2 text-gray-800",children:(0,t.jsx)(c.ToggleOnAlt,{size:16})}),(0,t.jsx)("h4",{className:"font-semibold text-gray-1000",children:"No flags"}),(0,t.jsxs)("div",{className:p.default["empty-state-description"],children:[(0,t.jsx)(a.Balancer,{children:"Gain insights into how active feature flags impact user behavior."}),(0,t.jsx)("div",{style:{marginTop:2},children:(0,t.jsxs)(a.Balancer,{children:[s?(0,t.jsxs)(t.Fragment,{children:[l?"Create ":"Upgrade to "," a ",(0,t.jsx)("b",{children:"Pro"})," ","team to access this feature."," "]}):(0,t.jsx)(t.Fragment,{children:"Get started by setting up flag tracking. "}),(0,t.jsx)(r.Link,{external:!0,href:"/docs/feature-flags/integrate-with-web-analytics",variant:"highlight",children:"Learn more"})]})}),s?(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"flex flex-col items-center justify-start flex-initial",children:(0,t.jsx)("div",{style:{marginTop:"var(--geist-gap-half)"},children:(0,t.jsx)(i.Button,{onClick:n,size:"small",children:l?"Create a team":"Upgrade to Pro"})})})}):null]})]})})}e.s(["TopFlags",()=>N])},2090290,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),s=e.i(188217),i=e.i(916685),r=e.i(4597921),n=e.i(5806401),l=e.i(2504781),o=e.i(8735244),c=e.i(5255926),d=e.i(3306538),u=e.i(6942035),p=e.i(6143247),m=e.i(9722978),x=e.i(3683485),h=e.i(7432042),y=e.i(3285452),f=e.i(1933683),g=e.i(3884708),j=e.i(7399351),v=e.i(376725),b=e.i(9459801);let S=e=>{let a,{url:s,className:i}=e;try{a=new URL(s).hostname.replace("www.","")}catch{a=s}return(0,t.jsxs)("div",{title:s,className:(0,m.default)(i,"flex items-center space-x-1.5 text-xs text-gray-700 bg-white shadow-sm rounded-full px-2 py-1"),children:[(0,t.jsx)(v.Favicon,{url:s,size:14}),(0,t.jsx)("span",{className:"truncate",children:a})]})},w=e=>{let t="undefined"!=typeof navigator?navigator.language:"en-US";return e.toLocaleTimeString(t,{hour:"numeric",minute:"numeric"})},N=e=>e?(0,h.default)(1e3*e,{long:!0}):"",k=e=>e.toISOString().split("T")[0],T=e=>t=>{if(0===t.length)return[];let a=[],s=[t[0]];for(let i=1;i<t.length;i++){let r=t[i];e(s[s.length-1],r)?s.push(r):(a.push(s),s=[r])}return a.push(s),a},A=T((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()<(0,h.default)("30m")),C=T((e,t)=>{let a=e?.[0]?.[0],s=t?.[0]?.[0];return!!a&&!!s&&k(a.timestamp)===k(s.timestamp)}),P=e=>{let{event:a,active:s,onClick:i,showTime:r=!0}=e,n="pageview"===a.type,l=n?a.route||a.path:"event"===a.type?a.eventName:"Unknown Event",o;return(0,t.jsxs)("div",{className:(0,m.default)("relative w-full first:rounded-t last:rounded-b","transition-all duration-200",s?"bg-blue-50 shadow-md":"bg-white hover:bg-gray-50"),children:[(0,t.jsxs)("button",{type:"button",onClick:i,className:(0,m.default)("flex items-center w-full px-2 py-1.5 pr-4 text-left bg-transparent","cursor-pointer transition-all duration-200",s&&"transform translate-y-1"),children:[(0,t.jsxs)("div",{className:(0,m.default)("flex items-center justify-center w-8 h-8 mr-1 relative",n?"text-blue-500":"text-amber-500"),children:[(0,t.jsx)("div",{className:(0,m.default)("absolute inset-0 rounded-full transition-all duration-200",n?"bg-blue-500":"bg-amber-500",s?"opacity-20":"opacity-0 hover:opacity-10")}),n?(0,t.jsx)(f.Eye,{color:"currentColor",className:"w-4 h-4"}):(0,t.jsx)(g.Lightning,{color:"currentColor",className:"w-4 h-4"})]}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-1000 truncate",children:n?(0,t.jsx)(I,{route:a.route||"",path:a.path}):l}),!n&&"event"===a.type&&a.eventData&&(0,t.jsx)("p",{className:"text-xs text-gray-700 truncate",children:Object.entries(a.eventData).filter(e=>{let[t]=e;return"eventName"!==t}).map(e=>{let[t,a]=e;return`${t}: ${a}`}).join("  ")})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-700",children:[o&&(0,t.jsx)("span",{children:N(o)}),s?(0,t.jsx)(j.ChevronUp,{color:"gray-700",className:"w-4 h-4"}):r&&(0,t.jsx)("span",{children:w(a.timestamp)})]})]})})]}),s&&(0,t.jsxs)("div",{className:"px-3 pb-3 text-xs text-gray-800",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Time:"})," ",w(a.timestamp)]}),n&&o&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Duration:"})," ",N(o)]})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Event Data:"}),(0,t.jsx)("pre",{className:"mt-1 text-xs bg-white p-2 rounded bg-background-200 overflow-x-auto",children:JSON.stringify("event"===a.type?{path:a.path,route:a.route,referrer:a.referrer,queryParams:a.queryParams,eventName:a.eventName,eventData:a.eventData}:{path:a.path,route:a.route,referrer:a.referrer,queryParams:a.queryParams},null,2)})]})]})]})},I=e=>{let{route:a,path:s,className:i}=e;return(0,t.jsx)("div",{className:(0,m.default)("flex truncate relative",i),title:s,children:(0,t.jsx)("span",{className:"text-gray-1000 mr-2",children:(0,t.jsx)(b.RouteHighlighter,{route:a||s,path:s})})})},D=e=>{let{className:a}=e;return(0,t.jsx)("div",{className:(0,m.default)("flex items-center justify-start px-6",a),children:(0,t.jsx)("div",{className:"w-px h-2 bg-gray-300"})})},_=e=>{let{pageGroup:a,activeEventId:s,onEventClick:i,direction:r}=e,n=[...a].sort((e,t)=>e.type!==t.type?"pageview"===e.type?-1:1:e.timestamp.getTime()-t.timestamp.getTime()),l=e=>e.toLocaleTimeString([],{hour:"numeric",minute:"numeric"});return(0,t.jsx)("div",{className:(0,m.default)("bg-white rounded-md shadow-sm overflow-hidden flex divide-y divide-gray-200","asc"===r?"flex-col-reverse":"flex-col"),children:n.map((e,a)=>{let r=0===a||l(e.timestamp)!==l(n[a-1].timestamp);return(0,t.jsx)(P,{event:e,active:s===E(e),onClick:()=>i(E(e)),showTime:r},E(e))})})},L=e=>{let{referrer:a}=e;return(0,t.jsx)("div",{className:"relative flex flex-col items-start ml-2",children:a?(0,t.jsx)(S,{url:a}):(0,t.jsx)("div",{className:"flex items-center space-x-1.5 text-xs text-gray-700 bg-white shadow-sm rounded-full px-2 py-1",children:(0,t.jsx)("span",{children:"Direct"})})})},W=e=>{let{session:s,activeEventId:i,onEventClick:r,direction:n}=e,l=[...s].sort((e,t)=>{let a=e[0],s=t[0];return a&&s?a.timestamp.getTime()-s.timestamp.getTime():0}),o=l[0],c=o?.[0],d=c?.referrer;return(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:(0,m.default)("pl-1.5 flex","asc"===n?"flex-col-reverse":"flex-col"),children:[(0,t.jsx)(L,{referrer:d}),(0,t.jsx)(D,{}),l.map((e,s)=>(0,t.jsxs)(a.default.Fragment,{children:[(0,t.jsx)(_,{pageGroup:e,activeEventId:i,onEventClick:r,direction:n},E(e[0])),s<l.length-1&&(0,t.jsx)(D,{})]},E(e[0])))]})})},O=e=>{let{day:s,activeEventId:i,onEventClick:r,direction:n}=e,l=s?.[0]?.[0]?.[0];if(!l)return null;let o=(e=>{let t=new Date,a=new Date(t);if(a.setDate(t.getDate()-1),k(e)===k(t))return"Today";{if(k(e)===k(a))return"Yesterday";let t="undefined"!=typeof navigator?navigator.language:"en-US";return e.toLocaleDateString(t,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}})(l.timestamp),c=s.flat().flat().length,d=[...s].sort((e,t)=>{let a=e[0]?.[0],s=t[0]?.[0];return a&&s?a.timestamp.getTime()-s.timestamp.getTime():0});return(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"sticky top-0 z-10 flex items-center justify-center py-2 bg-gradient-to-b from-background-200 to-transparent",children:(0,t.jsxs)("div",{className:"px-3 py-1 bg-gray-300 text-gray-1000 text-xs font-medium rounded-full",children:[o,"  ",c," events"]})}),(0,t.jsx)("div",{className:(0,m.default)("max-w-2xl mx-auto flex gap-10 pt-10","asc"===n?"flex-col-reverse":"flex-col"),children:d.map(e=>(0,t.jsx)(a.default.Fragment,{children:(0,t.jsx)(W,{session:e,activeEventId:i,onEventClick:r,direction:n})},E(e[0][0])))})]})},F=e=>{let{direction:a,onClick:s}=e;return(0,t.jsx)("button",{type:"button",onClick:s,className:(0,m.default)("flex items-center justify-center w-10 h-10 bg-white border border-gray-300 rounded-lg","hover:bg-gray-100 active:bg-gray-100 transition-colors duration-200","text-gray-800 hover:text-gray-900","bg-transparent"),children:(0,t.jsx)(y.ArrowDown,{className:(0,m.default)("w-5 h-5 transition-transform duration-200","asc"===a&&"rotate-180")})})},E=e=>{let t="pageview"===e.type?{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams}:"event"===e.type?{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams,eventName:e.eventName,eventData:e.eventData}:{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams};return`${e.type}-${e.timestamp.getTime()}-${JSON.stringify(t).split("").reduce((e,t)=>e+t.charCodeAt(0),0)}`};function B(e){let{events:s=[]}=e,[i,r]=(0,a.useState)("desc"),[n,l]=(0,a.useState)(null),o=(0,a.useMemo)(()=>{let e=[...s].sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime()),t=e=>{let t=[],a=[];for(let s of e)"pageview"===s.type?(a.length>0&&t.push(a),a=[s]):0===a.length?t.push([s]):a.push(s);return a.length>0&&t.push(a),t};return[...(0,x.pipe)(e,A,e=>e.map(t),C)].reverse()},[s]),c=e=>{l(t=>t===e?null:e)};return 0===o.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-700",children:"No events found"})}):(0,t.jsxs)("div",{className:"bg-background-200",children:[(0,t.jsx)("div",{className:"absolute top-12 right-4 z-20",children:(0,t.jsx)(F,{direction:i,onClick:()=>{r(e=>"asc"===e?"desc":"asc")}})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:o.map((e,a)=>{let s=e?.[0]?.[0]?.[0];return(0,t.jsx)(O,{day:e,activeEventId:n,onEventClick:c,direction:i},s?E(s):`day-${a}`)})})]})}var U=e.i(2590593),R=e.i(205804),M=e.i(7950227),H=e.i(7946377);let q=e=>{let{user:a,onClick:s}=e;return(0,t.jsxs)("div",{className:"flex items-center px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 gap-3",onClick:s,role:"button",tabIndex:0,children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-copy-14 text-xs font-medium text-gray-600",children:a.id.slice(-3).toUpperCase()})}),(0,t.jsx)("p",{className:"text-copy-14 truncate font-medium text-sm ml-2",children:"Anonymous"}),(0,t.jsxs)("p",{className:"text-copy-14 text-xs text-gray-700 ml-4 flex items-center gap-2",children:[(0,t.jsx)(M.Flag,{countryCode:a.country.toUpperCase()}),(0,H.getCountryName)(a.country)]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("p",{className:"text-copy-14 truncate text-xs text-gray-500 ml-1",children:["#",a.id.slice(-8)]}),(0,t.jsxs)("p",{className:"text-copy-14 text-xs text-gray-700 ml-4",children:[a.events," events"]}),(0,t.jsx)("p",{className:"text-copy-14 text-xs text-gray-500 ml-auto w-20 text-right",children:(e=>{let t=Math.floor((new Date().getTime()-e.getTime())/36e5);if(t<1)return"Just now";{if(t<24)return`${t}h ago`;let e=Math.floor(t/24);return`${e}d ago`}})(a.lastActivity)})]})},G=()=>(0,t.jsxs)("div",{className:(0,m.clsx)("flex flex-col items-stretch justify-start tailwind flex-1",R.default.container),children:[(0,t.jsx)(U.PanelHeader,{title:"User Journeys",titleBadge:(0,t.jsx)(d.Badge,{size:"sm",variant:"gray",children:"Internal"}),description:"User journey data",className:"min-h-[73px]",labels:["Last Seen"]}),(0,t.jsx)("div",{className:"flex flex-col my-2",children:Array.from({length:5},(e,t)=>`skeleton-${t}`).map(e=>(0,t.jsx)("div",{className:"flex items-center px-3",style:{height:40},children:(0,t.jsx)(c.Skeleton,{animated:!0,height:32,style:{opacity:.5,width:"100%"}})},e))})]}),$=e=>{let{user:a,onClose:s,events:i,loading:r=!1}=e;return a?(0,t.jsxs)(n.Sheet,{onOpenChange:e=>!e&&s(),open:!!a,children:[(0,t.jsx)(n.SheetOverlay,{}),(0,t.jsx)(n.SheetContent,{className:(0,p.cn)("m-3 h-[calc(100%-1.5rem)] w-[calc(100%-1.5rem)] rounded-[1rem] bg-white p-0 lg:w-3/4 sm:max-w-[auto] overflow-hidden"),side:"right",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-copy-14 text-sm font-bold text-gray-600",children:a.id.slice(-3).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-copy-14 text-lg font-bold",children:"Anonymous User"}),(0,t.jsxs)("p",{className:"text-copy-14 text-sm text-gray-700",children:["#",a.id.slice(-8)]}),(0,t.jsx)("p",{className:"text-copy-14 text-sm text-gray-600",children:a.country})]})]}),(0,t.jsx)(l.Button,{"aria-label":"Close",className:"!px-1.5",onClick:s,size:"medium",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(u.Cross,{})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto bg-background-200",children:r?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(o.Spinner,{}),(0,t.jsx)("p",{className:"text-copy-14 ml-2 text-sm text-gray-600",children:"Loading events..."})]}):(0,t.jsx)(B,{events:i})})]})})]}):null};function V(e){let{users:a=[],loading:s=!1,onClickUser:i}=e;return s?(0,t.jsx)(G,{}):(0,t.jsxs)("div",{className:(0,m.clsx)("flex flex-col items-stretch justify-start tailwind flex-1",R.default.container),children:[(0,t.jsx)(U.PanelHeader,{title:"User Journeys",titleBadge:(0,t.jsx)(d.Badge,{size:"sm",variant:"gray",children:"Internal"}),description:"User journey data",labels:["Last Seen"],className:"min-h-[73px]"}),(0,t.jsx)("div",{className:"flex flex-col",children:0===a.length?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("p",{className:"text-copy-14 text-sm text-gray-600",children:"No users found"})}):a.slice(0,6).map(e=>(0,t.jsx)(q,{user:e,onClick:()=>i?.(e)},e.id))})]})}var z=e.i(409142);function Q(){return(0,r.useServerFlag)("enable-analytics-journey-view",!1)?(0,t.jsx)(a.Suspense,{fallback:null,children:(0,t.jsx)(J,{})}):null}function J(){let{state:e,set:r}=(0,z.useSearchParamsState)({userId:{defaultValue:void 0}}),[n,l]=(0,a.useState)(null),o=(0,s.useGenericOptions)(),{data:c,isLoading:d}=(0,i.useUserList)({...o}),{data:u,isLoading:p}=(0,i.useUserEvents)({...o,userId:e.userId??""}),m=e.userId&&u?.events||[];return(0,t.jsxs)("div",{children:[(0,t.jsx)(V,{users:c?.users||[],loading:d,onClickUser:e=>{l(e),r({userId:e.id})}}),(0,t.jsx)($,{events:m,user:n,loading:p,onClose:()=>{l(null),r({userId:void 0})}})]})}e.s(["UserList",()=>Q],2090290)}]);

//# debugId=4f2345f8-d984-af2b-5935-0fc724241cfb
//# sourceMappingURL=d1804433fe6c9509.js.map