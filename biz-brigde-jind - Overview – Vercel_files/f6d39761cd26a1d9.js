;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="4300cabe-e84d-c55b-9d12-d8331ac5dc6e")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1721982,e=>{"use strict";var i=e.i(1146226),n=e.i(2504781),t=e.i(5468328),a=e.i(5169864),r=e.i(4110479),s=e.i(5338940),o=e.i(1717203),l=e.i(7557283),d=e.i(455575),c=e.i(7837522),u=e.i(7780974),p=e.i(3089600),g=e.i(4011256),b=e.i(7589392);let y="Add Drain";function D(e){let{teamSlug:D,projectIdOrSlug:x,size:f,type:j,onDrainCreated:C}=e,h=function(e){let{teamSlug:i,projectIdOrSlug:n}=e,{isOpen:t,drain:b,closeModal:y,setIsOpen:D}=(0,r.useDrainModalContext)(),{team:x,isLoading:f}=(0,s.useTeam)(),{can:j,isLoading:C}=(0,o.default)(),{success:h}=(0,d.useToasts)(),{track:v}=(0,c.useTrackActivity)(),[A,M]=(0,a.useState)(void 0),k=(0,a.useRef)(void 0),m=x?.billing?.plan==="hobby",T=x?.billing?.plan==="pro"&&"trialing"===x.billing.status,O=j(l.Action.Create,l.Resource.Drain)&&!(m||T),B=f||C,S=(0,a.useCallback)(e=>{v(u.VercelActivityAction.DrainsModalOpened,{source:e}),k.current=e,D(!0)},[v,D]),L=(0,a.useCallback)(e=>{v(u.VercelActivityAction.DrainsModalConverted,{source:k.current,drainType:e.drainType,kind:e.kind,isLegacy:e.isLegacy}),k.current=void 0},[v]),z=(0,a.useCallback)(e=>{k.current=e},[]),R=(0,a.useCallback)(e=>{h({text:"Drain successfully added",action:"Open integration page",actionHref:(0,g.getInstallationDetailsLink)({teamSlug:i,configurationId:e.id,integrationSlug:e.slug,isMarketplace:!1})})},[i,h]);return(0,p.default)("create",(e,i)=>{"1"===e&&M(i?.source??"query-create")},["source"]),(0,a.useEffect)(()=>{A&&!B&&(O&&S(A),M(void 0))},[A,S,B,O]),{isOpen:t,drain:b,closeModal:y,setIsOpen:D,isLoading:B,canAccess:O,isHobby:m,isProTrial:T,teamSlug:i,projectIdOrSlug:n,openDrainsModal:S,onDrainCreated:L,setLastSource:z,handleExternalIntegrationInstalled:R}}({teamSlug:D,projectIdOrSlug:x});return h.isLoading?(0,i.jsx)(n.Button,{size:f,type:j,disabled:!0,children:y}):h.canAccess?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.Button,{size:f,type:j,onClick:()=>h.openDrainsModal("connect-resource-button"),children:y}),(0,i.jsx)(b.DrainModals,{isOpen:h.isOpen,closeModal:h.closeModal,teamSlug:D,projectIdOrSlug:x,onDrainCreated:async e=>{h.onDrainCreated(e),await C?.(e)},drain:h.drain})]}):(0,i.jsx)(t.Tooltip,{desktopOnly:!0,text:h.isHobby||h.isProTrial?"Upgrade your plan to enable Drains":"You need additional permissions to enable Drains for your team",children:(0,i.jsx)(n.Button,{size:f,type:j,disabled:!0,children:y})})}function x(e){let{teamSlug:n,projectIdOrSlug:t,resource:a,size:s,type:o,onDrainCreated:l}=e;return(0,i.jsx)(r.DrainModalProvider,{initialResource:a,children:(0,i.jsx)(D,{teamSlug:n,projectIdOrSlug:t,size:s,type:o,onDrainCreated:l})})}e.s(["AddDrainButton",()=>x],1721982)},184899,e=>{"use strict";var i=e.i(1146226),n=e.i(8674454),t=e.i(6694387),a=e.i(4991687),r=e.i(2560270);function s(){let{size:e,type:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.jsxs)(a.MenuContainer,{children:[(0,i.jsx)(t.MenuButton,{disabled:!0,size:e,type:s,suffix:(0,i.jsx)(r.ChevronDown,{}),children:"Add Drain"}),(0,i.jsx)(n.Menu,{className:"min-w-[300px]"})]})}e.s(["DisabledButton",()=>s])}]);

//# debugId=4300cabe-e84d-c55b-9d12-d8331ac5dc6e
//# sourceMappingURL=c75e654f41e86126.js.map