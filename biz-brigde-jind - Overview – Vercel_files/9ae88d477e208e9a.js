;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="1d6b031e-5810-d9d0-0025-b923bb41f818")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4670733,e=>{"use strict";var t=e.i(5169864),a=e.i(5297230),r=e.i(1360174),i=e.i(6539082),n=e.i(5140444),s=e.i(5338940),o=e.i(588428);let l="vercel:ldFlags",c=(0,a.default)(()=>{let e=i.localStorageWrapper.getItem(l);if(e)return JSON.parse(e)}),d=(0,r.default)(e=>{i.localStorageWrapper.setItem(l,JSON.stringify(e))},1e3),u=()=>{let{flags:e,isLoading:a,mutate:r,isLoggedOut:s}=(0,n.useUser)(),o=(0,t.useMemo)(()=>e??c(),[e]);return(0,t.useEffect)(()=>{e&&(d(e),c.cache.set(void 0,e))},[e]),(0,t.useEffect)(()=>{s&&(i.localStorageWrapper.removeItem(l),c.cache.clear?.(),d.cancel())},[s]),{flags:o,isReady:!a&&void 0!==o,mutate:r}},m=e=>{let{flags:t,isReady:a,mutate:r}=u();return{isReady:a,value:t?.[e]??null,mutate:()=>r().then(t=>({isReady:a,value:t?.flags?.[e]??null}))}};e.s(["useAllAccountTypeBadgesFlag",0,()=>m("show-all-account-type-badges"),"useEmailNotificationRulesFlag",0,()=>{let{isReady:e,value:t}=m("email-notification-rules");return{isReady:e,value:!!t}},"useEnableAiDomainSearchFlag",0,()=>{let{isReady:e,value:t}=m("enable-ai-domain-search");return{isReady:e,value:t??!0}},"useEnableAnsiLogs",0,()=>{let e=(0,s.useTeam)(),t=(0,o.useLaunchDarklyTeamFeatureFlag)("ansi-logs"),a=m("ansi-logs");return{isReady:e.isTeam?t.isReady:a.isReady,value:!!(e.isTeam?t.value:a.value)}},"useEnableSecureComputeSelfServiceFlag",0,()=>(0,o.useLaunchDarklyTeamFeatureFlag)("secure-compute-self-service"),"useFeedbackVariantsDeployStep",0,()=>{let{isReady:e,value:t}=(0,o.useLaunchDarklyTeamFeatureFlag)("feedback-variants-deploy-step"),{isReady:a,value:r}=m("feedback-variants-deploy-step");return(e&&t||a&&r)??!1},"useInstantRollbackHobbyRestrictionFlag",0,()=>m("instant-rollback-hobby-restriction"),"useIsOemPartner",0,()=>m("is-oem-partner"),"useLaunchDarklyFeatureFlag",0,m,"useLaunchDarklyFlags",0,u,"useManualGitDeployFlag",0,()=>{let e=(0,s.useTeam)(),t=(0,o.useLaunchDarklyTeamFeatureFlag)("manual-git-deploys"),a=m("manual-git-deploys");return{isReady:e.isTeam?t.isReady:a.isReady,value:!!(e.isTeam?t.value:a.value)}},"useMonitoringExitSurveyFlag",0,()=>m("monitoring-exit-survey"),"useNetCpuFunctionsFlag",0,e=>{let t=(0,o.useLaunchDarklyTeamFeatureFlag)("net-cpu-functions"),a=(0,o.useLaunchDarklyTeamFeatureFlag)("net-cpu-billing-for-functions-projects"),r="string"==typeof a.value?a.value.split(",").map(e=>e.trim()):[];return{isReady:t.isReady&&a.isReady,value:!!t.value||r?.includes(e)}},"useNewFeedbackSharingModal",0,()=>(0,o.useLaunchDarklyTeamFeatureFlag)("feedback-sharing-modal"),"useOpenTelemetryApiScopeFlag",0,()=>m("open-telemetry-api-scope"),"useShowCronJobsSummary",0,()=>{let{isReady:e,value:t}=(0,o.useLaunchDarklyTeamFeatureFlag)("cron-jobs-deploy-summary"),{isReady:a,value:r}=m("cron-jobs-deploy-summary");return(e&&t||a&&r)??!1},"useStorageEnterpriseFlag",0,e=>{let t=(0,o.useLaunchDarklyTeamFeatureFlag)("storage-enterprise",e),a=t.value?.split(",").map(e=>e.trim()).filter(Boolean)||[];return{isReady:t.isReady,isStorageEnterpriseEnabled:e=>{let{storeType:r,isUnbundled:i,isTrialing:n}=e;return"edge-config"===r||"integration"===r||!!i||!!n||t.isReady&&a.includes(r)}}},"useTrustedIpsCustomLimitFlag",0,()=>{let e=(0,o.useLaunchDarklyTeamFeatureFlag)("trusted-i-ps-custom-limit");return{isReady:e.isReady,value:e.value}},"useVercelAppsFlag",0,()=>{let e=(0,o.useLaunchDarklyTeamFeatureFlag)("vercel-apps");return{isReady:e.isReady,value:!!e.value}}])},5463680,6769352,e=>{"use strict";e.i(6356390),e.i(15312);var t=e.i(7897830);e.i(39509);var a=e.i(1146226),r=e.i(2504781),i=e.i(5468328);e.i(3182268);var n=e.i(7849855);e.i(6887680);var s=e.i(6810699),o=e.i(1414602),l=e.i(5074599);function c(e){let{onSuccess:c,protocolType:u,label:m,hideIfHasNoStores:g=!0,buttonType:f="default"}=e,{projectSlug:p}=(0,n.useProjectAndTeamSlug)(),{data:h}=(0,s.useResourceList)({projectSlug:p,protocolType:u}),{openBrowseProducts:v}=(0,t.useResourceModals)({onSuccess:c}),{permissions:x,isLoading:y}=(0,o.useResourcePermissions)();if(y)return(0,a.jsx)(d,{});let E=!!(h&&h.stores.length>0);return g&&!E?(0,a.jsx)(d,{}):(0,a.jsx)(i.Tooltip,{disableTriggers:x.create,text:(0,l.missingPermissionLabel)("create",u),children:(0,a.jsx)(r.Button,{disabled:!x.create,onClick:()=>v("browse-new"),type:f,typeName:"button",children:m??(0,l.createResourceButtonLabel)(u)})})}function d(){return(0,a.jsx)("div",{style:{height:40}})}e.s(["CreateResourceButton",()=>c],6769352),e.s([],5463680)},7037808,e=>{"use strict";e.i(2014455),e.i(8824424),e.i(7137779),e.i(5098510),e.i(2483721),e.s([])},5377189,e=>{"use strict";var t=e.i(5924191),a=e.i(1717203);e.i(717172);var r=e.i(5993275);function i(e){let{storeType:i,teamSlug:n}=e,{fallback:s}=(0,t.useSWRConfig)(),{can:o,isLoading:l}=(0,a.default)(),c=n?s[i?`store:preload-data:${n}`:`store:list-preload-data:${n}`]:null;return{permissions:c?.permissions??(0,r.getStoreItemPermissions)({storeType:i,can:o,isLoading:l})}}e.s(["useStorePermissions",()=>i],5377189)},1000921,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 7.25H4.5V8.75H5.25H9.43934L7.96967 10.2197L7.43934 10.75L8.5 11.8107L9.03033 11.2803L11.7803 8.53033C12.0732 8.23744 12.0732 7.76256 11.7803 7.46967L9.03033 4.71967L8.5 4.18934L7.43934 5.25L7.96967 5.78033L9.43934 7.25H5.25ZM8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8C14.5 11.5899 11.5899 14.5 8 14.5ZM0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8Z" fill="currentColor"/>');e.s(["ArrowCircleRight",0,t])},8587921,7873387,e=>{"use strict";var t=e.i(5169864),a=e.i(2405338),r=e.i(1269010),i=e.i(8042625),n=e.i(277234),s=e.i(4244280),o=e.i(9668517),l=e.i(5338940),c=e.i(1717203),d=e.i(7557283);let u=e=>(a,r,i)=>{let n=(0,t.useRef)(void 0),s=e(a,r,i);(0,t.useEffect)(()=>{void 0!==s.data&&(n.current=s.data)},[s.data]);let o=(0,t.useCallback)(()=>{n.current=void 0},[]);return{...s,data:void 0===s.data?n.current:s.data,isLagging:void 0===s.data&&void 0!==n.current,resetLaggy:o}};function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:m,limit:g,role:f,eligibleMembersForProjectId:p,sort:h="date_desc",filterByUserIds:v,includeEntitlements:x,mfaStateFilter:y,includePermissionRequests:E}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},C=arguments.length>2&&void 0!==arguments[2]&&arguments[2],b=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:j,team:T}=(0,l.useTeam)(),{isLoading:S,can:R}=(0,c.default)(),P=!S&&R(d.Action.List,d.Resource.TeamFellowMembership),I=(0,o.useTeamSlug)(),A=g||20,N=(0,r.default)((e,t)=>{if(!j||!T||!P)return null;if(0===e)return`${s.API_TEAMS_MEMBERS_V3}/${T.id}/members${(0,i.encode)({sort:h,limit:A,search:m,role:f,eligibleMembersForProjectId:p,filterByUserIds:v,includeEntitlements:!!x||void 0,filterByMfaState:"all"!==y?y:void 0,includePermissionRequests:E})}`;let a=t?.pagination.nextPageCursor;return a?`${s.API_TEAMS_MEMBERS_V3}/${T.id}/members${(0,i.encode)({sort:h,limit:A,nextPageCursor:a,search:m,role:f,eligibleMembersForProjectId:p,includeEntitlements:!!x||void 0,filterByMfaState:"all"!==y?y:void 0,includePermissionRequests:E})}`:null},e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:C?[u]:[]});(0,t.useEffect)(()=>{C&&N.resetLaggy()},[I,C]);let M=(0,t.useMemo)(()=>N.data?.flatMap(e=>e.members.slice(0,A))||[],[N.data,A]),L=(0,t.useMemo)(()=>N.data?.flatMap(e=>e.permissionRequests||[])||[],[N.data]),k=!!N.data,_=k&&0===M.length,w=!!(k&&N.data&&N.size>N.data.length),O=!!(k&&N.data&&!N.data[N.data.length-1]?.pagination?.nextPageCursor);return(0,a.default)(()=>{if(!b||!N.data||O||!j||!T)return null;let e=N.data[N.data.length-1].pagination.nextPageCursor;return`${s.API_TEAMS_MEMBERS_V3}/${T.id}/members${(0,i.encode)({sort:h,limit:A,nextPageCursor:e,search:m,role:f,eligibleMembersForProjectId:p,includeEntitlements:x,filterByMfaState:"all"!==y?y:void 0,includePermissionRequests:E})}`},e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0})),[N,{members:M,permissionRequests:L.filter(e=>null!=e),initialDataLoaded:k,isEmpty:_,loadMore:()=>N.setSize(N.size+1),isLoadingMore:w,isReachingEnd:O,isLagging:N.isLagging}]}function g(){let{sort:e="date_desc",limit:t=20,filterByUserIds:r,until:o,role:u,includeEntitlements:m,includePermissionRequests:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:p,team:h}=(0,l.useTeam)(),{isLoading:v,can:x}=(0,c.default)(),y=!v&&x(d.Action.List,d.Resource.TeamFellowMembership);return(0,a.default)(()=>p&&h&&y?`${s.API_TEAMS_MEMBERS_V3}/${h.id}/members${(0,i.encode)({sort:e,until:o,limit:t,role:u,filterByUserIds:r,includeEntitlements:m,includePermissionRequests:g})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),f)}function f(e){let{limit:t=20,until:r,role:o,sort:l="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.default)(()=>e?`${s.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,i.encode)({until:r,limit:t,role:o,sort:l})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),c)}function p(){let{limit:e=25,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{can:s,isLoading:u}=(0,c.default)(),m=!u&&s(d.Action.Create,d.Resource.TeamFellowMembership),{isReady:g,team:f}=(0,l.useTeam)(),p=(0,o.useTeamSlug)(),h=(0,r.default)((t,a)=>{if(!g||!f||!m)return null;if(!t)return`/api/teams/${p}/members/suggested${(0,i.encode)({limit:e})}`;let r=a?.members,n=r?.length===e?r[r.length-1].email:null;return n?`/api/teams/${p}/members/suggested${(0,i.encode)({limit:e,from:n})}`:null},e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),a),v=(0,t.useMemo)(()=>h.data?.flatMap(t=>t.members.slice(0,e))||[],[h.data,e]),x=!!h.data,y=x&&0===v.length,E=!!(x&&h.data&&h.size>h.data.length),C=!!(x&&h.data&&h.data[h.data.length-1]?.members.length<e);return[h,{members:v,initialDataLoaded:x,isEmpty:y,loadMore:()=>h.setSize(h.size+1),isLoadingMore:E,isReachingEnd:C}]}e.s(["default",0,u],7873387),e.s(["MEMBERS_LIMIT",0,20,"default",()=>g,"useMembersForTeam",()=>f,"useMembersInfinite",()=>m,"useSuggestedMembersInfinite",()=>p],8587921)},4723202,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),r=e.i(2504781),i=e.i(5255926),n=e.i(455575),s=e.i(5468328),o=e.i(277234),l=e.i(5338940),c=e.i(8587921),d=e.i(5140444),u=e.i(8248823),m=e.i(57106);function g(e){let{teamRole:o,variant:g="card"}=e,{team:p,isLoading:h}=(0,l.useTeam)(),{hasRequestedRole:v,mutate:x,isLoading:y}=function(e){let{user:t,isLoading:a}=(0,d.useUser)(),{data:r,mutate:i,isLoading:n}=(0,c.default)({includePermissionRequests:!0}),s=r?.permissionRequests;return{hasRequestedRole:s?.some(a=>a.uid===t?.uid&&a.requestedTeamRole.includes(e))??!1,mutate:i,isLoading:a||n}}(o),[E,C]=(0,a.useState)(!1),[b,j]=(0,a.useState)(!1);if(p?.membership?.role!=="VIEWER_FOR_PLUS")return null;let T=v||b;return(0,t.jsx)(i.Skeleton,{show:y||h,children:(0,t.jsx)(s.Tooltip,{disableTriggers:!T,text:(0,t.jsxs)(t.Fragment,{children:["An Owner of the team can accept your request. Requests are managed in the"," ",(0,t.jsx)(m.Link,{href:`/${p?.slug}/~/settings/members`,type:"highlight",children:"team members page"}),"."]}),children:(0,t.jsx)(r.Button,{disabled:T,loading:E,className:"card"===g?"text-label-14 font-medium":void 0,onClick:async()=>{if(p?.id){C(!0);try{await f(p.id,o),x(),j(!0),n.toasts.success("Request for the Member role has been sent")}catch(e){n.toasts.error((0,u.errorToString)(e,"Failed to send request"))}finally{C(!1)}}},size:"card"===g?"small":void 0,type:"card"===g?"tertiary":void 0,children:T?"Access Requested":"Request Access"})})})}async function f(e,t){await (0,o.fetchAPI)(`/api/teams/${e}/role-requests?teamId=${e}`,{method:"POST",body:JSON.stringify({teamRoles:[t]}),throwOnHTTPError:!0})}e.s(["RequestRoleButton",()=>g])},8556491,e=>{"use strict";var t=e.i(1146226),a=e.i(4723202),r=e.i(57106),i=e.i(1235157),n=e.i(119294),s=e.i(6352514);function o(e){let{role:o,team:l,actionLabel:c,dataTestId:d}=e;return(0,t.jsx)("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[rgba(255,255,255,0.5)] dark:bg-[rgba(0,0,0,0.5)]",children:(0,t.jsx)("div",{className:"absolute top-0 md:top-[80px] left-1/2 -translate-x-1/2 z-[101] w-full max-w-[560px] animate-[fadeIn_300ms_ease-in-out_forwards] pointer-events-auto","data-testid":d,children:(0,t.jsxs)("div",{className:"shadow-lg md:rounded-lg max-w-full bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,t.jsx)("span",{className:"text-heading-24",children:"Additional Permissions Required"}),(0,t.jsxs)("div",{children:["As a ",(0,t.jsx)("strong",{children:o?(0,i.getRoleName)(o):"Viewer"})," user on the ",(0,t.jsx)("strong",{children:l?.name})," team, you do not have permission to ",c,"."]}),(0,t.jsxs)("div",{className:"text-center break-words pt-2 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(r.Link,{external:!0,href:"/docs/rbac/access-roles",onClick:()=>{n.analytics.track(s.AnalyticsEvent.PERMISSIONS_CLICKED_LEARN_MORE)},type:"highlight",children:"Roles and Permissions"})]})]}),"VIEWER_FOR_PLUS"===o?(0,t.jsx)("div",{className:"flex justify-end items-center bg-background-200 p-4 border-t mt-2",children:(0,t.jsx)(a.RequestRoleButton,{teamRole:"MEMBER",variant:"modal"})}):null]})})})}e.s(["AdditionalPermissionsRequiredModal",()=>o])},1068837,e=>{"use strict";var t=e.i(1146226),a=e.i(1717203),r=e.i(8556491);function i(e){let{actionLabel:i,permissionChecks:n}=e,{can:s,isLoading:o,accessInfo:l}=(0,a.default)(),c=n.every(e=>{let[t,a]=e;return s(t,a)});return o||c?null:(0,t.jsx)(r.AdditionalPermissionsRequiredModal,{role:l?.role,team:l?.team??void 0,actionLabel:i})}e.s(["AdditionalPermissionsRequiredModalClient",()=>i])},5919007,e=>{"use strict";function t(e){if("number"==typeof e.resourceConfig?.edgeConfigSize)return 1e3*e.resourceConfig.edgeConfigSize;switch(e.billing?.plan){case"enterprise":return 512e3;case"pro":return 64e3;default:return 8e3}}function a(e){if("number"==typeof e.resourceConfig?.edgeConfigs)return e.resourceConfig.edgeConfigs;switch(e.billing?.plan){case"enterprise":return 10;case"pro":return"trialing"===e.billing.status?1:3;default:return 1}}e.s(["EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH",0,52,"getMaxEdgeConfigs",()=>a,"getSizeLimitInBytes",()=>t])},2843591,e=>{"use strict";var t=e.i(2405338),a=e.i(5169864),r=e.i(1269010),i=e.i(8042625),n=e.i(277234),s=e.i(4244280),o=e.i(5338940);e.i(6887680);var l=e.i(6810699);function c(e,a){let{isReady:r,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&r?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/schema${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),a)}function d(){let e=(0,l.useResourceList)({protocolType:"storage"});return{data:(0,a.useMemo)(()=>e.data?.stores.filter(e=>"edge-config"===e.type),[e.data?.stores])}}function u(e,a){let{isReady:r,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&r?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),a)}function m(e,a){let{isReady:r,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&r?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/items${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),a)}function g(e,a){let{isReady:r,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&r?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/tokens${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),a)}function f(e,t,a){let{isReady:l,team:c}=(0,o.useTeam)();return(0,r.default)((t,r)=>{if(!e||!l||r&&!r.pagination.hasNext)return null;let n={teamId:c?.id,metadata:a?.metadata?"true":void 0,limit:a?.limit||25,next:r?.pagination.next};0===t&&(n.limit+=1);let o=`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups`;return`${o}${(0,i.encode)(n)}`},e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateFirstPage:!1,revalidateOnFocus:!1,...t})}function p(e,a,r){let{isReady:l,team:c}=(0,o.useTeam)();return(0,t.default)(()=>e&&a&&"current"!==a&&l?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups/${encodeURIComponent(a)}${(0,i.encode)({teamId:c?.id})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),r)}function h(e){let{edgeConfig:t,project:a}=e;return{...t,type:"edge-config",projectsMetadata:a?[{projectId:a.id,name:a.name,framework:a.framework,id:"",environments:[],environmentVariables:[],envVarPrefix:null}]:[],name:t.slug,status:"available",totalConnectedProjects:+!!a}}e.s(["mapEdgeConfigToStoreType",()=>h,"useEdgeConfig",()=>u,"useEdgeConfigBackup",()=>p,"useEdgeConfigBackupsInfinite",()=>f,"useEdgeConfigItems",()=>m,"useEdgeConfigSchema",()=>c,"useEdgeConfigTokens",()=>g,"useEdgeConfigs",()=>d])},8564753,e=>{"use strict";e.i(9584471),e.s([])},4348614,e=>{e.v({expanderWrapper:"store-advanced-options-expander-module__QIqk3G__expanderWrapper",expanderWrapperExpanded:"store-advanced-options-expander-module__QIqk3G__expanderWrapperExpanded"})},1261558,e=>{"use strict";var t=e.i(1146226),a=e.i(9722978);e.i(8703064);var r=e.i(7507521),i=e.i(4348614);function n(e){let{children:n,isExpandedDefault:s}=e;return(0,t.jsx)(r.Expander,{className:(0,a.clsx)(i.default.expanderWrapper),expandedClassName:i.default.expanderWrapperExpanded,isExpandedDefault:s,title:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1 flex-initial px-3 py-2",children:[(0,t.jsx)(r.ExpanderTrigger,{}),(0,t.jsx)("p",{className:"text-[13px] leading-[18px] font-medium text-gray-900",children:"Advanced Options"})]}),children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial px-3 py-2",children:n})})}e.s(["StoreAdvancedOptionsExpander",()=>n])},8206804,e=>{"use strict";var t=e.i(1146226);e.s(["default",0,function(e){let{margin:a=50,className:r}=e;return(0,t.jsx)("hr",{className:r,style:{border:"0",borderTop:"1px solid var(--accents-2)",margin:"number"==typeof a?`${a}px 0`:`${a} 0`}})}])},9512272,e=>{"use strict";var t=e.i(8042625),a=e.i(277234),r=e.i(4244280),i=e.i(5927860);function n(e){return e.startsWith("VERCEL_")&&!e.startsWith("VERCEL_APP_")}function s(e){return e.map(e=>{let t,a=e.type;return void 0===a&&(a=n(e.name)?i.EnvType.System:i.EnvType.Encrypted),e.target&&(t=Array.isArray(e.target)?e.target:[e.target]),{type:a,key:e.name,value:a===i.EnvType.System?e.name:e.value,target:t??[i.EnvTarget.Production,i.EnvTarget.Preview,i.EnvTarget.Development],gitBranch:e.gitBranch,comment:e.comment,customEnvironmentIds:e.customEnvironmentIds}})}async function o(e,i,n){let o=s(i);return(0,a.fetchAPI)(`${(0,r.API_PROJECTS_VERSION)("v10")}/${e}/env${(0,t.encode)({teamId:n})}`,{method:"POST",body:JSON.stringify(o),throwOnHTTPError:!0})}async function l(e,i,n){await (0,a.fetchAPI)(`${(0,r.API_PROJECTS_VERSION)("v4")}/${e}/env/${i.key}${(0,t.encode)({teamId:n,target:i.target})}`,{method:"DELETE",throwOnHTTPError:!0})}e.s(["addEncryptedEnvs",()=>s,"addEnvs",()=>o,"isSystemEnv",()=>n,"legacyRemoveEnv",()=>l])},4429570,e=>{"use strict";var t=e.i(1146226),a=e.i(6891161),r=e.i(455575),i=e.i(4030453),n=e.i(5169864),s=e.i(8042625),o=e.i(277234),l=e.i(4244280),c=e.i(5927860),d=e.i(7917902),u=e.i(4422059),m=e.i(4004502),g=e.i(5919007),f=e.i(9512272);e.i(7037808);var p=e.i(8824424);e.i(8564753);var h=e.i(9584471),v=e.i(3500331),x=e.i(8206804),y=e.i(2014455),E=e.i(1261558);function C(e){let{advancedOptions:a,tokenLabelPlaceholder:r,onAdvancedOptionsChange:i,isLoading:n}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)(y.ResourceEnvironmentSelector,{environments:a.environments,error:a.error?.environments,onChange:e=>i({...a,environments:e,error:{...a.error,environments:void 0}}),resourceTitle:"store"}),(0,t.jsx)(E.StoreAdvancedOptionsExpander,{isExpandedDefault:!!a.error,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)(v.Input,{"aria-label":"Environment Variable",disabled:n,error:a.error?.envVarName,label:"Environment Variable",onChange:e=>i({...a,envVarName:e.currentTarget.value,error:{...a.error,envVarName:void 0}}),placeholder:"EDGE_CONFIG",value:a.envVarName,width:"100%"})}),(0,t.jsx)(x.default,{margin:0}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)(v.Input,{"aria-label":"Token label",disabled:n,label:"Token label",maxLength:g.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH,onChange:e=>i({...a,tokenName:e.currentTarget.value}),placeholder:r,value:a.tokenName,width:"100%"})})]})})]})}function b(e){let{backOrCancelLabel:p,edgeConfig:v,title:x,subtitle:y,ProjectSelector:E,onClickOutside:b,onConnectionCreated:j,onBack:T,project:S}=e,{mutateByProtocol:R}=(0,h.useMutateResourceCache)(),[P,I]=(0,n.useState)({envVarName:"",tokenName:"",environments:{[c.EnvTarget.Development]:!0,[c.EnvTarget.Preview]:!0,[c.EnvTarget.Production]:!0,...S?.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}}),[A,N]=(0,n.useState)(!1),[M,L]=(0,n.useState)(null),{team:k}=(0,d.useAccount)(),_=(0,u.usePrevious)(S);(0,n.useEffect)(()=>{null!==P.error&&(!S||_&&S.id!==_.id)&&I({...P,error:null}),S&&(null===_||_&&S.id!==_.id)&&I({...P,environments:{[c.EnvTarget.Development]:!0,[c.EnvTarget.Preview]:!0,[c.EnvTarget.Production]:!0,...S.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}})},[P,_,S]);let w=(0,n.useMemo)(()=>{if(!S)return"";let e=S.name.slice(0,g.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH-6);return`${e.replace(/-*$/g,"")}-token`},[S]),O=P.tokenName||w,$=P.envVarName||"EDGE_CONFIG",F=(0,n.useCallback)(async e=>{if(e.preventDefault(),!v||A||!S)return;let t=[c.EnvTarget.Production,c.EnvTarget.Preview,c.EnvTarget.Development,...S.customEnvironments?.map(e=>e.slug)||[]].filter(e=>P.environments[e]);try{if(L(null),N(!0),I({...P,error:null}),0===t.length){I({...P,error:{environments:"Select at least one Environment for your Environment Variable"}}),N(!1);return}if(S.env&&S.env.some(e=>e.key===$&&("string"==typeof e.target?t.includes(e.target):e.target.some(e=>t.includes(e))))){I({...P,error:{envVarName:1===t.length?`This project already has an environment variable called ${$} in the chosen environment.`:`This project already has an environment variable called ${$} in one of the chosen environments.`}}),N(!1);return}let e=await (0,o.fetchAPI)(`${l.API_EDGE_CONFIG}/${v.id}/token${(0,s.encode)({teamId:k?.id})}`,{method:"POST",throwOnHTTPError:!0,body:{label:O}});await (0,f.addEnvs)(S.id,[{name:$,value:`https://edge-config.vercel.com/${v.id}?token=${e.token}`,type:c.EnvType.Encrypted,target:t.filter(e=>(0,c.isSystemEnvTarget)(e)),customEnvironmentIds:t.filter(e=>!(0,c.isSystemEnvTarget)(e)).map(e=>{let t=S.customEnvironments?.find(t=>t.slug===e);return t?.id}).filter(e=>void 0!==e)}],k?.id),await j(),b(),r.toasts.success({text:`Connected Project ${S.name} to Edge Config ${v.slug}`,key:v.slug}),await R("storage")}catch(e){if(e instanceof Error)L(e);else throw e}finally{N(!1)}},[v,A,S,P,k?.id,O,$,j,b,R]);return(0,t.jsxs)("form",{onSubmit:e=>void F(e),children:[(0,t.jsx)(a.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(a.Modal.Title,{center:!0,children:x}),y?(0,t.jsx)(a.Modal.Subtitle,{children:y}):null]}),(0,t.jsx)(a.Modal.Inset,{last:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[E,(0,t.jsx)(C,{advancedOptions:P,isLoading:A,onAdvancedOptionsChange:I,tokenLabelPlaceholder:S?w:""}),M?(0,t.jsx)(i.Error,{children:M.message}):null]})})]})}),(0,t.jsxs)(a.Modal.Actions,{children:[(0,t.jsx)(a.Modal.Action,{onClick:T,type:"secondary",children:p}),(0,t.jsx)(a.Modal.Action,{buttonType:"submit","data-testid":(0,m.tid)("connect-edge-config-modal","connect-button"),disabled:!S||""===$.trim()||""===O.trim(),loading:A,children:"Connect"})]})]})}function j(e){let{active:r,edgeConfig:i,onClickOutside:s,onConnectionCreated:o,onAnimationDone:l}=e,[c,u]=(0,n.useState)(null),{team:m,user:g}=(0,d.useAccount)(),f=m?m.slug:g?.username;return(0,t.jsx)(a.Modal.Modal,{active:r,allowOverflow:!0,onAnimationDone:l,onClickOutside:s,width:540,children:(0,t.jsx)(b,{ProjectSelector:(0,t.jsx)(p.ResourceProjectSelector,{account:f,allowSelectConnectedProjects:!0,includedInConnectedProjects:e=>e?.env?.some(e=>e.edgeConfigId===i?.id)??!1,onProjectSelected:e=>{u(e)},resourceTitle:"store",selectedProject:c}),backOrCancelLabel:"Cancel",edgeConfig:i,onBack:s,onClickOutside:s,onConnectionCreated:o,project:c,title:"Connect Project"})})}e.s(["ConnectEdgeConfigModal",()=>j,"CreateEdgeConfigConnectionModalStep",()=>b],4429570)},1758334,e=>{"use strict";var t=e.i(5169864);e.i(6887680);var a=e.i(6810699),r=e.i(3798983);function i(e){return"edge-config"===e?64:32}e.s(["MAX_STORE_NAME_LENGTH",0,32,"getStoreNameLengthByType",()=>i,"useStoreName",0,e=>{let{storeType:n,storeId:s,...o}=e,l=(0,t.useMemo)(()=>{if("projectName"in o&&o.projectName){let e=r.storeDefaultNameSuffix[n];return[o.projectName.replaceAll("_","-").slice(0,i(n)-e.length),e].join("")}return"storeName"in o?o.storeName??"":""},[o,n]),[c,d]=(0,t.useState)(),[u,m]=(0,t.useState)(),{isNameTaken:g}=(0,a.useResourceList)({protocolType:"storage"});return{storeNameError:c,name:u??l,setName:(0,t.useCallback)(e=>{let t=e.trim(),a=i(n),r="edge-config"===n?1:5;d(void 0),m(t),t.length<r?d(`The name must be at least ${r} characters.`):t.length>a?d(`The name must be at most ${a} characters.`):/^[a-zA-Z0-9_-\s]*$/.test(t)?g({name:t,storeType:n,storeId:s})&&d("This name is already in use by another store"):d("The name can only contain letters, numbers, and the following characters: _ - ")},[g,n,s]),touched:!!u&&u!==l}}])},2886798,e=>{"use strict";e.i(9691190),e.i(1055938),e.i(680627),e.i(3183079),e.i(7512194),e.i(3788585),e.s([])},562291,e=>{"use strict";var t=e.i(1146226),a=e.i(8522580),r=e.i(1717203),i=e.i(7557283),n=e.i(57106);e.i(8703064);var s=e.i(6798946),o=e.i(4981413),l=e.i(3798983),c=e.i(3703009);function d(e){let{onClickStore:d,storeTypeWithProduct:u,showCreateButton:m=!1}=e,{can:g,isLoading:f}=(0,r.default)(),p={"edge-config":g(i.Action.Create,i.Resource.EdgeConfig),blob:g(i.Action.Create,i.Resource.Blob),integration:g(i.Action.Create,i.Resource.Integration)};return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[["edge-config","blob"].map(e=>(0,t.jsx)(s.CreateResourceCard,{Icon:(0,t.jsx)(c.StoreIcon,{size:"large",type:e,useColor:!0}),description:l.storeDescription[e],isDisabled:f||!p[e],isSelected:u?.type===e,name:l.storeTitle[e],onClick:()=>{d({type:e})},showCreateButton:m,tooltip:{text:`You need additional permission to create a ${l.storeTitleFull[e]}.`,isEnabled:!p[e]}},e)),(0,t.jsxs)(a.Note,{fill:!0,type:"secondary",children:["KV and Postgres are now available through the Marketplace."," ",(0,t.jsx)(n.Link,{external:!0,href:"/docs/storage",target:"_blank",children:"Learn more"})]})]}),(0,t.jsx)(o.BrowseProducts,{onClickProduct:d,protocolType:"storage",selectedProduct:u,showCreateButton:m})]})}e.s(["BrowseStoresCards",()=>d],562291)},3322174,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),r=e.i(6060673);e.i(7037808);var i=e.i(7137779);e.i(5463680);var n=e.i(39509);e.i(3182268);var s=e.i(7849855);e.i(2886798);var o=e.i(3183079),l=e.i(4429570),c=e.i(3703009),d=e.i(2782729);function u(e){let{store:u}=e,{projectSlug:m}=(0,s.useProjectSlug)(),g=(0,r.useProject)(m),{onBack:f,onClose:p,state:h,onResourceUpdated:v}=(0,o.useResourceModalsContext)(),{type:x}=u,y=(0,a.useCallback)(()=>{v({resource:u,isConnected:!0})},[u,v]);if(h.type!==n.ResourceModalsActionTypes.CreateEnvs)return null;switch(x){case"edge-config":return(0,t.jsx)(l.CreateEdgeConfigConnectionModalStep,{backOrCancelLabel:h.backOrCancelLabel,edgeConfig:{id:u.id,slug:u.name},onBack:f,onClickOutside:p,onConnectionCreated:y,project:g.data,subtitle:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1.5 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Connect to"}),(0,t.jsx)(c.StoreIconOrAvatar,{icon:(0,d.getStoreIcon)(u),size:"small",type:u.type,useColor:!0}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:u.name})]}),title:`Configure ${g.data?.name??""}`});case"blob":case"integration":return(0,t.jsx)(i.CreateResourceConnectionModalStep,{backOrCancelLabel:h.backOrCancelLabel,onBack:f,onClickOutside:p,onConnectionCreated:y,project:g.data,resourceId:u.id,store:u,subtitle:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1.5 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Connect to"}),(0,t.jsx)(c.StoreIconOrAvatar,{icon:(0,d.getStoreIcon)(u),size:"small",type:u.type,useColor:!0}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:u.name})]}),title:`Configure ${g.data?.name??""}`});default:return null}}function m(e){let{active:a,store:r,key:n}=e,{onClose:s,onAnimationDone:c,onResourceUpdated:d}=(0,o.useResourceModalsContext)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.ConnectEdgeConfigModal,{active:"edge-config"===r.type&&a,edgeConfig:r,onAnimationDone:c,onClickOutside:s,onConnectionCreated:s},n),(0,t.jsx)(i.CreateResourceConnectionModal,{active:"edge-config"!==r.type&&a,onAnimationDone:c,onClickOutside:s,onConnectionCreated:()=>d({resource:r,isConnected:!0}),resourceId:r.id,store:r},n)]})}e.s(["ConnectStoreSwitch",()=>u,"ConnectStoreSwitchWithoutProject",()=>m])},4553963,e=>{"use strict";var t=e.i(1146226),a=e.i(2504781),r=e.i(6864621);function i(e){let{setShowCreateDatabaseModal:i}=(0,r.useCreateDatabaseModal)();return(0,t.jsx)(a.Button,{onClick:()=>i(!0),...e})}e.s(["CreateDatabaseModalTrigger",()=>i])},4174946,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),r=e.i(5155984),i=e.i(57106),n=e.i(1000921),s=e.i(2652226),o=e.i(3798983),l=e.i(5551580);e.i(2886798);var c=e.i(7512194),d=e.i(2782729),u=e.i(8922739),m=e.i(1068837),g=e.i(7557283);function f(e){let{teamSlug:i,project:n,children:s,createDatabaseButton:o}=e;return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(p,{buttons:null,projectSlug:n,teamSlug:i,children:(0,t.jsx)(l.ResourceListPlaceholder,{protocolType:"storage"})}),children:(0,t.jsx)(r.CompatRouterAllowedWithoutSuspense,{children:(0,t.jsx)(c.ResourceModalsProviderBase,{Modal:(0,t.jsx)(u.CreateStoreModal,{}),protocolType:"storage",children:(0,t.jsx)(p,{buttons:o,projectSlug:n,teamSlug:i,children:s})})})})}function p(e){let{teamSlug:a,projectSlug:r,children:l,buttons:c}=e,u=(0,d.hasProjectSlug)(r);return(0,t.jsx)(s.default,{buttons:c,title:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)("h1",{className:"text-[32px] leading-[40px] tracking-[-0.79px] font-medium",children:"Storage"})}),u?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Read and write directly to databases and stores connected to this project."," ",(0,t.jsx)(i.Link,{href:a?`/${a}/~/stores`:"/dashboard/stores",type:"highlight",children:(0,t.jsxs)("span",{className:"flex flex-row items-center justify-start gap-1 flex-initial",style:{display:"inline-flex"},children:[(0,t.jsx)("span",{children:"View All Databases"}),(0,t.jsx)(n.ArrowCircleRight,{})]})})]}):(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Read and write directly to databases and stores from your projects."," ",(0,t.jsx)(i.Link,{external:!0,href:o.docs.createDatabase,type:"highlight",children:"Learn more"})]})]}),children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(m.AdditionalPermissionsRequiredModalClient,{actionLabel:"view Storage",permissionChecks:[[g.Action.Read,g.Resource.EdgeConfig],[g.Action.Read,g.Resource.Blob]]}),l]})})}e.s(["StoreListLayout",()=>f],4174946)}]);

//# debugId=1d6b031e-5810-d9d0-0025-b923bb41f818
//# sourceMappingURL=1bf6f0efb589ac78.js.map