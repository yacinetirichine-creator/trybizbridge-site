;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0df6c723-2a16-10f5-ee8b-942918b89165")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8188735,e=>{"use strict";var t=e.i(277234),n=e.i(4244280);async function i(e,i,r){return(0,t.fetchAPI)(`${(0,n.API_PROJECTS_VERSION)("v5")}/${encodeURIComponent(e)}${i?`?teamId=${i}`:""}`,{method:"PATCH",body:JSON.stringify(r),throwOnHTTPError:!0})}async function r(e,i,r){return(0,t.fetchAPI)(`${(0,n.API_PROJECTS_VERSION)("v9")}/${encodeURIComponent(e)}${i?`?teamId=${i}`:""}`,{method:"PATCH",body:JSON.stringify(r),throwOnHTTPError:!0})}e.s(["default",()=>i,"updateProjectSettingsV9",()=>r])},3008300,e=>{"use strict";e.s(["DEFAULT_USE_IGNORE_BUILD_STEP_PROMOTE",0,!1,"DEFAULT_USE_IGNORE_BUILD_STEP_REDEPLOY",0,!0,"DeploymentOverviewParams",0,{automaticAliases:!0}])},1840726,e=>{"use strict";function t(e){let{commandForIgnoringBuildStep:t}=e||{};return"string"==typeof t&&t.trim().length>0}function n(e){let{project:n,deployment:i}=e;return t(n)||t(i?.projectSettings)}e.s(["useShowIgnoreBuildStep",()=>n])},7713873,e=>{"use strict";var t=e.i(5927860);function n(e){return e.startsWith("env_")}function i(e){return n(e.id)}function r(e){return i(e)?e.slug:e.name}let o={id:t.EnvTarget.Production,name:"Production",slug:t.EnvTarget.Production,description:"Primary project environment meant to serve qualified, promoted deployments to real users",branchMatcher:void 0,domains:[],createdAt:void 0,updatedAt:void 0},s={id:t.EnvTarget.Preview,name:"Preview",slug:t.EnvTarget.Preview,description:"Standard environment — included with all Vercel projects — for previewing changes before promoting them to production",branchMatcher:void 0,domains:[],createdAt:void 0,updatedAt:void 0},a={id:t.EnvTarget.Development,name:"Development",slug:t.EnvTarget.Development,branchMatcher:void 0,description:"Standard environment — included with all Vercel projects — used to supply environment variables in local development",createdAt:void 0,updatedAt:void 0},l="[all-environments]",c="[all-custom-environments]";function d(e){return e===l||e===c||Object.values(t.EnvTarget).includes(e.replace(/^\[|\]$/g,""))||n(e)}function u(e){return n(e)?e:`[${e}]`}e.s(["DevelopmentEnvironment",0,a,"PreviewEnvironment",0,s,"ProductionEnvironment",0,o,"allCustomEnvironmentsFilter",0,c,"allEnvironmentsFilter",0,l,"brandCustomEnvId",0,e=>e,"envName",()=>r,"isCustomEnvId",()=>n,"isCustomEnvironment",()=>i,"isEnvFilter",()=>d,"mapToEnvFilter",()=>u])},7957424,e=>{"use strict";var t=e.i(2405338),n=e.i(8042625),i=e.i(277234),r=e.i(4244280),o=e.i(9668517),s=e.i(7713873);function a(e,s){let a=(0,o.useTeamSlug)(),l=(0,n.encode)({slug:a}),{skip:c,...d}=s||{},u=async e=>{try{let t=await (0,i.fetchAPI)(e,{throwOnHTTPError:!0});return{customEnvironments:t.environments,accountLimit:t.accountLimit}}catch(e){return{customEnvironments:[],accountLimit:{total:0}}}};return(0,t.default)(e&&!c?`${(0,r.API_ENVIRONMENTS)(e)}${l}`:null,u,d)}function l(e,n){let i=a(e,n),{data:r,error:o,isLoading:l,isValidating:c,mutate:d}=(0,t.default)(e?[e,"allEnvironments",i.data]:null,()=>({environments:[s.ProductionEnvironment,s.PreviewEnvironment,...i.data?.customEnvironments||[],s.DevelopmentEnvironment]}),{...n,fallbackData:{environments:[s.ProductionEnvironment,s.PreviewEnvironment,s.DevelopmentEnvironment]}});return{data:r,error:i.error||o,isLoading:i.isLoading||l,isValidating:i.isValidating||c,mutate:d}}e.s(["useAllEnvironments",()=>l,"useCustomEnvironments",()=>a])},1516738,e=>{"use strict";var t=e.i(1146226),n=e.i(3753138),i=e.i(2634426),r=e.i(6107899),o=e.i(3394346),s=e.i(5927860);function a(e){let{id:a}=e;return a?a===s.EnvTarget.Production?(0,t.jsx)(n.ArrowCircleUp,{}):a===s.EnvTarget.Preview?(0,t.jsx)(r.PreviewEye,{}):a===s.EnvTarget.Development?(0,t.jsx)(o.Wrench,{}):(0,t.jsx)(i.Layers,{}):null}e.s(["EnvironmentIcon",()=>a])},1773657,e=>{"use strict";var t=e.i(1146226),n=e.i(3306538);function i(e){let{type:i,size:r}=e;return(0,t.jsx)(n.Badge,{size:r,variant:"production"===i?"blue-subtle":"teal-subtle",children:(0,t.jsx)("span",{style:{textTransform:"none"},children:"production"===i?"Production":"Pre-Production"})})}e.s(["EnvironmentBadge",()=>i])},5129431,e=>{"use strict";var t=e.i(1146226),n=e.i(5610834),i=e.i(5169864),r=e.i(57106),o=e.i(2504781),s=e.i(3869281),a=e.i(4030453),l=e.i(6891161),c=e.i(5323212),d=e.i(8522580),u=e.i(455575),m=e.i(3306538),p=e.i(6850581),f=e.i(3978547),h=e.i(4345845),y=e.i(5479400),g=e.i(4004502),x=e.i(5140444),v=e.i(5338940),j=e.i(2560270),b=e.i(3228096),E=e.i(1848296),P=e.i(5927860),C=e.i(9358876),S=e.i(7713873),T=e.i(1717203),w=e.i(7557283),D=e.i(8042625),A=e.i(277234),N=e.i(4244280);async function M(e){let{deployment:t,includeBuildCache:n=!1,skipIgnoreBuildStep:i=!1,project:r,team:o,target:s,customEnvironmentSlugOrId:a}=e,l=o?.id;if("prebuilt"in t&&t.prebuilt)throw{message:"Prebuilt deployments cannot be redeployed because they will not use the latest environment variables and project settings. Please create a new deployment instead.",action:"Learn More",link:"https://vercel.com/docs/cli/deploy#prebuilt"};if(await (async()=>{if("production"!==t.target||!r.targets?.production?.id)return!1;let e=r.targets.production;return!("READY"!==e.readyState||(await (0,A.fetchAPI)(`${(0,N.API_DEPLOYMENTS)("v6")}${(0,D.encode)({teamId:l,projectId:r.id,target:"production",since:t.createdAt+1,limit:30})}`,{throwOnHTTPError:!0})).deployments.every(e=>e.meta?.action==="redeploy"))&&(t.id||t.uid)!==e.id})())throw{message:"A more recent Production Deployment has been created, so the one you are looking at cannot be redeployed anymore.",action:"Learn More",link:"https://vercel.link/redeploy-production-deployment"};return await (0,A.fetchAPI)(`${(0,N.API_DEPLOYMENTS)("v13")}${(0,D.encode)({teamId:l,forceNew:"1",...n&&{withCache:"1"},skipIgnoreBuildStep:i?"1":null})}`,{method:"POST",body:JSON.stringify({deploymentId:t.uid||t.id,meta:{action:"redeploy"},name:r.name,target:s||void 0,customEnvironmentSlugOrId:a}),throwOnHTTPError:!0})}var I=e.i(9375869),R=e.i(542164),_=e.i(8518548),k=e.i(1840726),L=e.i(7957424),U=e.i(1773657),O=e.i(1516738),B=e.i(3008300);function F(e){let{current:n,data:i}=e;return(0,t.jsx)(E.RadioGroup.Item,{className:"cursor-pointer items-start rounded-none border border-solid border-gray-400 p-3 text-sm [&:first-of-type]:rounded-t-md [&:last-of-type]:rounded-b-md",value:i.id,children:(0,t.jsxs)("div",{className:"grid grid-cols-[1fr,auto] gap-1",children:[(0,t.jsx)("div",{className:"overflow-hidden text-ellipsis font-medium",children:(0,t.jsx)("span",{className:"truncate",children:i.url})}),n?(0,t.jsx)(m.Badge,{className:"w-fit p-2 normal-case",size:"sm",variant:"blue-subtle",children:"Current"}):null,(0,t.jsxs)("div",{className:"gray-900 col-start-1 flex items-baseline gap-x-2 font-mono",children:[(0,t.jsx)(h.GitBranch,{className:"translate-y-1"}),i.meta.githubCommitRef]}),(0,t.jsxs)("div",{className:"gray-900 col-start-1 flex items-baseline gap-x-2",children:[(0,t.jsx)(y.GitCommit,{className:"translate-y-1"}),(0,t.jsx)("span",{style:{wordBreak:"break-word"},children:i.meta.githubCommitMessage})]}),(0,t.jsxs)("div",{className:"gray-900 col-start-1 flex items-center gap-x-2",children:[(0,t.jsx)(f.ClockDashed,{}),(0,p.useShortTimeAgo)(i.createdAt)]})]})},i.id)}function $(e){let{deployments:n,onSelect:r}=e,[s,a]=(0,i.useState)(!1),[l,c]=(0,i.useState)(n[0].id);return(0,t.jsx)(E.RadioGroup,{onChange:e=>{c(e),r(e)},value:l,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(F,{current:!0,data:n[0]}),n.length>1&&s?n.slice(1).map(e=>(0,t.jsx)(F,{data:e},e.id)):null,n.length>1&&!s?(0,t.jsx)(o.Button,{className:"mt-3",onClick:()=>a(!s),type:"secondary",children:"Choose a Deployment"}):null]})})}function z(e){let[o,m]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!1),[h,y]=(0,i.useState)(null),[E,D]=(0,i.useState)(null),[A,N]=(0,i.useState)(void 0),[F,z]=(0,i.useState)(void 0),[G,Y]=(0,i.useState)(!1),[V,H]=(0,i.useState)(void 0),J=(0,k.useShowIgnoreBuildStep)({project:e,deployment:h}),[W,K]=(0,i.useState)(B.DEFAULT_USE_IGNORE_BUILD_STEP_REDEPLOY),q=(0,u.useToasts)(),Z=(0,n.useRouter)(),{user:Q}=(0,x.useUser)(),{team:X}=(0,v.useTeam)(),{can:ee}=(0,T.default)({projectIdOrName:e?.name}),et=ee(w.Action.Create,w.Resource.Deployment),en=ee(w.Action.Create,w.Resource.DeploymentFromProductionBranch)&&et,{data:ei}=(0,L.useCustomEnvironments)(e?.id??""),er=(0,i.useMemo)(()=>ei?.customEnvironments??[],[ei]),eo=(0,i.useMemo)(()=>h?Array.from(new Set(Array.isArray(h.alias)?h.alias:[])):null,[h]),{data:es}=(0,_.useProjectDomains)(e?.id??"",{limit:13,production:"true",redirects:"false",verified:"true",order:"ASC"}),ea=(0,i.useMemo)(()=>{if("production"===V)return es?.map(e=>e.name)||[];if("preview"===V){if(h)return Array.from(new Set(h.alias))}else if(V&&(0,S.isCustomEnvId)(V)){let e=er.find(e=>{let{id:t}=e;return t===V});if(e)return e.domains?.map(e=>{let{name:t}=e;return t})||[]}return[]},[er,h,es,V]),el=(0,i.useCallback)((e,t)=>{let n=Array.isArray(e)?e:[e],i=n[0];D(n),y(i),H(i.customEnvironment?.id??i.target??"preview"),N(t),m(!0),Y(!1),K(B.DEFAULT_USE_IGNORE_BUILD_STEP_REDEPLOY)},[]),ec=(0,i.useCallback)(()=>{m(!1)},[]),ed=(0,i.useCallback)(()=>{f(!1),y(null),H(void 0),z(void 0)},[]),eu=(0,i.useCallback)(async()=>{let t,n;f(!0),z(void 0),h&&e&&("production"===V||"staging"===V?t=V:"preview"===V?t=void 0:V&&(0,S.isCustomEnvId)(V)?n=V:h.customEnvironment?n=h.customEnvironment.id:t=h.target,M({deployment:h,includeBuildCache:G,project:e,target:t,skipIgnoreBuildStep:!!J&&!W,team:X,customEnvironmentSlugOrId:n}).then(e=>{if(!e)return;let t=(0,I.pathFromDeployment)(e,{user:Q,team:X});!A||A.redirect?(q.success("Deployment created."),Z.push(t)):q.success({text:"Deployment created.",action:"View Deployment",onAction:()=>{Z.push(t)}}),ec()}).catch(e=>{e.status>=500?z({message:`Unexpected error (${e.status}). Please try again later.`}):z(e)}).finally(()=>{f(!1),Y(!1),K(B.DEFAULT_USE_IGNORE_BUILD_STEP_REDEPLOY)}))},[V,h,e,q,Z,Q,X,ec,G,A,W,J]),em=e?.autoAssignCustomDomains??!0,ep=(0,i.useMemo)(()=>{let e;return V?"production"===V?e=(0,t.jsx)(U.EnvironmentBadge,{size:"sm",type:"production"}):"production"!==V&&(e=(0,t.jsx)(U.EnvironmentBadge,{size:"sm",type:"preproduction"})):e=null,(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-copy-16 m-0 text-gray-1000",children:A?.copy?A.copy:"Create a new deployment with the same source code as your current one but with the latest Project Settings."}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:(0,t.jsxs)("label",{children:[(0,t.jsx)("div",{className:"text-gray-900 text-sm mb-2",children:"Choose Environment"}),(0,t.jsxs)(c.Select,{"aria-label":"Environments",onChange:e=>{H(e.target.value)},prefix:(0,t.jsx)(O.EnvironmentIcon,{id:V}),suffix:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[e," ",(0,t.jsx)(j.ChevronDown,{})]}),value:V,children:[(0,t.jsxs)("optgroup",{label:"System Environments",children:[(0,t.jsx)("option",{disabled:!en,value:"production",children:"Production"}),(0,t.jsx)("option",{value:P.EnvTarget.Preview,children:"Preview"})]}),er.length>0?(0,t.jsx)("optgroup",{label:(0,C.pluralize)("Custom Environment",er.length),children:er.sort((e,t)=>e.slug.localeCompare(t.slug)).map(e=>(0,t.jsx)("option",{value:e.id,children:e.slug},e.id))}):(0,t.jsx)("option",{disabled:!0,children:"Your project has no custom environments"})]})]})})]})},[er,V,en,A]),ef=(0,i.useMemo)(()=>em||"production"!==V?ea.length<=0?null:(0,t.jsxs)("div",{className:"space-y-[6px]",children:[(0,t.jsx)("p",{className:"text-copy-14 m-0",style:{color:"var(--accents-6)"},children:"Assigned domains:"}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[ea.slice(0,2).map(e=>(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)("div",{className:"text-gray-900",children:(0,t.jsx)(b.Globe,{size:16})}),(0,R.default)(e)?(0,t.jsx)("p",{className:"text-copy-16",children:"name"}):(0,t.jsx)(r.Link,{href:`https://${e}`,target:"_blank",className:"hover:underline underline-offset-2",children:e})]},e)),e&&ea.length-2>0&&ea.length<13?(0,t.jsx)("p",{className:"text-copy-16 m-0",children:(0,t.jsxs)(r.Link,{href:`/${X?X.slug:Q?.username}/${encodeURIComponent(e.name)}/settings/domains`,style:{fontSize:13},tab:!0,variant:"highlight",children:["...and ",ea.length-2," more."]})}):null,e&&ea.length>=13?(0,t.jsx)("p",{className:"text-copy-16 m-0",children:(0,t.jsxs)(r.Link,{href:`/${X?X.slug:Q?.username}/${encodeURIComponent(e.name)}/settings/domains`,style:{fontSize:13},tab:!0,variant:"highlight",children:["...and over ",10," more."]})}):null]})]}):(0,t.jsx)(d.Note,{fill:!0,size:"small",type:"warning",children:(0,t.jsxs)("p",{className:"text-copy-14 m-0",children:["Custom domains won't be assigned—auto-assignment is disabled."," ",(0,t.jsx)(r.Link,{external:!0,href:"/docs/deployments/managing-deployments#promote-deployment-to-production",variant:"highlight",children:"Learn about promoting deployments"})]})}),[e,Q,X,em,ea,V]);return{modal:(0,i.useMemo)(()=>(0,t.jsxs)(l.Modal.Modal,{active:o,"data-testid":(0,g.tid)("redeploy-modal","modal"),onAnimationDone:ed,onClickOutside:ec,width:"600px",children:[(0,t.jsxs)(l.Modal.Body,{className:"[&>hr]:w-full",children:[(0,t.jsx)(l.Modal.Header,{children:(0,t.jsx)(l.Modal.Title,{children:"Redeploy"})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-7 flex-initial",children:[ep,E?(0,t.jsx)($,{deployments:E,onSelect:e=>y(E.filter(t=>t.uid===e)[0])}):null,ea.length>0&&ef,F?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.Error,{error:F})}):null,(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsxs)(s.Checkbox,{checked:G,onChange:()=>{Y(!G)},children:["Use existing Build Cache."," "]}),(0,t.jsx)(r.Link,{external:!0,href:"/docs/deployments/troubleshoot-a-build#understanding-build-cache",style:{fontSize:13},variant:"highlight",children:"Learn about Build Cache"})]}),J?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s.Checkbox,{checked:W,fullWidth:!0,onChange:()=>{K(!W)},children:"Use project's Ignore Build Step"})}):null]})]}),(0,t.jsxs)(l.Modal.Actions,{children:[(0,t.jsx)(l.Modal.Action,{loading:!1,onClick:ec,type:"secondary",children:"Cancel"}),(0,t.jsx)(l.Modal.Action,{"data-testid":(0,g.tid)("redeploy-modal","redeploy-button"),disabled:!eo&&!es&&!h,loading:p,onClick:eu,children:"Redeploy"})]})]}),[o,ed,ec,h,E,ea,ep,ef,F,G,J,W,eo,es,p,eu]),close:ec,open:el}}e.s(["default",()=>z],5129431)},8488254,e=>{"use strict";var t=e.i(1146226),n=e.i(5169864),i=e.i(5610834),r=e.i(455575),o=e.i(5771992),s=e.i(6060673),a=e.i(5129431);let l=(0,n.createContext)({open:()=>{}});function c(){return(0,n.useContext)(l)}function d(e){let{children:i}=e,r=(0,n.useRef)(()=>{}),o=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.current(...t)},[]);return(0,t.jsxs)(l.Provider,{value:{open:o},children:[i,(0,t.jsx)(n.Suspense,{children:(0,t.jsx)(u,{openRef:r})})]})}function u(e){let{openRef:l}=e,c=(0,i.useParams)(),{data:d}=(0,s.useProject)(c?.project),u=(0,r.useToasts)(),{data:m}=(0,o.default)({limit:5,projectId:d?.id||"",target:"production"}),{modal:p,open:f}=(0,a.default)(d||void 0);return l.current=(0,n.useCallback)(e=>{if(!m)return;let n=m.deployments.map(e=>({id:e.uid,...e}));u.removeToastByKey("save-and-redeploy"),u.success({key:"save-and-redeploy",text:(0,t.jsx)("span",{className:"hyphens-auto",children:`${e??""}${e?" ":""}A new deployment is needed for changes to take effect.`}),action:"Redeploy",onAction:()=>{f(n,{redirect:!1,copy:"You are about to create a new Deployment with the latest configuration from your Project Settings."})}})},[m,f,u]),p}e.s(["SaveAndRedeployProvider",()=>d,"useSaveAndRedeployContext",()=>c])},7482607,e=>{"use strict";var t=e.i(8488254);function n(){let{open:e}=(0,t.useSaveAndRedeployContext)();return{open:e}}e.s(["useSaveAndRedeploy",()=>n])},5174113,e=>{"use strict";let t={on:{hobby:{duration:60,maxDuration:60,cpu:"standard_legacy"},pro:{duration:90,maxDuration:800,cpu:"standard"},enterprise:{duration:90,maxDuration:800,cpu:"standard"}},on_active_cpu:{hobby:{duration:300,maxDuration:300,cpu:"standard"},pro:{duration:300,maxDuration:800,cpu:"standard"},enterprise:{duration:300,maxDuration:800,cpu:"standard"}},off:{hobby:{duration:10,maxDuration:60,cpu:"standard_legacy"},pro:{duration:15,maxDuration:300,cpu:"standard"},enterprise:{duration:15,maxDuration:900,cpu:"standard"}}};e.s(["fluidConfig",0,t,"getDefaultConfig",0,(e,n,i)=>{let r=e??"hobby";return n?i?t.on_active_cpu[r]:t.on[r]:t.off[r]}])},3542742,e=>{"use strict";var t=e.i(1146226),n=e.i(5169864),i=e.i(6060673),r=e.i(1138941);let o=(0,n.createContext)(null);function s(e){let{children:s}=e,[a,l]=(0,n.useState)({}),c=(0,r.useProjectIdOrName)(),{data:d,isLoading:u,mutate:m}=(0,i.useProject)(c),p=(0,n.useMemo)(()=>({functionDefaultTimeout:a?.functionDefaultTimeout??d?.resourceConfig?.functionDefaultTimeout,functionDefaultMemoryType:a?.functionDefaultMemoryType??d?.resourceConfig?.functionDefaultMemoryType}),[a,d?.resourceConfig]);return(0,t.jsx)(o.Provider,{value:{resourceConfig:p,isProjectLoading:u,projectData:d,onRevalidateProject:m,onSetResourceConfigState:e=>{l(e)}},children:s})}function a(){let e=(0,n.useContext)(o);if(!e)throw Error("useFunctionResourceConfig must be used within a FunctionResourceConfigProvider");return e}e.s(["FunctionResourceConfigProvider",()=>s,"useFunctionResourceConfig",()=>a])},1556740,e=>{"use strict";var t=e.i(1146226),n=e.i(5169864),i=e.i(5255926),r=e.i(1848296),o=e.i(4138437),s=e.i(3306538),a=e.i(9318197),l=e.i(8522580),c=e.i(9722978),d=e.i(7917902),u=e.i(3322724),m=e.i(57106),p=e.i(1717203),f=e.i(7557283),h=e.i(7837522),y=e.i(7780974),g=e.i(7482607),x=e.i(4396019),v=e.i(58194),j=e.i(8188735),b=e.i(5174113),E=e.i(7168496),P=e.i(185801),C=e.i(4670733),S=e.i(3542742);let T={standard_legacy:{memory:1,cpu:.6,label:"Basic",description:"Cost-effective option for lightweight apps and APIs"},standard:{memory:1.7,cpu:1,label:"Standard",description:"Predictable performance for production workloads"},performance:{memory:3,cpu:1.7,label:"Performance",description:"Increased performance for latency-sensitive applications and SSR workloads"}},w={standard:{memory:2,cpu:1,label:"Standard",description:"Predictable performance for production workloads"},performance:{memory:4,cpu:2,label:"Performance",description:"Increased performance for latency-sensitive applications and SSR workloads"}};function D(){let{projectData:D,isProjectLoading:A,onRevalidateProject:N,resourceConfig:M,onSetResourceConfigState:I}=(0,S.useFunctionResourceConfig)(),R=(0,u.useIsMobile)(),{team:_,isTeam:k}=(0,d.useAccount)(),L=_?.billing?.plan||"hobby",{open:U}=(0,g.useSaveAndRedeploy)(),{track:O}=(0,h.useTrackActivity)(),[B,F]=(0,n.useState)(!1),[$,z]=(0,n.useState)(),{can:G,isLoading:Y}=(0,p.default)(),V=(0,n.useRef)(null),{deployment:H,isLoading:J}=(0,x.useProjectProductionDeployment)(D?.id),{data:W,isLoading:K}=(0,v.useBuilds)(H??null),q=(0,E.isFluidEnabled)(D),Z=(0,C.useNetCpuFunctionsFlag)(D?.id??""),Q=q&&Z.isReady&&Z.value,X=(0,n.useMemo)(()=>{if(!H||!W)return!1;for(let e of W.builds){let t=e.config.vercelConfig?.functions;if(null!=t&&"object"==typeof t){for(let[e,n]of Object.entries(t))if(void 0!==n.memory)return!0}}return!1},[H,W]),ee=(0,n.useMemo)(()=>{if(void 0===k||!D)return;let e=_?.billing?.plan??"hobby";return D.resourceConfig?.functionDefaultMemoryType?D.resourceConfig.functionDefaultMemoryType:k&&"hobby"!==e||Q?"standard":"standard_legacy"},[k,_?.billing?.plan,D,Q]);(0,n.useEffect)(()=>{ee&&ee!==V.current&&(V.current=ee,I({...D?.resourceConfig,functionDefaultMemoryType:ee}))},[ee,M?.functionDefaultMemoryType,D?.resourceConfig,I]);let et=A||Y||J||K,en=G(f.Action.Update,f.Resource.Project),ei=!et&&"hobby"!==L&&en,er=ei&&M?.functionDefaultMemoryType!==ee,eo=async()=>{if(D&&M?.functionDefaultMemoryType){F(!0);try{await (0,j.default)(D.id,_?.id,{resourceConfig:{functionDefaultMemoryType:M.functionDefaultMemoryType}}),O(y.VercelActivityAction.ProjectSettingsUpdated,{projectId:D.id,teamId:_?.id??"",name:"function-cpu",value:M.functionDefaultMemoryType}),await N(),U("Updated Function CPU setting successfully.")}catch(t){await e.A(7826398).then(e=>{let{errorToString:n}=e;z(n(t))})}finally{F(!1)}}},es=Object.keys(T),ea=q?es.filter(e=>"standard_legacy"!==e):es,el=Q?w.standard:T.standard_legacy;return(0,t.jsxs)(P.ProjectSettingsFieldset,{description:"",disabled:!ei,error:$,highlightNote:!et&&!en,note:et?(0,t.jsx)(i.Skeleton,{height:32,width:200}):"hobby"===L?(0,t.jsxs)("p",{className:"text-copy-14",children:["This feature is available on the"," ",(0,t.jsx)(m.Link,{external:!0,href:"/pricing",type:"highlight",children:"Pro plan"})," "]}):en?(0,t.jsxs)("p",{className:"text-copy-14",children:["Learn more about"," ",(0,t.jsx)(m.Link,{external:!0,href:"/docs/functions/configuring-functions/memory",type:"highlight",children:"Function CPU"})," ","and"," ",(0,t.jsx)(m.Link,{external:!0,href:"/docs/functions/configuring-functions/memory#pricing",type:"highlight",children:"Pricing"})]}):(0,t.jsx)("p",{className:"text-copy-14",children:"You need additional permissions to manage your project's CPU setting."}),onSave:eo,saveDisabled:!er,saveLoading:B,title:"Function CPU",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["This controls the maximum amount of CPU utilization your Vercel Functions can use while executing. Standard is optimal for most frontend workloads.",Q?null:(0,t.jsxs)(t.Fragment,{children:[" ","You can override this per function using the"," ",(0,t.jsx)(m.Link,{external:!0,href:"/docs/functions/configuring-functions/memory#setting-custom-function-memory-size",type:"highlight",children:(0,t.jsx)("code",{children:"vercel.json"})})," ","file."]})]}),(0,t.jsx)("p",{className:"text-copy-14",children:"A new Deployment is required for your changes to take effect."})]}),(0,t.jsx)(a.Spacer,{y:.5}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial w-full",children:["hobby"===L?(0,t.jsx)(l.Note,{children:(0,t.jsxs)("p",{className:"text-copy-14",children:["You currently have"," ",(0,t.jsxs)(s.Badge,{capitalize:!1,size:"sm",variant:"blue-subtle",children:[el.cpu," vCPU"]})," ","and"," ",(0,t.jsxs)(s.Badge,{capitalize:!1,size:"sm",variant:"blue-subtle",children:[el.memory," GB Memory"]})," ","on the Hobby plan. Upgrade to get faster CPU and more memory."]})}):null,(0,t.jsx)(r.RadioGroup,{onChange:e=>{I({...M,functionDefaultMemoryType:e})},value:M?.functionDefaultMemoryType??(0,b.getDefaultConfig)(L,(0,E.isFluidEnabled)(D),Q).cpu,children:(0,t.jsx)("div",{className:(0,c.clsx)("flex flex-col items-stretch justify-start flex-initial",R?"gap-2":"gap-4"),children:ea.map(e=>{let{memory:n,cpu:l,label:d,description:u}=Q?w[e]:T[e],m=l<=1;return(0,t.jsx)(i.Skeleton,{show:et,children:(0,t.jsx)(o.Card,{className:(0,c.clsx)("border p-0 pl-4",{"border-solid border-[var(--ds-blue-700)]":M?.functionDefaultMemoryType===e}),gap:2,padding:4,secondary:M?.functionDefaultMemoryType===e,children:(0,t.jsx)(r.RadioGroup.Item,{className:"items-center",fullWidth:!0,value:e,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-between flex-initial p-4 pl-2",children:[(0,t.jsxs)("div",{className:(0,c.clsx)("flex items-stretch justify-start flex-initial",R?"flex-col":"flex-row"),children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:d}),(0,t.jsxs)("div",{className:(0,c.clsx)("flex flex-row items-stretch justify-start flex-initial",R?"mb-1 mt-1":""),children:[(0,t.jsx)(a.Spacer,{x:+!R}),(0,t.jsxs)(s.Badge,{className:"w-fit p-2 normal-case",size:"sm",variant:M?.functionDefaultMemoryType===e?"blue-subtle":"gray-subtle",children:[l," vCPU",m?"":"s"]}),(0,t.jsx)(a.Spacer,{x:R?.25:.5}),(0,t.jsxs)(s.Badge,{className:"w-fit p-2",size:"sm",variant:M?.functionDefaultMemoryType===e?"blue-subtle":"gray-subtle",children:[n," GB Memory"]})]})]}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:u})]})})},e)},e)})})}),!et&&ei&&X?(0,t.jsx)(l.Note,{className:"mt-4 pl-4",fill:!0,type:"warning",children:(0,t.jsxs)("p",{className:"text-copy-14 text-inherit p-1 pl-2",children:["The current production deployment has custom overrides in"," ",(0,t.jsx)(m.Link,{external:!0,href:"/docs/functions/configuring-functions/memory#setting-custom-function-memory-size",type:"highlight",children:(0,t.jsx)("code",{children:"vercel.json"})}),","," ",Q?"which gets ignored.":"which takes priority over this setting."]})}):void 0]})]})}e.s(["FunctionDefaultMemoryType",()=>D,"LAMBDA_DEFAULT_MEMORY_SIZE_TEMPLATE",0,T,"LAMBDA_DEFAULT_MEMORY_SIZE_TEMPLATE_ACTIVE_CPU",0,w])}]);

//# debugId=0df6c723-2a16-10f5-ee8b-942918b89165
//# sourceMappingURL=bc33d1903654ac75.js.map