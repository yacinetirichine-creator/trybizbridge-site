;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c683a99b-6fff-2973-0168-d95e995d0037")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7886235,e=>{e.v({checked:"toggle-module__fUrgQa__checked",disabled:"toggle-module__fUrgQa__disabled",input:"toggle-module__fUrgQa__input "+e.i(5472387).visuallyHidden,large:"toggle-module__fUrgQa__large",medium:"toggle-module__fUrgQa__medium",noMargin:"toggle-module__fUrgQa__noMargin",switchFirst:"toggle-module__fUrgQa__switchFirst",thumb:"toggle-module__fUrgQa__thumb",thumbIcon:"toggle-module__fUrgQa__thumbIcon",titleCasing:"toggle-module__fUrgQa__titleCasing",toggle:"toggle-module__fUrgQa__toggle",wrapper:"toggle-module__fUrgQa__wrapper"})},1906681,e=>{"use strict";var t=e.i(1146226),a=e.i(5169864),l=e.i(9722978),i=e.i(4004502),r=e.i(9544652),s=e.i(7886235);let n={amber:{background:"--ds-amber-700",foreground:"--ds-amber-100",lightModeForeground:"--ds-amber-1000",checkedBackground:"--ds-gray-100"},"amber-inverted":{background:"--ds-gray-100",foreground:"--ds-gray-100",lightModeForeground:"--ds-amber-1000",checkedBackground:"--ds-amber-700"},"amber-track-only":{background:"--ds-amber-700",foreground:"--ds-black",lightModeForeground:"--ds-black",checkedBackground:"--ds-gray-100"},red:{background:"--ds-red-600",foreground:"--ds-red-100",lightModeForeground:"--ds-red-1000",checkedBackground:"--ds-gray-100"}},d=e=>{let{className:d,children:c,size:o,disabled:u,name:h,checked:g,onChange:x,onClick:m,onBlur:f,onFocus:p,onKeyDown:j,noMargin:v,direction:y="label-first",labelCasing:b="title",stopPropagation:_=!1,icon:C,color:w,...k}=e,N=(0,r.useDisabled)()||u,E=(0,a.useCallback)(e=>{!N&&x&&(_&&e.stopPropagation(),x(!g))},[g,x,N,_]),A={...k.style};if(w){let e=n[w];A["--unchecked-bg-color-override"]=`var(${e.background})`,A["--checked-bg-color-override"]=`var(${e.checkedBackground})`,A["--thumb-fg-color-override"]=`var(${e.foreground})`,e.lightModeForeground&&(A["--thumb-light-fg-color-override"]=`var(${e.lightModeForeground})`)}return(0,t.jsxs)("label",{className:(0,l.clsx)(s.default.wrapper,d,{[String(s.default.large)]:"large"===o,[String(s.default.medium)]:"medium"===o,[String(s.default.switchFirst)]:"switch-first"===y,[String(s.default.titleCasing)]:"title"===b}),"data-version":"v1",...k,style:A,children:[c?(0,t.jsx)("span",{children:c}):null,(0,t.jsx)("input",{checked:g,className:(0,l.clsx)(s.default.input,"group"),"data-testid":(0,i.tid)(k["data-testid"]??"toggle","input"),disabled:N,name:h,onBlur:f,onChange:E,onClick:m,onFocus:p,onKeyDown:e=>{"Enter"===e.key&&E(e),j?.(e)},type:"checkbox"}),(0,t.jsx)("span",{className:(0,l.clsx)(s.default.toggle,{[String(s.default.checked)]:g,[String(s.default.disabled)]:N,[String(s.default.noMargin)]:v},""),children:(0,t.jsx)("div",{className:(0,l.clsx)(s.default.thumb,{[String(s.default.checked)]:g}),children:C?(0,t.jsxs)("div",{"aria-hidden":!0,className:(0,l.clsx)({[String(s.default.checked)]:g,[String(s.default.thumbIcon)]:!N},"flex justify-center items-center w-full h-full",N?"text-gray-700":"text-gray-900 dark:text-background-100"),children:[g?C.checked:null,g?null:C.unchecked]}):null})})]})};e.s(["Toggle",()=>d])},4075507,e=>{e.v({border:"card-module__OLxv4G__border",borderBetweenHorizontal:"card-module__OLxv4G__borderBetweenHorizontal",borderBetweenVertical:"card-module__OLxv4G__borderBetweenVertical",card:"card-module__OLxv4G__card",hoverable:"card-module__OLxv4G__hoverable",rounded:"card-module__OLxv4G__rounded",secondary:"card-module__OLxv4G__secondary",shadow:"card-module__OLxv4G__shadow"})},4138437,e=>{"use strict";var t=e.i(1146226),a=e.i(9722978),l=e.i(9508212),i=e.i(4075507);function r(e){let{children:r,direction:s="column",className:n,border:d,borderBetween:c,secondary:o,hoverable:u,shadow:h,rounded:g=!0,...x}=e;return(0,t.jsx)(l.Stack,{...x,className:(0,a.clsx)(i.default.card,{[i.default.border||""]:d,[i.default.borderBetweenHorizontal||""]:c&&"row"===s,[i.default.borderBetweenVertical||""]:c&&"column"===s,[i.default.secondary||""]:o,[i.default.hoverable||""]:u,[i.default.shadow||""]:h,[i.default.rounded||""]:g},n),direction:s,children:r})}e.s(["Card",()=>r])},1000921,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 7.25H4.5V8.75H5.25H9.43934L7.96967 10.2197L7.43934 10.75L8.5 11.8107L9.03033 11.2803L11.7803 8.53033C12.0732 8.23744 12.0732 7.76256 11.7803 7.46967L9.03033 4.71967L8.5 4.18934L7.43934 5.25L7.96967 5.78033L9.43934 7.25H5.25ZM8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8C14.5 11.5899 11.5899 14.5 8 14.5ZM0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8Z" fill="currentColor"/>');e.s(["ArrowCircleRight",0,t])},7429602,e=>{"use strict";var t=e.i(1146226),a=e.i(3306538),l=e.i(2504781),i=e.i(4557026),r=e.i(9722978);e.s(["default",0,function(e){let{feedback:s,muted:n,size:d,variant:c,className:o}=e;return(0,t.jsxs)("div",{className:(0,r.clsx)("flex items-center gap-[var(--geist-space)]",o),children:[(0,t.jsx)(a.Badge,{className:n?"text-[var(--geist-background)] bg-[var(--accents-3)] border-0 dark:text-[var(--geist-background)] dark:bg-[var(--accents-6)]":"",size:d,variant:n?"gray-subtle":c||"pink",children:"Beta"}),s?(0,t.jsx)(l.Button,{className:"sm:block max-[600px]:hidden",onClick:i.dispatchShowFeedbackEvent,size:"small",type:"tertiary",typeName:"button",children:"Provide feedback"}):null]})}])},7450862,e=>{"use strict";var t=e.i(5169864);function a(){return window.location.hash.slice(1)}let l="hashreset";function i(e){let t=window.navigation;return t?.addEventListener&&t.addEventListener("currententrychange",e),window.addEventListener("hashchange",e),window.addEventListener("popstate",e),window.addEventListener(l,e),()=>{t?.removeEventListener?.("currententrychange",e),window.removeEventListener("hashchange",e),window.removeEventListener("popstate",e),window.removeEventListener(l,e)}}function r(){return{hash:(0,t.useSyncExternalStore)(i,a,a),setHash:(0,t.useCallback)(e=>{if(e)window.location.hash=`#${e}`;else{let e=new URL(window.location.href);e.hash="",history.replaceState(void 0,document.title,e),window.dispatchEvent(new Event(l))}},[])}}e.s(["useHash",()=>r])},185801,e=>{"use strict";var t=e.i(1146226),a=e.i(2504781),l=e.i(7137884),i=e.i(5063443),r=e.i(8517043),s=e.i(1232681),n=e.i(9318197),d=e.i(9508212),c=e.i(3895030),o=e.i(9792418),u=e.i(5468328),h=e.i(57106),g=e.i(6143247),x=e.i(7450862),m=e.i(6239252),f=e.i(4004502),p=e.i(9544652),j=e.i(3277920),v=e.i(7429602);function y(e){let{title:y,description:b,note:_,error:C,type:w,disabled:k=!1,disabledForBilling:N,disabledWall:E=!0,onSave:A=null,saveLoading:T=!1,saveDisabled:P=!1,saveDisabledMessage:S,highlightNote:L=!1,beta:M=!1,action:D=null,className:I,children:F,headerNote:B,disabledAction:O}=e,G=(0,j.useMounted)(),{hash:R}=(0,x.useHash)(),U=(0,p.useDisabled)(k),H=O?(0,t.jsx)(s.FieldsetFooter.Actions,{children:O}):null,$=y.toLowerCase().replaceAll(" ","-");return(0,t.jsx)("div",{className:(0,g.cn)(I,"scroll-mt-16 md:scroll-mt-28"),id:$,children:(0,t.jsxs)(r.Fieldset,{"data-testid":(0,f.tid)("project-settings",y),disabled:U&&void 0===N,type:U||N||"error"!==w?"default":"error",highlight:R===$&&G,children:[(0,t.jsxs)(l.FieldsetContent,{disabled:N,disabledWall:E,children:[(0,t.jsx)(o.FieldsetTitle,{children:(0,t.jsxs)(d.Stack,{direction:"row",gap:3,style:{flexWrap:"wrap"},align:"center",children:[(0,t.jsx)("a",{href:`#${$}`,style:{color:"inherit",textDecoration:"none"},children:(0,t.jsx)(m.SearchContextHighlighter,{children:y})}),M?(0,t.jsx)(v.default,{muted:N}):null,B]})}),(0,t.jsx)(c.FieldsetSubtitle,{children:b}),F]}),(0,t.jsxs)(s.FieldsetFooter,{disabled:!1,highlight:N||L,className:"text-gray-900",children:[(0,t.jsx)(s.FieldsetFooter.Status,{children:C?(0,t.jsx)(i.ErrorText,{children:C instanceof Error?(0,t.jsxs)(t.Fragment,{children:[C.message,C?.link?(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(h.Link,{href:C.link,type:"blend",children:C.action??"Learn More"})]}):null]}):C}):_||null}),(0,t.jsx)(n.Spacer,{x:.5}),!U&&(A||D)?(0,t.jsxs)(s.FieldsetFooter.Actions,{children:[A?(0,t.jsx)(u.Tooltip,{text:S,children:(0,t.jsx)(a.Button,{"data-testid":(0,f.tid)("project-settings","save"),disabled:U||P,loading:T,onClick:A,size:"small",children:"Save"})}):null,D]}):H]})]})})}e.s(["ProjectSettingsFieldset",()=>y])},5129317,e=>{e.v({linkButton:"index-module__1SkRrq__linkButton"})},278937,e=>{"use strict";var t=e.i(1146226),a=e.i(2504781),l=e.i(4030453),i=e.i(6891161),r=e.i(5255926),s=e.i(1906681),n=e.i(5468328),d=e.i(455575),c=e.i(57106),o=e.i(1000921),u=e.i(5169864),h=e.i(8042625),g=e.i(277234),x=e.i(4244280),m=e.i(5338940),f=e.i(4670733),p=e.i(1717203),j=e.i(7557283),v=e.i(1138941),y=e.i(6060673),b=e.i(185801),_=e.i(5129317);function C(){let[e,C]=(0,u.useState)(!1),[w,k]=(0,u.useState)(null),N=(0,v.useProjectIdOrName)(),{team:E,isReady:A}=(0,m.useTeam)(),T=(0,d.useToasts)(),{data:P,mutate:S}=(0,y.useProject)(N),{can:L}=(0,p.default)(),{loading:M,error:D,purgeDataCache:I}=function(){let[e,t]=(0,u.useState)({loading:!1,error:null,data:null}),{isReady:a,team:l}=(0,m.useTeam)();return{...e,purgeDataCache:i=>{let{projectId:r,onSuccess:s,onError:n}=i;if(!a||!r)return;t({data:null,error:null,loading:!0});let d={teamId:l?.id,projectIdOrName:r},c=`${x.API_DATA_CACHE_PURGE_ALL}${(0,h.encode)(d)}`;(0,g.fetchAPI)(c,{method:"DELETE"}).then(()=>{t({...e,loading:!1,data:{status:200}}),s?.()}).catch(a=>{t({...e,loading:!1,error:a}),n?.()})}}}(),[F,B]=(0,u.useState)(!1),O=!P||!A,G=L(j.Action.Update,j.Resource.Project),R=!O&&G,U=!P?.dataCache?.userDisabled,{value:H}=(0,f.useLaunchDarklyFeatureFlag)("data-cache-billing-feature"),$=(0,u.useCallback)(async()=>{try{if(!P)return;let e=P.id,t=E?.id;C(!0),await (0,g.fetchAPI)(`${(0,x.API_PROJECTS_DATA_CACHE)(e)}${(0,h.encode)({teamId:t})}`,{method:"PATCH",body:{disabled:U},throwOnHTTPError:!0}),await S()}catch(e){if(e instanceof Error)return void k(e);throw e}finally{C(!1)}},[C,k,U,E,P,S]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Modal.Modal,{active:F,onClickOutside:()=>B(!1),children:[(0,t.jsxs)(i.Modal.Body,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial mb-4",children:[(0,t.jsx)(i.Modal.Title,{children:"Purge Data Cache"}),(0,t.jsx)(i.Modal.Subtitle,{children:"All data in the cache will be deleted and then re-validated on next request."})]}),(0,t.jsxs)("p",{className:"text-copy-16",children:["This may cause a ",(0,t.jsx)("strong",{children:"temporary increase"})," in request times for users while new data is re-fetched."]})]}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:()=>B(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(i.Modal.Action,{disabled:M,onClick:()=>{I({projectId:P?.id,onSuccess:()=>{B(!1),T.success("Cache purged successfully.")},onError:()=>{T.error("Cache purge failed.")}})},type:"error",children:"Continue & Purge Data Cache"})]})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-8 flex-initial tailwind-preflight",children:(0,t.jsxs)(b.ProjectSettingsFieldset,{description:(0,t.jsx)("span",{className:"text-copy-14 text-gray-900",children:"Manage data and components cached automatically by compatible frameworks when using Vercel Functions"}),disabled:O,disabledForBilling:(!!O||!G)&&void 0,error:D,note:(0,t.jsxs)(t.Fragment,{children:["Learn more about ",(0,t.jsx)(c.Link,{external:!0,href:"/docs/infrastructure/data-cache",type:"highlight",children:"Data Cache"})]}),saveDisabled:!R,saveLoading:M,title:"Data Cache",children:[H?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(s.Toggle,{checked:U,disabled:O||!G||e,onChange:()=>void $(),size:"large"}),(0,t.jsx)("p",{className:"text-copy-14",children:U?"Enabled":"Disabled"})]}),w?(0,t.jsx)("div",{className:"flex flex-col items-start justify-start gap-2 flex-initial",style:{marginTop:"8px"},children:(0,t.jsx)(l.Error,{error:w})}):null]}):null,(0,t.jsxs)(r.Skeleton,{show:O,children:[(0,t.jsx)("div",{className:"my-5",children:(0,t.jsx)("hr",{className:"geist-hr-reset"})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("h5",{className:"text-heading-16",children:"Purge Cache"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Delete the entire contents of the Data Cache"})]}),(0,t.jsx)(n.Tooltip,{disableTriggers:G,text:"You need additional permissions to purge cache.",children:(0,t.jsx)(a.Button,{"aria-label":"Trash can",disabled:O||!G,onClick:()=>B(!0),svgOnly:!0,children:"Purge Data Cache"})})]})}),(0,t.jsx)("div",{className:"my-5",children:(0,t.jsx)("hr",{className:"geist-hr-reset"})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("h5",{className:"text-heading-16",children:"Cache Usage"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"View most requested cached data, hit/miss ratio and more"})]}),(0,t.jsx)(c.Link,{className:_.default.linkButton,href:E?`/${E.slug}/~/usage#data-cache`:"/dashboard/usage#data-cache",variant:"highlight",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)("span",{children:"View Usage"}),(0,t.jsx)(o.ArrowCircleRight,{})]})})]})})]})]})})]})}var w=e.i(1515636),k=e.i(8893913),N=e.i(3306538),E=e.i(4138437),A=e.i(3500331),T=e.i(1848296),P=e.i(5323212),S=e.i(9318197),L=e.i(3671642),M=e.i(9722978);function D(e){let{active:a,hideModal:l,disabled:r,onContinue:s,title:n,subtitle:d,description:c,type:o}=e;return(0,t.jsxs)(i.Modal.Modal,{active:a,onClickOutside:()=>l(),children:[(0,t.jsxs)(i.Modal.Body,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial mb-4",children:[(0,t.jsx)(i.Modal.Title,{children:n}),(0,t.jsx)(i.Modal.Subtitle,{children:d})]}),(0,t.jsx)("p",{className:"text-copy-16",children:c})]}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:()=>l(),type:"secondary",children:"Cancel"}),(0,t.jsxs)(i.Modal.Action,{disabled:r,onClick:s,type:o,children:["Continue & ",n]})]})]})}function I(e,t){if("invalidate"===t&&"*"===e)return"Cannot invalidate all";if(0===e.trim().length)if("invalidate"===t)return"Required";else return"Required (or use * to purge all)";return null}function F(e){let{radioValue:a,enabledValue:l,label:i,description:r,badge:s,badgeColor:n}=e;return(0,t.jsx)(E.Card,{className:(0,M.default)("border p-0 pl-4",{"border-solid border-[var(--ds-blue-700)]":a===l}),gap:2,padding:4,secondary:a===l,children:(0,t.jsx)(T.RadioGroup.Item,{className:"items-center",fullWidth:!0,value:l,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-between flex-initial p-4 pl-2",children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:i}),(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:[(0,t.jsx)(S.Spacer,{x:1}),s?(0,t.jsx)(N.Badge,{className:"w-fit p-2 normal-case",size:"sm",variant:n,children:s}):null]})]}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:r})]})})},a)}function B(e){let{active:a,hideModal:l,disabled:r,onPurgeAll:s,onPurgeSpecific:n}=e,[d,c]=(0,u.useState)(""),[o,h]=(0,u.useState)("invalidate"),[g,x]=(0,u.useState)("tag"),[m,f]=(0,u.useState)(null),p=()=>{c(""),h("invalidate"),x("tag"),f(null)};return(0,t.jsxs)(i.Modal.Modal,{active:a,width:510,onClickOutside:()=>{l()},children:[(0,t.jsx)(i.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(i.Modal.Title,{children:"Purge CDN Cache"}),(0,t.jsx)(T.RadioGroup,{name:"Purge Method",label:"Purge Method",onChange:e=>{h(e),f(I(d,e))},value:o,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(F,{label:"Invalidate content",description:"The next request will serve stale content while revalidating in the background.",radioValue:o,enabledValue:"invalidate",badge:"Recommended",badgeColor:"blue-subtle"}),(0,t.jsx)(F,{label:"Delete content",description:"The next request will block while revalidating, causing high latency or downtime if your backend is unresponsive.",radioValue:o,enabledValue:"delete",badge:"Dangerous",badgeColor:"red-subtle"})]})}),(0,t.jsx)(L.Label,{value:"Purge By:",id:"tags-input-element",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("div",{className:"flex-none",children:(0,t.jsxs)(P.Select,{"aria-label":"Purge By:",onChange:e=>x(e.target.value),value:g,children:[(0,t.jsx)("option",{value:"tag",children:"Cache Tag"}),(0,t.jsx)("option",{value:"srcimg",children:"Src Image"})]})}),(0,t.jsx)("div",{className:"grow",children:(0,t.jsx)(A.Input,{"aria-label":"Purge By:",error:m,explicitId:"tags-input-element",placeholder:"tag"===g?"product1,product2,product3":"/assets/logo.png",onChange:e=>{let t=e.target.value;c(t),f(I(t,o))},required:!0,value:d})})]})})]})}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:()=>{l(),p()},type:"secondary",children:"Cancel"}),(0,t.jsx)(i.Modal.Action,{disabled:r||!!m,onClick:()=>{let e=I(d,o);f(e),e||("*"===d?s():n({purgeMethod:o,valueType:g,value:d}),p())},type:"error",children:"*"===d?"Purge All":"Purge"})]})]})}var O=e.i(7218483),G=e.i(2405338),R=e.i(7432042);function U(){let[e,l]=(0,u.useState)({type:null}),i=(0,v.useProjectIdOrName)(),{team:s,isReady:o}=(0,m.useTeam)(),{can:f}=(0,p.default)(),y=(0,d.useToasts)(),_="loading"===e.type,C=f(j.Action.Read,j.Resource.EdgeCacheNamespace),N=f(j.Action.Update,j.Resource.Project),{data:E,mutate:A,isLoading:T,error:P}=(0,G.default)(C&&s?.id?`${x.API_EDGE_CACHE_GET_PURGE_METADATA}${(0,h.encode)({projectIdOrName:i,teamId:s.id})}`:null,e=>(0,g.fetchAPI)(e,{method:"GET",headers:{"Content-Type":"application/json"},throwOnHTTPError:!0}),{}),S=T||!o,L=!S&&N,M=E?.lastPurgeAt,I=(0,O.useAgo)(M,{suffix:" ago",alwaysRelative:!0}),F=M&&Date.now()-M<(0,R.default)("15m");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B,{active:"show-modal-1"===e.type,hideModal:()=>l({type:null}),disabled:_,onPurgeAll:()=>{l({type:"loading"}),(0,g.fetchAPI)(`${x.API_EDGE_CACHE_PURGE_ALL}${(0,h.encode)({projectIdOrName:i,teamId:s?.id})}`,{method:"POST",headers:{"Content-Type":"application/json"},throwOnHTTPError:!0}).then(()=>{l({type:null}),y.success("CDN cache purged successfully."),setTimeout(()=>{A()},100)}).catch(e=>{l({type:"error",error:e}),y.error("CDN cache purge failed.")})},onPurgeSpecific:e=>{let t,a,{purgeMethod:r,valueType:n,value:d}=e;l({type:"loading"});let c=r.charAt(0).toUpperCase()+r.slice(1);if("invalidate"===r)if("tag"===n)t=x.API_EDGE_CACHE_INVALIDATE_BY_TAGS,a={tags:d};else if("srcimg"===n)t=x.API_EDGE_CACHE_INVALIDATE_BY_SRC_IMAGES,a={srcImages:[d]};else throw Error(`Invalid valueType: ${n}`);else if("delete"===r)if("tag"===n)t=x.API_EDGE_CACHE_DANGEROUSLY_DELETE_BY_TAGS,a={tags:d};else if("srcimg"===n)t=x.API_EDGE_CACHE_DANGEROUSLY_DELETE_BY_SRC_IMAGES,a={srcImages:[d]};else throw Error(`Invalid valueType: ${n}`);else throw Error(`Invalid purgeMethod: ${r}`);(0,g.fetchAPI)(`${t}${(0,h.encode)({projectIdOrName:i,teamId:s?.id})}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),throwOnHTTPError:!0}).then(()=>{l({type:null}),y.success(`${c}d cache successfully.`),A()}).catch(e=>{l({type:"error",error:e}),y.error(`${c} cache failed.`)})}}),(0,t.jsx)(D,{active:"show-modal-2"===e.type,hideModal:()=>l({type:null}),disabled:_,onContinue:()=>{l({type:"loading"}),(0,g.fetchAPI)(`${x.API_EDGE_CACHE_ROLLBACK_PURGE}${(0,h.encode)({projectIdOrName:i,teamId:s?.id})}`,{method:"POST",headers:{"Content-Type":"application/json"},throwOnHTTPError:!0}).then(()=>{l({type:null}),y.success("CDN cache rolled back successfully."),setTimeout(()=>{A()},100)}).catch(e=>{l({type:"error",error:e}),y.error("CDN cache rollback failed.")})},title:"Undo Purge",subtitle:"Purging the CDN Cache can sometimes cause errors so you may need to undo.",description:"Be aware that undo will use the last cache key, which may not be the most recent data.",type:"warning"}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-8 flex-initial tailwind-preflight",children:[F?(0,t.jsx)(w.ProjectBanner,{callToAction:{label:"Undo Purge",onClick:()=>l({type:"show-modal-2"})},icon:(0,t.jsx)(k.RotateCounterClockwise,{}),label:(0,t.jsxs)(t.Fragment,{children:["This project was last purged ",I,"."]}),variant:"warning"}):null,(0,t.jsx)(b.ProjectSettingsFieldset,{description:(0,t.jsx)("span",{className:"text-copy-14 text-gray-900",children:"Manage responses that are cached using a Cache-Control header or revalidation (ISR, PPR, Image Optimization, etc)."}),disabled:S,disabledForBilling:(!!S||!N)&&void 0,error:P||("error"===e.type?e.error:void 0),note:(0,t.jsxs)(t.Fragment,{children:["Learn more about ",(0,t.jsx)(c.Link,{external:!0,href:"/docs/edge-cache",type:"highlight",children:"CDN Cache"})]}),saveDisabled:!L,saveLoading:_,title:"CDN Cache",children:(0,t.jsxs)(r.Skeleton,{show:S,children:[(0,t.jsx)("div",{className:"my-5",children:(0,t.jsx)("hr",{className:"geist-hr-reset"})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsx)("h5",{className:"text-heading-16",children:"Purge Cache"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Invalidate or delete contents of the CDN Cache"})]}),(0,t.jsx)(n.Tooltip,{disableTriggers:N,text:"You need additional permissions to purge cache.",children:(0,t.jsx)(a.Button,{"aria-label":"Trash can",disabled:S||!N,onClick:()=>l({type:"show-modal-1"}),svgOnly:!0,children:"Purge CDN Cache"})})]})})]})})]})]})}function H(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U,{}),(0,t.jsx)(S.Spacer,{y:2}),(0,t.jsx)(C,{})]})}e.s(["CacheSettings",()=>H],278937)}]);

//# debugId=c683a99b-6fff-2973-0168-d95e995d0037
//# sourceMappingURL=b468829065fb665c.js.map