;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c2c09df2-076b-10f8-6ed6-4baf8c3102b7")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3774835,e=>{"use strict";var t=e.i(277234),r=e.i(2405338);function a(e){let{projectIdOrName:a,teamIdOrSlug:i}=e;return(0,r.default)(["/v1/security/firewall/managed-rules",new URLSearchParams({projectId:a,teamId:i}).toString()],e=>{let[r,a]=e;return(0,t.default)(`${r}?${a}`)})}e.s(["useManagedRulesets",()=>a])},681099,e=>{"use strict";var t=e.i(2405338),r=e.i(8042625),a=e.i(277234),i=e.i(5338940);function l(e){let{isReady:l,team:n}=(0,i.useTeam)();return(0,t.default)(()=>e&&l?`/api/v1/microfrontends/groups/${e}/projects${(0,r.encode)({teamId:n?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{fallbackData:{projects:[]}})}e.s(["useMicrofrontendsGroupProjects",()=>l])},9148191,e=>{"use strict";var t=e.i(5169864),r=e.i(5610834),a=e.i(5338940),i=e.i(6161994),l=e.i(681099),n=e.i(6060673);function s(){let e=(0,r.useParams)(),{data:s}=(0,n.useProject)(e?.project),o=s?.microfrontends?.groupIds[0],{isReady:c,team:u}=(0,a.useTeam)(),{data:d,isLoading:f}=(0,i.useMicrofrontendsGroups)(),{data:m,isLoading:g}=(0,l.useMicrofrontendsGroupProjects)(o),h=m?.projects.find(e=>e.microfrontends?.isDefaultApp),b=s?.microfrontends!==void 0&&!s.microfrontends.isDefaultApp;return(0,t.useMemo)(()=>({defaultProjectName:h?.name,defaultProjectBaseUrl:h?`/${u?.slug}/${h.name}`:null,groupName:d?.groups.find(e=>e.group.id===o)?.group.name??h?.name,isChildMicrofrontend:b,isLoading:!c||!u||g||f,isMicrofrontend:(s?.microfrontends?.groupIds?.length??0)>0}),[h,o,b,f,g,c,s?.microfrontends?.groupIds?.length,u,d])}e.s(["useMicrofrontendsProjectInfo",()=>s])},3219719,(e,t,r)=>{var a=e.r(263217),i=e.r(660575),l=e.r(5729582),n=e.r(7791606),s=e.r(2728359);t.exports=function(e,t,r,o){if(!n(e))return e;t=i(t,e);for(var c=-1,u=t.length,d=u-1,f=e;null!=f&&++c<u;){var m=s(t[c]),g=r;if("__proto__"===m||"constructor"===m||"prototype"===m)break;if(c!=d){var h=f[m];void 0===(g=o?o(h,m,f):void 0)&&(g=n(h)?h:l(t[c+1])?[]:{})}a(f,m,g),f=f[m]}return e}},5120311,(e,t,r)=>{var a=e.r(716543);t.exports=function(e){return a(e,5)}},7829532,(e,t,r)=>{var a=e.r(3219719);t.exports=function(e,t,r){return null==e?e:a(e,t,r)}},594750,421794,e=>{"use strict";var t=e.i(5169864),r=e.i(455575),a=e.i(2405338),i=e.i(4689995),l=e.i(5120311),n=e.i(7829532),s=e.i(2793676),o=e.i(5610834),c=e.i(8042625),u=e.i(277234),d=e.i(4244280),f=e.i(5338940);let m={gen:{name:"Generic Attack",description:"Provide broad protection from various undefined or novel attack vectors."},java:{name:"Java Attack",description:"Mitigate risks of exploitation targeting Java-based applications or components."},lfi:{name:"Local File Inclusion Attack",description:"Prevent unauthorized access to local files through web applications."},ma:{name:"Multipart Attack",description:"Block attempts to bypass security controls using multipart/form-data encoding."},php:{name:"PHP Attack",description:"Safeguard against vulnerability exploits in PHP-based applications."},rce:{name:"Remote Execution Attack",description:"Prevent unauthorized execution of remote scripts or commands."},rfi:{name:"Remote File Inclusion Attack",description:"Prohibit unauthorized upload or execution of remote files."},sd:{name:"Scanner Detection",description:"Detect and prevent reconnaissance activities from network scanning tools."},sf:{name:"Session Fixation Attack",description:"Prevent unauthorized takeover of user sessions by enforcing unique session IDs."},sqli:{name:"SQL Injection Attack",description:"Prohibit unauthorized use of SQL commands to manipulate databases."},xss:{name:"XSS Attack",description:"Prevent injection of malicious scripts into trusted webpages."}};function g(e){return m[e]}function h(e){return e.endsWith("update")?"modified":e.endsWith("insert")?"created":e.endsWith("remove")?"deleted":e.endsWith("priority")?"reordered":"firewallEnabled"===e?"changed":""}function b(e,t,r){let a=r?"You":e.username,{id:i,action:l}=e;return"crs.update"===e.action?{id:i||"",principal:a,rule:i?t.owasp.ruleGroups?.[i].name??i:"",actionTaken:h(l)}:"ip.insert"===e.action||"ip.remove"===e.action?{id:i||"",principal:a,rule:(e.action,"IP Blocking Rule"),actionTaken:h(l)}:"rules.insert"===e.action||"rules.update"===e.action?{id:i||"",principal:a,rule:e.value.name,actionTaken:h(l)}:"rules.remove"===e.action?{id:i||"",principal:a,rule:"a Custom Rule",actionTaken:h(l)}:"rules.priority"===e.action?{id:i||"",principal:a,rule:"Rule",actionTaken:h(l)}:"managedRules.update"===e.action?{id:i||"",principal:a,rule:(()=>{if(!i)return"";let e=j(t,i);return e?e.name:i})(),actionTaken:e.value.active?"enabled":"disabled"}:"botId.toggle"===e.action?{id:i||"",principal:a,rule:"BotID Deep Analysis",actionTaken:e.value?"enabled":"disabled"}:{principal:a,id:i||"",rule:"Firewall",actionTaken:h(l)}}function p(e){return"bot_filter"===e||"bot_protection"===e}function v(e){return"managed_bot_filter"===e||"managed_bot_protection"===e}function x(e){let t=e?.managedRules;return t?.bot_filter??t?.bot_protection}function y(e){return e.bot_filter??e.bot_protection}function j(e,t){return"bot_filter"===t?e.bot_filter??e.bot_protection:"bot_protection"===t?e.bot_protection??e.bot_filter:e[t]}function w(e){if(!e)return;let t=e.draft??e.active;if(!t)return t;let r=new Map,a=Object.keys(t.crs).map(e=>{let{name:a,description:i}=m[e],l={id:e,action:t.crs[e].action,active:t.crs[e].active,name:a,description:i};return r.set(l.id,{...l,type:"owas"}),l}).sort((e,t)=>e.name.localeCompare(t.name)),i=t.rules.map(e=>{let t={id:e.id,description:e.description,name:e.name,action:e.action?.mitigate?.action==="rate_limit"?e.action.mitigate.rateLimit?.action||"log":e.action?.mitigate?.action||"log",active:e.active,value:e,isRateLimit:e.action?.mitigate?.action==="rate_limit"};return r.set(t.id,{...t,type:"custom_rule"}),t});t.ips.forEach(e=>{r.set(e.id,{...e,type:"ip_block"})});let l=t.changes.sort((e,t)=>t.createdAt.localeCompare(e.createdAt));return{currentConfig:t,crsRules:a,rules:i,changes:l,ruleMap:r}}async function C(e){let[t]=e;return(await (0,u.fetchAPI)(t,{method:"GET",throwOnHTTPError:!0,returnStatus:!0})).body}function k(e){let{projectId:l,ruleId:n}=e,{team:s}=(0,f.useTeam)(),u=(0,o.useRouter)(),m=(0,c.encode)({teamId:s?.id,projectId:l}),{data:g,mutate:h,isLoading:b}=(0,a.default)(s&&l?[`${d.API_FIREWALL}/firewall/config${m}`,m]:null,async e=>C(e)),p=(0,r.useToasts)(),v=(0,t.useMemo)(()=>w(g?{...g,draft:null}:void 0),[g]),x=(0,t.useMemo)(()=>w(g),[g]),{trigger:y,isMutating:j}=(0,i.default)(`${d.API_FIREWALL}/firewall/config/draft${m}`,P),{trigger:k,isMutating:I}=(0,i.default)([`${d.API_FIREWALL}/firewall/config/`,`/activate${m}`],A),{trigger:N}=(0,i.default)(`${d.API_FIREWALL}/firewall/config${m}`,P),{trigger:M,isMutating:_}=(0,i.default)(`${d.API_FIREWALL}/firewall/config/draft${m}`,L),R=(0,t.useCallback)(async e=>{try{let t=await P(`${d.API_FIREWALL}/firewall/config/draft${m}`,{arg:e});h({...g||{active:null,versions:[t]},draft:t},{revalidate:!1}).then(()=>null,()=>null)}catch(e){throw p.error(e.message||"Failed to update Firewall. Please try again."),e}},[m,p,g,h]),F=(0,t.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2?arguments[2]:void 0;try{await N(e),t&&(await h(),u.refresh(),r?.())}catch(e){throw p.error(e.message||"Failed to update Firewall. Please try again."),e}},[h,p,g,N,u.refresh]),T=(0,t.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2?arguments[2]:void 0;try{let a=await y(e);await h({...g||{active:null,versions:[a]},draft:a},{revalidate:!1}),t&&(r?.(),h().then(()=>null,()=>null))}catch(e){throw p.error(e.message||"Failed to update Firewall. Please try again."),e}},[h,y,p,g]),B=(0,t.useCallback)(async()=>{try{await M(),await h()}catch(e){throw p.error(e.message||"Failed to discard Firewall changes. Please try again."),e}},[h,M,p]),S=(0,t.useCallback)(async(e,t)=>{try{await k(t);let r=e?.toastSuccessMessage??"Your Firewall changes have been applied successfully";p.success(r),u.refresh(),await h().catch(()=>null)}catch(t){throw p.error(e?.toastErrorMessage||t.message||"Failed to publish Firewall changes. Please try again."),t}},[k,h,p,u]),D=(0,t.useCallback)(()=>{h().then(()=>null,()=>null)},[h]),$=(0,t.useMemo)(()=>{if(!n||!x)return;let e=x.rules.find(e=>e.id===n);if(e)return e.value},[n,x]),z=(0,t.useMemo)(()=>!x||!x.rules.some(e=>e.isRateLimit),[x]);return{activeConfig:v,config:x,showRateLimitModal:z,selectedRule:$,forceConfig:F,updateConfig:T,reorderItem:R,discardChanges:B,publishChanges:S,isPublishing:I,isDiscarding:_,isUpdatingConfig:j,isLoadingConfig:b&&!g,refresh:D}}async function P(e,t){let{arg:r}=t;return(await (0,u.fetchAPI)(e,{method:"PATCH",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify(r)})).body}async function A(e,t){let[r,a]=e,{arg:i="draft"}=t;return await (0,u.fetchAPI)(`${r}${i}${a}`,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify({})})}async function L(e){return await (0,u.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0})}function I(e,t){if(Object.hasOwn(e,"value")){let r=(0,l.default)(e);return r=(0,s.default)(r,"value.id"),"action"===t.type?r.isRateLimit?(0,n.default)(r,"value.action.mitigate.rateLimit.action",t.value):(0,n.default)(r,"value.action.mitigate.action",t.value):(0,n.default)(r,"value.active",t.value),{id:e.id,action:"rules.update",value:r.value}}let r="action"===t.type?{action:t.value,active:e.active}:{action:"disable"===e.action?"log":e.action,active:t.value};return{id:e.id,action:"crs.update",value:r}}e.s(["RULES_TO_NAMES",0,m,"botProtectionFromConfig",()=>x,"botProtectionFromRulesets",()=>y,"createActionConfig",()=>b,"crsRuleToConfig",()=>g,"getRulesetFromRulesets",()=>j,"isBotProtectionData",()=>v,"isBotProtectionManagedRuleset",()=>p],421794),e.s(["formatPatchRule",()=>I,"useFirewallConfig",()=>k],594750)},8114130,e=>{"use strict";function t(e){let t=e?.security?.firewallBypassIps;if(!t)return{enabled:!1};let r={enabled:!1};for(let e of t){let t=e.split("#");if("0.0.0.0/0"===t[0]||"::/0"===t[0]&&t.length>=2){let e=Number.parseInt(t[1],10);!Number.isNaN(e)&&e>Date.now()/1e3&&(r={enabled:!0,ttl:e})}}return r}e.s(["globalBypassStatus",()=>t])},8122440,e=>{"use strict";var t=e.i(4244280),r=e.i(8042625),a=e.i(2405338),i=e.i(277234);function l(e){let{projectIdOrName:l,teamIdOrSlug:n}=e;return(0,a.default)(`${t.API_FIREWALL}/proxy/status${(0,r.encode)({projectId:l,teamId:n})}`,i.fetchAPI)}function n(e){let{projectIdOrName:l,teamIdOrSlug:n}=e;return(0,a.default)(`${t.API_FIREWALL_PROXY_STATUS_V2}${(0,r.encode)({projectId:l,teamId:n})}`,i.fetchAPI)}e.s(["useReverseProxyStatus",()=>l,"useReverseProxyStatusV2",()=>n])},2359044,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)(`<path d="M10.1529 5.07982H10.6408L12.0316 3.67566L12.0999 3.07951C11.3032 2.36953 10.3404 1.87633 9.30236 1.6465C8.26434 1.41667 7.18543 1.45781 6.16754 1.76601C5.14965 2.07422 4.22638 2.63932 3.48496 3.40794C2.74353 4.17656 2.20842 5.12333 1.93018 6.1588C2.08511 6.09468 2.25675 6.08428 2.41817 6.12924L5.19973 5.66611C5.19973 5.66611 5.34125 5.42962 5.41444 5.4444C6.01044 4.78355 6.8341 4.37769 7.7168 4.30991C8.5995 4.24213 9.47448 4.51756 10.1626 5.07982H10.1529Z" fill="#EA4335" style="fill:#EA4335;fill:color(display-p3 0.9176 0.2627 0.2078);fill-opacity:1;"/>
  <path d="M14.0128 6.15871C13.6931 4.97017 13.0368 3.90169 12.1243 3.08435L10.1723 5.05509C10.5791 5.39069 10.9052 5.81518 11.1258 6.29653C11.3464 6.77789 11.4559 7.30354 11.446 7.83384V8.18365C11.6741 8.18365 11.9 8.22901 12.1108 8.31716C12.3216 8.4053 12.5131 8.5345 12.6744 8.69737C12.8357 8.86024 12.9637 9.0536 13.051 9.2664C13.1383 9.4792 13.1832 9.70727 13.1832 9.93761C13.1832 10.1679 13.1383 10.396 13.051 10.6088C12.9637 10.8216 12.8357 11.015 12.6744 11.1778C12.5131 11.3407 12.3216 11.4699 12.1108 11.5581C11.9 11.6462 11.6741 11.6916 11.446 11.6916H7.97147L7.625 12.0463V14.1501L7.97147 14.4999H11.446C12.4162 14.5075 13.3631 14.1996 14.1466 13.6218C14.9301 13.044 15.5086 12.2269 15.7965 11.2914C16.0844 10.3559 16.0664 9.35168 15.7451 8.42732C15.4239 7.50296 14.8165 6.70753 14.0128 6.15871Z" fill="#4285F4" />
  <path d="M4.49204 14.4798H7.96655V11.6715H4.49204C4.2445 11.6715 3.99986 11.6177 3.77469 11.5139L3.2867 11.6666L1.88616 13.0707L1.76416 13.5634C2.54955 14.1622 3.50789 14.4841 4.49204 14.4798Z" fill="#34A853" />
  <path d="M4.49182 5.37027C3.5504 5.37595 2.63423 5.67834 1.8713 6.23523C1.10836 6.79211 0.536746 7.57567 0.236297 8.47646C-0.0641533 9.37726 -0.0784364 10.3503 0.195442 11.2597C0.469321 12.1691 1.01768 12.9694 1.76394 13.5489L3.77935 11.5141C3.52323 11.3972 3.29901 11.2194 3.12593 10.9959C2.95284 10.7723 2.83606 10.5097 2.7856 10.2306C2.73514 9.95144 2.75251 9.66412 2.83622 9.39325C2.91992 9.12238 3.06747 8.87606 3.2662 8.67542C3.46493 8.47478 3.7089 8.32582 3.97719 8.24131C4.24548 8.15679 4.53007 8.13926 4.80654 8.1902C5.08302 8.24115 5.34312 8.35905 5.56454 8.5338C5.78596 8.70855 5.96208 8.93493 6.0778 9.19351L8.09321 7.15872C7.67019 6.60039 7.12498 6.14842 6.50022 5.83816C5.87545 5.5279 5.18807 5.36776 4.49182 5.37027Z" fill="#FBBC05" />`);e.s(["LogoGoogleCloudPlatform",0,t])},9308891,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path d="M7.402 13.8777C9.45763 13.4674 11.1555 13.128 11.175 13.1233L11.2104 13.1148L9.2697 10.507C8.2023 9.07276 7.32898 7.8937 7.32898 7.88691C7.32898 7.87404 9.33293 1.63997 9.3442 1.61779C9.34797 1.61037 10.7117 4.27017 12.65 8.06532C14.4647 11.6184 15.9608 14.5479 15.9747 14.5754L16 14.6253L9.83224 14.6244L3.66449 14.6235L7.402 13.8777ZM0 13.0824C0 13.0787 0.914457 11.2855 2.03212 9.09735L4.06425 5.11896L6.43245 2.87384C7.73497 1.63902 8.80417 0.627201 8.80845 0.625356C8.81274 0.623511 8.79561 0.672228 8.77038 0.733617C8.74515 0.795006 7.58796 3.59893 6.19884 6.96455L3.67317 13.0839L1.83659 13.0865C0.826464 13.0879 0 13.0861 0 13.0824Z" fill="#0089D6" />');e.s(["LogoAzure",0,t])},7527548,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)(`<g clip-path="url(#clip0_53_122)">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12.5 1.5H3.5V7.5H12.5V1.5ZM3.5 0H2V1.5V7.5C2 8.32843 2.67157 9 3.5 9H7.375L7.37501 11.0788C6.45524 11.3155 5.74031 12.0625 5.55001 13H0.75H0V14.5H0.75H5.70802C6.0938 15.383 6.97484 16 8 16C9.02516 16 9.9062 15.383 10.292 14.5H15.25H16V13H15.25H10.45C10.2597 12.0625 9.54477 11.3155 8.62501 11.0788L8.625 9H12.5C13.3284 9 14 8.32843 14 7.5V1.5V0H12.5H3.5ZM8 14.5C8.55228 14.5 9 14.0523 9 13.5C9 12.9477 8.55228 12.5 8 12.5C7.44772 12.5 7 12.9477 7 13.5C7 14.0523 7.44772 14.5 8 14.5Z" fill="currentColor"/>
</g>
<defs>
<clipPath id="clip0_53_122">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>`);e.s(["NetworkDevice",0,t])},4689018,1496379,e=>{"use strict";var t=e.i(5169864),r=e.i(1246255),a=e.i(7432042),i=e.i(1233856),l=e.i(5963711),n=e.i(7749365),s=e.i(1283928),o=e.i(588428),c=e.i(409142),u=e.i(3538015);let d=[{value:"group_by_category",label:"Group by Category"},{value:"group_by_action",label:"Group by Action"}],f=[{label:"User Agent",value:"clientUserAgent"},{label:"Country",value:"clientIpCountry"},{label:"IP Address",value:"clientIp"},{label:"Request Path",value:"requestPath"},{label:"Route",value:"route"},{label:"JA4 Digest",value:"clientJa4Digest"},{label:"Host",value:"requestHostname"}],m=[{value:"botCheckResult",label:"Check Result"},...f],g=[{icon:n.Clock,label:"Live",value:"live"},{label:"Past Hour",value:"1h"},{label:"Past Day",value:"1d"},{label:"Past 3 Days",value:"3d"}];function h(e){return g.filter(t=>{var r;let i;return"live"===t.value||(r=(0,a.default)(t.value),r<=(i=e?.billing?.plan==="enterprise"?(0,a.default)("7d"):(0,a.default)("24h"))+i/12)})}function b(){let{hideIpAddresses:e=!1,firewallOverviewRefresh:r=!1,defaultToolbarFilter:a="all_rules"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hideIpAddresses:!1,firewallOverviewRefresh:!1,defaultToolbarFilter:"all_rules"},{isReady:i,value:l}=(0,o.useIPBlockingTeamFlag)(),{set:n,state:g}=(0,c.useSearchParamsState)({action:{defaultValue:"all"},filter:{defaultValue:a},groupBy:{defaultValue:r?d[1].value:d[0].value,parseFromUrl:e=>(0,s.tryNormalizeDimension)(e)||e},range:{defaultValue:"1h",formatToUrl(e){if("string"==typeof e)return e;let t=Math.floor(e.from.getTime()/1e3),r=Math.floor(e.to.getTime()/1e3);return`${t}-${r}`},parseFromUrl(e){if(/^\d+-\d+$/.test(e)){let[t,r]=e.split("-"),a=1e3*Number.parseInt(t,10),i=1e3*Number.parseInt(r,10);return{from:new Date(a),to:new Date(i)}}return e}}}),h=(0,t.useMemo)(()=>g.range,[g.range]),b=(0,t.useMemo)(()=>{if("BotID"===g.filter){let e=g.groupBy===d[0].value?m[0].value:g.groupBy;return{action:g.action,filter:g.filter,groupBy:e,range:h}}return"botCheckResult"===g.groupBy&&"BotID"!==g.filter?{action:g.action,filter:g.filter,groupBy:f[0].value,range:h}:{action:g.action,filter:g.filter,groupBy:g.groupBy,range:h}},[g.action,g.filter,g.groupBy,h]),p=(0,t.useCallback)(t=>{let r=e||!l||!i;if("filter"===t.type){if("all_rules"===b.filter&&"all_rules"!==t.value){let e=(0,u.isLimitedSystemRule)(t.value)?u.systemFilter:u.defaultFilter;r&&(e=e.filter(e=>"clientIp"!==e.value)),n({filter:t.value,groupBy:"BotID"===t.value?m[0].value:e[0].value});return}if("all_rules"!==b.filter&&"all_rules"===t.value)return void n({filter:t.value,groupBy:d[0].value});if(!(0,u.isLimitedSystemRule)(b.filter)&&(0,u.isLimitedSystemRule)(t.value)){let e=r?u.systemFilter.filter(e=>"clientIp"!==e.value):u.systemFilter;n({filter:t.value,groupBy:e[0].value});return}n({filter:t.value})}else n({[t.type]:t.value})},[n,b,e,l,i]),v=(0,t.useMemo)(()=>{let t=e||!l||!i;if("all_rules"===b.filter)return d;if("BotID"===b.filter)return m;let r=(0,u.isLimitedSystemRule)(b.filter)?u.systemFilter:u.defaultFilter;return t?r.filter(e=>"clientIp"!==e.value):r},[b.filter,e,l,i]);return[b,p,v]}e.s(["getEnabledTimeRangeOptions",()=>h,"useToolbarState",()=>b],1496379);let p=[{threshold:(0,a.default)("4h"),granularity:{minutes:30}},{threshold:(0,a.default)("2h"),granularity:{minutes:15}},{threshold:(0,a.default)("1h"),granularity:{minutes:5}},{threshold:(0,a.default)("10m"),granularity:{minutes:1}}];function v(){let[e]=b();return x(e.range)}function x(e){if("string"!=typeof e){let t,r,a=(t=Math.abs(e.from.getTime()-e.to.getTime()),r=p.find(e=>t>e.threshold),r?.granularity??{seconds:10});return{granularity:a,range:{end:(0,i.endOfDuration)(e.to,a),start:(0,i.startOfDuration)(e.from,a)}}}let t="live"===e?{seconds:10}:{minutes:"1h"===e?1:15},l=new Date,n="live"===e?(0,a.default)("10m"):(0,a.default)(e);return{granularity:t,range:{end:(0,i.endOfDuration)((0,r.subMinutes)(l,1),t),start:(0,i.startOfDuration)(new Date(l.getTime()-n),t)}}}function y(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{granularity:a,range:i}=(0,t.useMemo)(()=>x(e.range),[e.range]),{filter:l,action:n,groupBy:s}=e;return(0,t.useMemo)(()=>{let e="default_web_traffic"===l;return"BotID"===l?{event:"botIdCheck",reason:"firewall_tab",rollups:{value:{measure:"count",aggregation:"sum"}},granularity:a,groupBy:w(l,s,r),filter:j(l,n),limit:10,tailRollup:"others",summaryOnly:!1,startTime:i.start,endTime:i.end}:"bot-management"===l?{event:"incomingRequest",reason:"firewall_tab",rollups:{value:{measure:"count",aggregation:"sum"}},granularity:a,groupBy:["botName"],filter:"matchesPattern(botName, '\\S')",limit:10,tailRollup:"others",summaryOnly:!1,startTime:i.start,endTime:i.end}:e?{event:"incomingRequest",reason:"firewall_tab",rollups:{value:{measure:"count",aggregation:"sum"}},granularity:a,groupBy:w(l,s,r),filter:j(l,n),limit:10,tailRollup:"others",summaryOnly:!1,startTime:i.start,endTime:i.end}:{event:"firewallAction",reason:"firewall_tab",rollups:{value:{measure:"count",aggregation:"sum"}},granularity:a,groupBy:w(l,s,r),filter:j(l,n),limit:10,tailRollup:"others",summaryOnly:!1,startTime:i.start,endTime:i.end}},[a,i,l,n,s,r])}function j(e,t){if("BotID"===e)return"";let r=[];switch(t){case"allow":r.push("wafAction eq 'allow'");break;case"challenge":r.push("wafAction in ('challenge', 'challenge-failed', 'challenge-solved')");break;case"all":break;default:r.push(`wafAction eq '${(0,l.denormalizeFirewallAction)(t)}'`)}let a=(0,l.wafRuleId)(e);return"all_rules"!==e&&r.push(`wafRuleId eq '${a}'`),r.join(" and ")}function w(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[];return"BotID"!==e&&a.push("wafAction"),"all_rules"===e?a.unshift("wafRuleId"):"BotID"===e?a.unshift("botCheckResult"):r||a.unshift(t),"clientIp"===t&&a.push("asnId","asnName","clientIpCountry"),a.map(t=>"sourcePath"===t?"default_web_traffic"===e?"route":"requestPath":t)}e.s(["useFirewallTimeRange",()=>v,"useQuerySelect",()=>y],4689018)},8778858,e=>{"use strict";var t=e.i(818351),r=e.i(4244280),a=e.i(8042625);function i(e){let{teamId:i,projectId:l}=e;return(0,t.useIsomorphicSWR)(`${r.API_FIREWALL}/firewall/attack-status${(0,a.encode)({teamId:i,projectId:l})}`)}function l(e){let{teamId:i,projectId:l,since:n}=e;return(0,t.useIsomorphicSWR)(`${r.API_FIREWALL}/firewall/attack-status${(0,a.encode)({teamId:i,projectId:l,since:n})}`)}e.s(["useAttackHistory",()=>l,"useAttackStatus",()=>i])},2329363,e=>{"use strict";var t=e.i(1146226),r=e.i(5610834),a=e.i(9722978),i=e.i(3306538),l=e.i(5468328),n=e.i(3487134),s=e.i(6675233),o=e.i(57106),c=e.i(9148191),u=e.i(421794);function d(e){let{className:r}=e,{isChildMicrofrontend:i}=(0,c.useMicrofrontendsProjectInfo)();return i?(0,t.jsx)("div",{className:(0,a.clsx)("flex-row items-center gap-2",r),children:(0,t.jsx)("div",{className:"pl-2",children:(0,t.jsx)(m,{})})}):null}function f(e){let{config:a,rulesets:l}=e,n=(0,r.useParams)(),c=(0,u.botProtectionFromConfig)(a?.currentConfig),d=(0,u.botProtectionFromRulesets)(l),f=c?.active??d?.active,m=c?.action??d?.defaultAction;return(0,t.jsx)(o.Link,{canPrefetch:()=>!0,isDifferentZone:!1,href:n?.teamSlug&&n?.project?`/${n.teamSlug}/${n.project}/firewall/configure#bot-management`:"#",children:f?"log"===m?(0,t.jsx)(i.Badge,{icon:(0,t.jsx)(s.Robot,{size:10}),size:"sm",variant:"gray-subtle",children:"Monitoring Bot Activity"}):(0,t.jsx)(i.Badge,{size:"sm",variant:"blue-subtle",icon:(0,t.jsx)(s.Robot,{size:10,color:"blue-900"}),children:"Bot Protection Enabled"}):(0,t.jsx)(i.Badge,{size:"sm",variant:"pill",className:"",icon:(0,t.jsx)(s.Robot,{size:10,color:"gray-900"}),children:"Enable Bot Protection"})})}function m(){let{defaultProjectBaseUrl:e,isChildMicrofrontend:r}=(0,c.useMicrofrontendsProjectInfo)();return r?(0,t.jsx)(o.Link,{href:`${e}/firewall`,icon:!1,children:(0,t.jsx)(l.Tooltip,{text:"Firewall rules for the default app are also run for this microfrontend.",children:(0,t.jsx)(i.Badge,{icon:(0,t.jsx)(n.Microfrontends,{}),size:"sm",variant:"blue-subtle",children:"View Parent Firewall"})})}):null}e.s(["BotProtectionStatusBadge",()=>f,"FirewallStatusBadge",()=>d])},9317241,5149014,e=>{"use strict";var t=e.i(1146226),r=e.i(9650453),a=e.i(5169864),i=e.i(5468328),l=e.i(9386557),n=e.i(6143247),s=e.i(57106),o=e.i(594750),c=e.i(421794),u=e.i(8122440),d=e.i(3306538),f=e.i(6060673),m=e.i(8077518),g=e.i(8778858),h=e.i(8114130),b=e.i(762945);function p(e){let{teamId:r,projectId:i,size:l,onProxyClick:n}=e,{data:o,isLoading:c}=(0,u.useReverseProxyStatus)({projectIdOrName:i,teamIdOrSlug:r}),f=!!(!c&&o?.length),m=(0,a.useCallback)(()=>f?n?(0,t.jsxs)(d.Badge,{className:"normal-case select-none border border-transparent transition-colors hover:border-gray-500 cursor-pointer !bg-[var(--badge-bg,var(--badge-bg-color))]",icon:(0,t.jsx)(b.Warning,{size:12}),onClick:n,size:l??"md",variant:"gray-subtle",children:["Unknown proxy ",(0,t.jsx)("span",{className:"hidden @xs:inline",children:"detected"})]}):(0,t.jsx)(s.Link,{href:"/kb/guide/can-i-use-a-proxy-on-top-of-my-vercel-deployment",target:"_blank",children:(0,t.jsxs)(d.Badge,{className:"normal-case select-none border border-transparent transition-colors hover:border-gray-500 !bg-[var(--badge-bg,var(--badge-bg-color))]",icon:(0,t.jsx)(b.Warning,{size:12}),size:l??"md",variant:"gray-subtle",children:["Unknown proxy ",(0,t.jsx)("span",{className:"hidden @xs:inline",children:"detected"})]})}):null,[f,l,n]);return[f,m,c]}function v(e){let{projectId:r,size:i}=e,{data:l,isLoading:n}=(0,f.useProject)(r),o={activeUntil:l?.security?.attackModeActiveUntil??null,lastUpdate:l?.security?.attackModeUpdatedAt??null},c=!!(!n&&l?.security?.attackModeEnabled),u=(0,a.useCallback)(()=>c?(0,t.jsx)(s.Link,{href:"/docs/vercel-firewall/attack-challenge-mode",target:"_blank",children:(0,t.jsx)(d.Badge,{className:"normal-case select-none border border-transparent transition-colors hover:border-amber-500",size:i??"md",variant:"amber-subtle",children:"All requests are being challenged"})}):null,[c,i]);return[c,u,o,n]}function x(e){let[t,r]=(0,a.useState)(null),i=(0,a.useRef)(!0);return((0,a.useEffect)(()=>(i.current=!0,()=>{i.current=!1}),[]),(0,a.useEffect)(()=>{let t,a,l=()=>{if(!i.current)return;if(!e){t=requestAnimationFrame(()=>r(null));return}let n=Date.now();if(n>e){t=requestAnimationFrame(()=>r(null));return}t=requestAnimationFrame(()=>{i.current&&r(e-n)}),a=setTimeout(l,500)};return l(),()=>{t&&cancelAnimationFrame(t),a&&clearTimeout(a)}},[e]),t)?`${(0,m.convertMsToTime)(t)} Remaining`:"Enabled"}function y(e){let{teamId:t,projectId:r}=e,{data:a,isLoading:i}=(0,g.useAttackStatus)({projectId:r,teamId:t}),l=a?.anomalies.find(e=>"active"===e.state&&!e.endTime)??null;return{isLoading:i,activeAnomaly:l,hasAnomaly:!!(!i&&l)}}function j(e){let{projectId:r,size:a}=e,{isLoading:l,data:n,mutate:o}=(0,f.useProject)(r),c=(0,h.globalBypassStatus)(n),u=!!(!l&&c.enabled),m=null,g="";if(c.enabled)try{let e=new Intl.DateTimeFormat("en-US",{month:"long",day:"2-digit"}),t=new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"long"}),r=new Date(1e3*c.ttl),a=e.format(r),i=t.format(r);g=`until ${a}`,m=`System Mitigations will resume ${i}`}catch{}return[u,()=>u?(0,t.jsx)(i.Tooltip,{as:"div",delay:!1,text:(0,t.jsx)("p",{className:"text-left",children:m}),tooltipStyle:{display:m?void 0:"none"},children:(0,t.jsx)(s.Link,{href:"/docs/vercel-firewall/ddos-mitigation#bypass-system-level-mitigations",target:"_blank",children:(0,t.jsxs)(d.Badge,{className:"normal-case select-none border border-transparent transition-colors hover:border-red-500",size:a??"md",variant:"red-subtle",children:["Susceptible to attacks ",g]})})}):null,l]}function w(e){let{children:r,...i}=e,l=(0,a.useCallback)(()=>!0,[]);return(0,t.jsx)(s.Link,{canPrefetch:l,isDifferentZone:!1,...i,children:r})}e.s(["useACMBadge",()=>v,"useActiveAnomaly",()=>y,"useCountdown",()=>x,"useGlobalBypass",()=>j,"useReverseProxyBadge",()=>p],5149014);let C="w-full rounded hover:!bg-gray-500/40 odd:bg-gray-200/40 dark:odd:bg-gray-100/40 py-1.5 px-2 group-hover:odd:bg-transparent transition-colors";function k(e){let{hasReverseProxy:r,projectId:u}=e,{config:d}=(0,o.useFirewallConfig)({projectId:u}),f=(0,c.botProtectionFromConfig)(d?.currentConfig),m=(0,a.useMemo)(()=>f&&f.active?r?"limited":"log"===f.action?"logging":"active":"inactive",[f,r]),g=(0,a.useCallback)(()=>{if(r)return(0,t.jsxs)("p",{className:"text-left",children:["An unkown proxy is hiding real IPs and JA4s, reducing Bot Protection accuracy. One client can trigger a challenge for all traffic behind the proxy."," ",(0,t.jsx)(s.Link,{href:"/docs/bot-management#bot-protection-ruleset-with-reverse-proxies",target:"_blank",underline:!0,children:"Learn More"})]})},[r]);return r?(0,t.jsx)(i.Tooltip,{as:"div",className:C,delay:!1,text:(0,t.jsx)(g,{}),children:(0,t.jsxs)(w,{href:"firewall/configure#bot-management",className:"flex justify-between w-full",children:[(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Bot Protection"}),(0,t.jsxs)("p",{className:"text-label-14 text-gray-900 flex gap-1 items-center capitalize",children:[(0,t.jsx)(l.WarningFill,{color:"amber-800",size:16}),(0,t.jsx)("span",{children:m})]})]})}):(0,t.jsxs)(w,{href:"firewall/configure#bot-management",className:(0,n.cn)(C,"flex justify-between items-center "),children:[(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Bot Protection"}),(0,t.jsx)("p",{className:"text-label-14 text-gray-900 flex gap-1 items-center capitalize",children:m})]})}function P(e){let{isAlerting:r,challengeData:a}=e,n=x(a.activeUntil);return r?(0,t.jsx)(i.Tooltip,{as:"div",className:C,delay:!1,position:"bottom",text:(0,t.jsxs)("p",{className:"text-left",children:["Browsers typically solve it in 1-3 seconds, with ~100ms load time. Every request will be affected while the challenge is active."," ",(0,t.jsx)(s.Link,{href:"/docs/vercel-firewall/attack-challenge-mode",target:"_blank",underline:!0,children:"Learn More"})]}),children:(0,t.jsxs)(w,{href:"firewall/configure#danger-zone",className:"flex justify-between w-full",children:[(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Attack Mode"}),(0,t.jsxs)("p",{className:"text-label-14 text-gray-900 flex gap-1 items-center",children:[(0,t.jsx)(l.WarningFill,{color:"amber-800",size:16}),(0,t.jsx)("span",{children:n})]})]})}):null}function A(e){let{projectId:r}=e,{config:a}=(0,o.useFirewallConfig)({projectId:r});return(0,t.jsxs)(w,{href:"firewall/configure#custom-rules",className:(0,n.cn)(C,"flex justify-between items-center "),children:[(0,t.jsx)("p",{className:"text-label-14 font-medium",children:"Custom Rules"}),(0,t.jsx)("p",{className:"text-label-14 text-gray-900",children:a?.rules.length??0})]})}function L(e){let{children:i,hasAnomaly:l,hasChallengeMode:s,hasDeployments:o=!0,hasGlobalBypass:c,size:u,colorFunction:d,className:f}=e,m=(0,a.useMemo)(()=>{let e={bg:{highlight:void 0,base:"var(--ds-blue-200)"},border:{highlight:void 0,base:"var(--ds-blue-400)"}};return c?e.border.highlight="var(--ds-red-400)":s&&(e.border.highlight="var(--ds-amber-400)"),c?e.border.base="var(--ds-red-400)":l&&(e.border.base="var(--ds-amber-400)"),c?e.bg.highlight="var(--ds-red-200)":s&&(e.bg.highlight="var(--ds-amber-200)"),c?e.bg.base="var(--ds-red-200)":l&&(e.bg.base="var(--ds-amber-200)"),e},[c,l,s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.default,{id:"422afb0b102560ec",dynamic:["sm"===u?"30%":"75%","sm"===u?"30%":"75%","sm"===u?"0%":"-5%","50%","sm"===u?"70%":"50%","sm"===u?"70%":"50%"],children:`.scp-card.__jsx-style-dynamic-selector:before{background-image:linear-gradient(to bottom,transparent 70%,var(--border-b)),linear-gradient(to bottom left,var(--border),transparent ${"sm"===u?"30%":"75%"}),linear-gradient(to bottom right,var(--border-highlight,var(--border)),transparent ${"sm"===u?"30%":"75%"})}.scp-card-content.__jsx-style-dynamic-selector{background-image:linear-gradient(to bottom,transparent ${"sm"===u?"0%":"-5%"},var(--ds-background-100)50%),linear-gradient(to bottom right,var(--bg-highlight,var(--bg)),transparent ${"sm"===u?"70%":"50%"}),linear-gradient(to bottom left,var(--bg),transparent ${"sm"===u?"70%":"50%"})}`}),(0,t.jsx)("div",{className:r.default.dynamic([["422afb0b102560ec",["sm"===u?"30%":"75%","sm"===u?"30%":"75%","sm"===u?"0%":"-5%","50%","sm"===u?"70%":"50%","sm"===u?"70%":"50%"]]])+" "+((0,n.cn)("shadow-sm rounded-md",{"h-full":"sm"!==u})||""),children:(0,t.jsx)("div",{style:{"--border-highlight":m.border.highlight,"--border":m.border.base,"--border-b":"var(--ds-gray-200)","--bg-highlight":d?d(m.bg.highlight??m.bg.base,m.bg.highlight?"highlight":"base"):m.bg.highlight,"--bg":d?d(m.bg.base,"base"):m.bg.base},className:r.default.dynamic([["422afb0b102560ec",["sm"===u?"30%":"75%","sm"===u?"30%":"75%","sm"===u?"0%":"-5%","50%","sm"===u?"70%":"50%","sm"===u?"70%":"50%"]]])+" "+((0,n.cn)("relative isolate rounded-md h-full flex flex-col justify-between gap-4 tabular-nums min-h-[240px]","before:absolute after:absolute before:block after:block before:rounded-[9px] after:rounded-md before:-z-10 after:-z-10","before:-inset-px","after:-inset-px bg-background-100",o?"scp-card":"",f??"")||""),children:(0,t.jsx)("div",{className:r.default.dynamic([["422afb0b102560ec",["sm"===u?"30%":"75%","sm"===u?"30%":"75%","sm"===u?"0%":"-5%","50%","sm"===u?"70%":"50%","sm"===u?"70%":"50%"]]])+" "+((0,n.cn)("relative h-full rounded-md flex flex-col gap-8",{"scp-card-content":o,"shadow-sm":!1},"sm"===u?"gap-0 p-0":"p-2 pt-4 lg:pt-2")||""),children:i})})})]})}e.s(["AttackChallengeRow",()=>P,"BotProtectionRow",()=>k,"CustomRulesRow",()=>A,"GradientPostureCard",()=>L],9317241)},3992079,e=>{"use strict";var t=e.i(1146226),r=e.i(3306538),a=e.i(6891161),i=e.i(5255926),l=e.i(9386557),n=e.i(109803),s=e.i(8852425),o=e.i(764581),c=e.i(2359044),u=e.i(7527548);let d=(0,e.i(9334638).withNewIcon)(`<path d="M14.3038 7.872L12.5118 7.456L12.1918 7.328L3.96777 7.392V11.36L14.3038 11.392V7.872Z" fill="white"/>
<path d="M10.9441 11.008C10.9956 10.8717 11.0138 10.7251 10.9971 10.5804C10.9804 10.4356 10.9293 10.297 10.8481 10.176C10.7648 10.0761 10.6625 9.99351 10.5472 9.93311C10.4319 9.87271 10.3058 9.83564 10.1761 9.82402L4.60814 9.76002C4.57614 9.76002 4.54414 9.72802 4.51214 9.72802C4.50469 9.72243 4.49864 9.71518 4.49447 9.70685C4.49031 9.69852 4.48814 9.68933 4.48814 9.68002C4.48814 9.6707 4.49031 9.66151 4.49447 9.65318C4.49864 9.64485 4.50469 9.6376 4.51214 9.63202C4.54414 9.56802 4.57614 9.53602 4.64014 9.53602L10.2401 9.47202C10.5957 9.43256 10.9343 9.29911 11.2211 9.08539C11.5079 8.87167 11.7326 8.5854 11.8721 8.25602L12.1921 7.42402C12.1921 7.39202 12.2241 7.36002 12.1921 7.32802C12.0182 6.55311 11.596 5.85618 10.9898 5.34312C10.3835 4.83006 9.62638 4.52893 8.83338 4.48548C8.04037 4.44202 7.25486 4.65863 6.5962 5.10238C5.93754 5.54612 5.44174 6.19276 5.18414 6.94402C4.84973 6.70518 4.44182 6.59187 4.03214 6.62402C3.65616 6.66594 3.30563 6.8345 3.03813 7.102C2.77062 7.3695 2.60206 7.72004 2.56014 8.09602C2.53883 8.28846 2.54965 8.48311 2.59214 8.67202C1.9838 8.68883 1.40603 8.94233 0.981719 9.37859C0.557411 9.81485 0.320056 10.3994 0.32014 11.008C0.314889 11.1263 0.325653 11.2447 0.35214 11.36C0.353609 11.385 0.364196 11.4086 0.381891 11.4263C0.399586 11.444 0.42316 11.4545 0.448141 11.456H10.7201C10.7841 11.456 10.8481 11.424 10.8481 11.36L10.9441 11.008Z" fill="#F48120"/>
<path d="M12.7038 7.42401H12.5438C12.5118 7.42401 12.4798 7.45601 12.4478 7.48801L12.2238 8.25601C12.1723 8.3923 12.1542 8.53893 12.1709 8.68366C12.1876 8.82839 12.2386 8.96703 12.3198 9.08801C12.4032 9.18798 12.5054 9.27052 12.6207 9.33092C12.7361 9.39132 12.8621 9.42839 12.9918 9.44001L14.1758 9.50401C14.2078 9.50401 14.2398 9.53601 14.2718 9.53601C14.2792 9.5416 14.2853 9.54885 14.2895 9.55718C14.2936 9.56551 14.2958 9.5747 14.2958 9.58401C14.2958 9.59333 14.2936 9.60251 14.2895 9.61084C14.2853 9.61918 14.2792 9.62642 14.2718 9.63201C14.2398 9.69601 14.2078 9.72801 14.1438 9.72801L12.9278 9.79201C12.5723 9.83147 12.2337 9.96492 11.9468 10.1786C11.66 10.3924 11.4353 10.6786 11.2958 11.008L11.2318 11.296C11.1998 11.328 11.2318 11.392 11.2958 11.392H15.5198C15.5328 11.3939 15.5461 11.3927 15.5586 11.3885C15.5711 11.3843 15.5825 11.3773 15.5918 11.368C15.6011 11.3587 15.6081 11.3473 15.6123 11.3348C15.6165 11.3223 15.6177 11.3091 15.6158 11.296C15.692 11.0249 15.735 10.7455 15.7438 10.464C15.7387 9.65932 15.4168 8.88903 14.8478 8.32001C14.2788 7.751 13.5085 7.42908 12.7038 7.42401Z" fill="#FAAD3F"/>
`);var f=e.i(9308891),m=e.i(1098160),g=e.i(5169864),h=e.i(8122440);let b={duration:.5,repeat:1/0,ease:"linear"},p="0.15 4";function v(e){let{dashArray:r}=e;return(0,t.jsx)("div",{className:"flex-1 relative h-4 flex items-center",children:(0,t.jsx)("svg",{className:"w-full h-4",viewBox:"0 0 52 16",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)(m.motion.line,{x1:"0",y1:"8",x2:"52",y2:"8",stroke:"var(--ds-gray-600)",strokeWidth:"2",strokeDasharray:r,strokeLinecap:"round",initial:{strokeDashoffset:0},animate:{strokeDashoffset:-8},transition:b},"animated-line")})})}function x(e){let{children:r,variant:a="default"}=e;return(0,t.jsx)("div",{className:`w-11 h-11 rounded-full flex items-center justify-center shadow-sm bg-white ${"dark"===a?"border-1 border-gray-900":"border-1 border-gray-300 bg-white"}`,children:r})}function y(e){let{items:r}=e;return(0,t.jsx)("div",{className:"w-full mt-4",children:(0,t.jsx)("ul",{className:"space-y-0",children:r.map(e=>(0,t.jsxs)("li",{className:"flex flex-row rounded-sm [:where(&:nth-child(odd))]:bg-[--ds-gray-100] overflow-hidden items-center justify-between px-2 py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`w-2 h-2 ${(e=>{switch(e){case"good":return"bg-green-700";case"warning":return"bg-amber-700";case"error":return"bg-red-700"}})(e.status)} rounded-full`}),(0,t.jsx)("span",{className:"text-xs",children:e.label})]}),(0,t.jsx)("span",{className:"text-xs text-gray-900 font-medium",children:e.value})]},e.label))})})}function j(e){let{projectId:c,teamId:u,onClose:d}=e,{data:f,isLoading:m,error:b}=(0,h.useReverseProxyStatusV2)({projectIdOrName:c,teamIdOrSlug:u}),j=(0,g.useMemo)(()=>{if(!f||0===f.length||m)return[];let e=f.reduce((e,t)=>{let{percent_reqs_obscured_public_ip:r,percent_total_traffic:a}=t;return e+a/100*r},0),t=f.reduce((e,t)=>{let{percent_reqs_obscured_ja4s:r,percent_total_traffic:a}=t;return e+a/100*r},0),r=t>50?"error":t>1?"warning":"good";return[{status:e>50?"error":e>1?"warning":"good",label:"IPs",value:`${e.toFixed(0)}% Obscured`},{status:r,label:"JA4s",value:`${t.toFixed(0)}% Obscured`},{status:"warning",label:"Latency",value:"Increased"}]},[f,m]),C=(0,g.useMemo)(()=>!f||m||0===f.length?null:[...f].sort((e,t)=>t.percent_total_traffic-e.percent_total_traffic)[0].trusted_proxy_name,[f,m]);return!f&&(m||b)||f?.length===0&&m?(0,t.jsxs)(a.Modal.Modal,{active:!0,onClickOutside:d,width:640,children:[(0,t.jsxs)(a.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(a.Modal.Header,{children:(0,t.jsx)(a.Modal.Title,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.WarningFill,{color:"amber-600",size:24}),(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Proxy Configuration Detected"})]})})}),b?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("p",{className:"text-red-900",children:"Failed to load proxy information. Please try again."})}):(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Skeleton,{width:"80%",height:67,className:"mb-9"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(i.Skeleton,{width:"100%",height:288}),(0,t.jsx)(i.Skeleton,{width:"100%",height:288})]})]})]}),(0,t.jsx)(a.Modal.Actions,{children:(0,t.jsx)(a.Modal.Action,{onClick:d,type:"secondary",children:"Dismiss"})})]}):(0,t.jsxs)(a.Modal.Modal,{active:!0,onClickOutside:d,width:640,children:[(0,t.jsxs)(a.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(a.Modal.Header,{children:(0,t.jsx)(a.Modal.Title,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.WarningFill,{color:"amber-600",size:24}),(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"Proxy Configuration Detected"})]})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"mb-8 text-pretty",children:["An external proxy was detected in front of your application. This is"," ",(0,t.jsx)("strong",{children:"not recommended"})," because it can weaken critical security signals used for ",(0,t.jsx)("strong",{children:"bot mitigation"})," and"," ",(0,t.jsx)("strong",{children:"DDoSÂ attack prevention"}),"."]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 border border-gray-300 rounded-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,t.jsxs)("div",{className:"mb-4 mt-2 flex items-center gap-1 flex-col",children:[(0,t.jsx)("h3",{className:"font-medium text-base text-center",children:"With Proxies"}),(0,t.jsx)(r.Badge,{variant:"gray-subtle",children:"Current"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-0 mb-6 mt-6",children:[(0,t.jsx)(x,{children:(0,t.jsx)(o.WindowGlobe,{size:16,color:"gray-1000"})}),(0,t.jsx)(v,{dashArray:p}),null!==C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative w-11 h-11",children:[(0,t.jsxs)("svg",{className:"absolute inset-0 w-full h-full",children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("mask",{id:"googleContainerMask",children:[(0,t.jsx)("circle",{cx:"22",cy:"22",r:"22",fill:"white"}),(0,t.jsx)("circle",{cx:"40",cy:"40",r:"11",fill:"black"})]})}),(0,t.jsx)("foreignObject",{width:"100%",height:"100%",mask:"url(#googleContainerMask)",children:(0,t.jsxs)("div",{className:"w-full h-full border-1 border-gray-300 rounded-full flex items-center justify-center bg-white shadow-sm",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-10 blur-sm scale-[2]",children:(0,t.jsx)(w,{name:C,size:20})}),(0,t.jsx)(w,{name:C,size:16})]})}),(0,t.jsxs)("g",{mask:"url(#googleContainerMask)",fill:"none",stroke:"var(--ds-gray-300)",strokeWidth:"1",children:[(0,t.jsx)("circle",{cx:"22",cy:"22",r:"21.5"}),(0,t.jsx)("circle",{cx:"40",cy:"40",r:"11.5"})]})]}),(0,t.jsx)("div",{className:"absolute bottom-1 -right-1 translate-y-1/2",children:(0,t.jsx)("div",{className:"w-4 h-4 bg-amber-800 rounded-full flex items-center justify-center",children:(0,t.jsx)(l.WarningFill,{size:8,color:"background-100"})})})]}),(0,t.jsx)(v,{dashArray:"0.15 8"})]}):null,(0,t.jsx)(x,{variant:"dark",children:(0,t.jsx)(s.LogoVercel,{size:16,color:"gray-1000"})})]}),(0,t.jsx)(y,{items:j})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 bg-gradient-to-b from-[var(--ds-background-200)] to-[var(--ds-background-100)] border-l border-gray-300",children:[(0,t.jsxs)("div",{className:"mb-4 mt-2 flex items-center gap-1 flex-col",children:[(0,t.jsx)("h3",{className:"font-medium text-base text-center",children:"Direct to Vercel"}),(0,t.jsx)(r.Badge,{variant:"green",children:"Recommended"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-0 mb-6 mt-6",children:[(0,t.jsx)(x,{children:(0,t.jsx)(o.WindowGlobe,{size:16,color:"gray-1000"})}),(0,t.jsx)(v,{dashArray:p}),(0,t.jsx)(x,{variant:"dark",children:(0,t.jsx)(s.LogoVercel,{size:16,color:"gray-1000"})})]}),(0,t.jsx)(y,{items:[{status:"good",label:"IPs",value:"Visible"},{status:"good",label:"JA4s",value:"Visible"},{status:"good",label:"Latency",value:"Lowest"}]})]})]})]})]}),(0,t.jsxs)(a.Modal.Actions,{children:[(0,t.jsx)(a.Modal.Action,{onClick:d,type:"secondary",children:"Dismiss"}),(0,t.jsx)(a.Modal.Action,{onClick:()=>{window.open("/kb/guide/can-i-use-a-proxy-on-top-of-my-vercel-deployment","_blank")},prefix:(0,t.jsx)(n.External,{size:16}),type:"default",children:"View Migration Guide"})]})]})}function w(e){let{name:r,size:a}=e,i=""===r?{kind:"no-proxy"}:r.startsWith("generic-")?{kind:"generic",name:r.slice(7)}:{kind:"known",name:r};if("no-proxy"===i.kind)return(0,t.jsx)(o.WindowGlobe,{size:16,color:"gray-1000"});switch(i.name){case"gcp":return(0,t.jsx)(c.LogoGoogleCloudPlatform,{size:a});case"cloudflare":return(0,t.jsx)(d,{size:a});case"azure-front-door":return(0,t.jsx)(f.LogoAzure,{size:a});default:return(0,t.jsx)(u.NetworkDevice,{size:a})}}e.s(["ProxyImpactModal",()=>j],3992079)},5579912,e=>{"use strict";var t=e.i(5169864);function r(){let[e,r]=(0,t.useState)(!1);return{isOpen:e,open:(0,t.useCallback)(()=>{r(!0)},[]),close:(0,t.useCallback)(()=>{r(!1)},[])}}e.s(["useProxyModal",()=>r])}]);

//# debugId=c2c09df2-076b-10f8-6ed6-4baf8c3102b7
//# sourceMappingURL=b82c42c6c9c0d33e.js.map