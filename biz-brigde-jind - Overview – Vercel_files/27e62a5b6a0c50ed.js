;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d24ddda0-e79d-6b13-cd54-38f4ae130e9f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6582838,e=>{"use strict";var t=e.i(215852),i=e.i(9998527);function n(e,n){let a=(0,i.getDashboardProjectEndpoint)(e);return(0,t.useIsomorphicSuspenseSWR)(a,n)}e.s(["useDashboardProject",()=>n])},5343305,e=>{"use strict";var t=e.i(5610834),i=e.i(6582838);function n(e){let n=(0,t.useParams)()??{teamSlug:"",project:""};return(0,i.useDashboardProject)(n,e)}e.s(["useCurrentDashboardProject",()=>n])},6450656,e=>{"use strict";var t=e.i(2466450);let i={fee:1e3,rate:{hobby:0,pro:3e3,plus:3e3},allocation:{hobby:5e4,pro:1e5,plus:1e5},reportingWindow:{hobby:"30 days",pro:"12 months",plus:"24 months"},bundle:"1M events prorated",bundleTooltip:"you'll be charged per event.\n\nFor example, {allocation} extra events will cost $3.",plusDescription:"Unlocks advanced UI features and view up to {reportingWindow} of data for all your projects. {fee} per month."},n=new Intl.NumberFormat("en-US");function a(e){let{offering:a="pro",currency:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.replace(/{plusDescription}/g,i.plusDescription).replace(/{bundleTooltip}/g,i.bundleTooltip).replace(/{fee}/g,(0,t.formatCurrency)(i.fee,s)).replace(/{allocation}/g,n.format(i.allocation[a])).replace(/{rate}/g,(0,t.formatCurrency)(i.rate[a],s)).replace(/{bundle}/g,i.bundle).replace(/{reportingWindow}/g,i.reportingWindow[a])}e.s(["pricingModel",0,i,"withPricing",()=>a])},2924439,e=>{"use strict";var t=e.i(6450656);let i=Object.freeze({pro:{title:"Pro",price:2e3,subLineItems:[],credit:2e3},teamSeats:{title:"Additional Team Seats",price:2e3,subLineItems:[]},concurrentBuilds:{title:"Concurrent Builds",price:5e3,subLineItems:[{title:"1 Free Concurrent Build",price:0,unit:"month"}]},bandwidth:{title:"Bandwidth – Overage Fee",price:4e3,batch:100,threshold:1e3,unit:"GB",subLineItems:[]},serverlessFunctionExecution:{title:"Serverless Function Execution – Overage Fee",price:4e3,batch:100,threshold:1e3,unit:"GB-Hours",subLineItems:[]},artifacts:{title:"Vercel Remote Caching",price:50,batch:1,threshold:10,unit:"GB",subLineItems:[]},edgeMiddlewareInvocations:{title:"Edge Middleware Invocations",price:65,batch:1e6,threshold:1e6,unit:"invocations",subLineItems:[]},edgeFunctionExecutionUnits:{title:"Edge Function Execution Units",price:200,batch:1e6,threshold:1e6,unit:"execution units",subLineItems:[]},sourceImages:{title:"Source Images",price:500,batch:1e3,threshold:5e3,subLineItems:[]},speedInsights:{title:"Speed Insights",price:1e3,unit:"month",subLineItems:[{title:"On-Demand Events",billedAfter:"Billed after 10k events",price:65,batch:1e4,threshold:1e4,unit:"10k"}]},observabilityPlus:{title:"Observability Plus",price:1e3,subLineItems:[]},passwordProtection:{title:"Advanced Deployment Protection",price:15e3,subLineItems:[{title:"Password Protection",price:0},{title:"Deployment Protection Exceptions",price:0},{title:"Private Production Deployments",price:0}]},previewDeploymentSuffix:{title:"Preview Deployment Suffix",price:1e4,subLineItems:[]},webAnalytics:{title:t.withPricing("Web Analytics with {allocation} Events"),price:0,threshold:t.pricingModel.allocation.pro,limit:1,subLineItems:[{title:"On-Demand Events",billedAfter:t.withPricing("Billed after {allocation} Events"),price:t.pricingModel.rate.pro,threshold:t.pricingModel.allocation.pro,batch:0,unit:t.withPricing("{bundle}")}]},webAnalyticsPlus:{title:"Web Analytics Plus",price:t.pricingModel.fee,unit:"month",threshold:t.pricingModel.allocation.plus,limit:1,subLineItems:[]},monitoring:{title:"Monitoring with 250k Data Points",price:1e3,unit:"month",subLineItems:[{title:"On-Demand Data Points",billedAfter:"Billed after 250k data points",price:120,threshold:25e4,batch:1e6,unit:"million"}]},storage:{title:"5 KV Databases",price:0,subLineItems:[]}});e.s(["pricingMenu",0,i])},1649649,e=>{"use strict";var t=e.i(7917902),i=e.i(2924439);function n(){let{team:e,mutate:i}=(0,t.useAccount)(),n=e?.billing?.plan||"hobby",a=e?.billing?.planIteration||"legacy",s=e?.billing?.status==="trialing";return"pro"===n&&e?.enabledInvoiceItems?.webAnalytics?.enabled?{isPlus:!0,mutate:i,isTrialTeam:s,plan:n,planIteration:a,isSubscribed:!0}:{isPlus:!1,mutate:i,plan:n,planIteration:a,isTrialTeam:s,isSubscribed:"hobby"===n||(e?.enabledInvoiceItems?.webAnalyticsEvent?.enabled??!1)}}e.s(["getWebAnalyticsEventsMaxLimit",0,e=>{let{plan:t,isPlus:n}=e;if("hobby"===t)return 2500;if("pro"===t){if(n){if(!i.pricingMenu.webAnalyticsPlus.limit)throw Error("pricingMenu.webAnalyticsPlus.limit is not defined");return i.pricingMenu.webAnalyticsPlus.limit}if(!i.pricingMenu.webAnalytics.limit)throw Error("pricingMenu.webAnalytics.limit is not defined");return i.pricingMenu.webAnalytics.limit}return 1/0},"useIsWebAnalyticsBilling",()=>n])},579135,e=>{"use strict";var t=e.i(5343305),i=e.i(8633387);let n={refreshInterval:0,revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateIfStale:!1};function a(){let{data:e}=(0,i.useDashboardProject)({config:n});return e?{name:e.name,id:e.id}:void 0}function s(){let{data:e}=(0,t.useCurrentDashboardProject)(n);return{name:e.name,id:e.id}}e.s(["useCurrentProjectNameAndId",()=>a,"useCurrentProjectNameAndIdSuspense",()=>s])},9928621,9576722,e=>{"use strict";e.s(["DefaultValuesSetter",()=>p,"WebAnalyticsContextProvider",()=>d,"useWebAnalyticsContext",()=>b],9928621);var t=e.i(1146226),i=e.i(5169864);e.s(["useWebAnalyticsStatus",()=>c],9576722);var n=e.i(7432042),a=e.i(2405338),s=e.i(8042625),r=e.i(277234),l=e.i(8633387),o=e.i(9668517);function c(){let e=(0,o.useTeamSlug)(),{data:t}=(0,l.useDashboardProject)(),{isFeatureEnabled:c,hasData:u}=b(),d=!!(c&&t?.microfrontendsConfig?.enabled&&!("isDefaultApp"in t.microfrontendsConfig&&t.microfrontendsConfig.isDefaultApp)&&!("routeObservabilityToThisProject"in t.microfrontendsConfig&&t.microfrontendsConfig.routeObservabilityToThisProject)),{data:p,mutate:h,isLoading:g}=(0,a.default)(t&&`/api/v1/web/insights/enabled${(0,s.encode)({projectId:t.id,teamId:e??""})}`,r.fetchAPI,{refreshInterval:e=>e?.isEnabled&&!e.hasData?(0,n.default)("5s"):0});return{isEnabled:p?.isEnabled??c,hasData:p?.hasData??u,isLoading:g||!p,enabledAt:p?.enabledAt??0,showPlaceholder:!c||d,revalidateStatus:(0,i.useCallback)(()=>{h()},[h])}}let u=(0,i.createContext)({setDefaultValues:()=>{},upgradeModalSource:null,setUpgradeModalSource:()=>{},isLoadingDefaults:!0,isFeatureEnabled:!1,hasData:!1,microfrontendsDataInDefaultApp:!1,enableBreakdown:!1});function d(e){let{children:n}=e,[a,s]=(0,i.useState)({hasData:!0,isLoadingDefaults:!0,isFeatureEnabled:!0,microfrontendsDataInDefaultApp:!1}),[r,l]=(0,i.useState)(null),o=(0,i.useMemo)(()=>({setDefaultValues:s,setUpgradeModalSource:l,upgradeModalSource:r,...a}),[r,a]);return(0,t.jsx)(u.Provider,{value:o,children:n})}function b(){return(0,i.useContext)(u)}function p(e){let{defaultValues:t}=e,n=c(),a=n.isLoading||n.hasData,{setDefaultValues:s}=b();return(0,i.useEffect)(()=>{s({...t,hasData:a})},[t,a,s]),null}u.displayName="WebAnalyticsContext"},3343953,e=>{"use strict";var t=e.i(1146226),i=e.i(8876434),n=e.i(8674454),a=e.i(6694387),s=e.i(4991687),r=e.i(8459493),l=e.i(455575),o=e.i(5610834),c=e.i(5169864),u=e.i(119294),d=e.i(6352514),b=e.i(5338940),p=e.i(9928621),h=e.i(1138941),g=e.i(8042625),m=e.i(57106),y=e.i(7722264),f=e.i(277234),v=e.i(4030453),A=e.i(6891161),I=e.i(8522580);e.i(1585898);var w=e.i(2066827),j=e.i(3343142);let S={surveyName:"Disable Web Analytics User Feedback",surveySlug:"disable-web-analytics-user-feedback",surveySteps:[{title:"Web Analytics has been disabled",description:"Help us improve by sharing your feedback. Select all that apply.",fields:[{type:"select",id:"reasons-why",label:"Any reasons for disabling Web Analytics?",selectMultiple:!0,options:[{id:"missing-features",label:"Missing features",reveals:{id:"what-were-you-missing",label:"What were you missing?"}},{id:"too-expensive",label:"Too expensive"},{id:"prefer-another-product",label:"I prefer another product",reveals:{id:"preferred-product",label:"Which product do you prefer?"}},{id:"not-working-as-expected",label:"It is not working as expected",reveals:{id:"what-was-not-working",label:"What was not working?"}},{id:"just-looking-around",label:"I was just looking around"},{id:"other",label:"Other",reveals:{id:"other-reason",label:"Additional comments"}}]}]}]};function x(e){let[i,n]=(0,c.useState)(!0);return(0,t.jsx)(w.SurveyModal,{active:i,onSubmit:async t=>{await (0,j.createSurveyEntry)({data:t}),e.onSubmitted?.(),n(!1)},setActive:n,surveyInfo:S})}var D=e.i(579135);function P(e){let{active:i,close:n,revalidateFeatureState:a}=e,[s,r]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),[w,j]=(0,c.useState)(),S=(0,l.useToasts)(),P=(0,h.useProjectIdOrName)(),M=(0,D.useCurrentProjectNameAndIdSuspense)(),{team:C}=(0,b.useTeam)(),k=C?.enabledInvoiceItems?.webAnalytics?.enabled;async function L(){try{r(!0),await (0,f.fetchAPI)(`/api/v1/web/insights/toggle${(0,g.encode)({projectId:M.id,teamId:C?.id})}`,{method:"POST",body:{value:!1},throwOnHTTPError:!0}),u.analytics.track(d.AnalyticsEvent.ANALYTICS_DISABLED,{teamId:C?.id,projectId:P}),p(!0),S.success("Disabled Web Analytics successfully."),n()}catch(e){j("Something went wrong."),(0,y.isErrorLike)(e)&&u.analytics.track(d.AnalyticsEvent.ERROR,{message:e.message,name:e.name,teamId:C?.id})}finally{r(!1)}}return o?(0,t.jsx)(x,{onSubmitted:()=>{a()}}):(0,t.jsxs)(A.Modal.Modal,{active:i,onClickOutside:s?()=>void 0:n,children:[(0,t.jsxs)(A.Modal.Body,{children:[(0,t.jsx)(A.Modal.Header,{children:(0,t.jsx)(A.Modal.Title,{children:"Disable Web Analytics"})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Web Analytics tracking for your project will be disabled immediately."}),k?(0,t.jsxs)(I.Note,{children:["This action will not disable Web Analytics Plus. To manage this add-on, please go to"," ",(0,t.jsx)(m.Link,{href:`/${C.slug}/~/settings/billing#web-analytics`,variant:"highlight",children:"Billing"}),"."]}):null,w?(0,t.jsx)(v.Error,{error:w}):null]})]}),(0,t.jsxs)(A.Modal.Actions,{children:[(0,t.jsx)(A.Modal.Action,{disabled:s,onClick:n,type:"secondary",children:"Cancel"}),(0,t.jsx)(A.Modal.Action,{loading:s,onClick:L,children:"Disable"})]})]})}var M=e.i(1649649),C=e.i(7837522),k=e.i(7780974),L=e.i(7589392),E=e.i(1717203),T=e.i(7557283),W=e.i(60582);function O(e){let{revalidateFeatureState:h,buttonClassName:g}=e,{setUpgradeModalSource:m}=(0,p.useWebAnalyticsContext)(),[y,f]=(0,c.useState)(!1),v=(0,o.useRouter)(),{success:A}=(0,l.useToasts)(),{team:I,isLoading:w}=(0,b.useTeam)(),{isPlus:j,plan:S}=(0,M.useIsWebAnalyticsBilling)(),{track:x}=(0,C.useTrackActivity)(),[D,O]=(0,c.useState)(!1),B=(0,o.useParams)(),{can:F,isLoading:N}=(0,E.default)(),R=I?.billing?.plan==="hobby",U=I?.billing?.plan==="pro"&&"trialing"===I.billing.status,H=F(T.Action.Create,T.Resource.Drain)&&!(R||U),V=w||N,$=(0,c.useCallback)(e=>{x(k.VercelActivityAction.DrainsModalConverted,{source:"web-analytics-options-menu",drainType:e.drainType,kind:e.kind,isLegacy:e.isLegacy}),B?.teamSlug&&B?.project&&A({text:"Drain successfully added",action:"View project drains",actionHref:`/${B.teamSlug}/${B.project}/settings/drains`})},[x,B?.teamSlug,B?.project,A]),G=(0,c.useCallback)(()=>{"pro"===S&&j?v.push(I?`/${I.slug}/~/settings/billing#web-analytics`:"/account/billing#web-analytics"):(u.analytics.track(d.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:S,teamId:I?.id,type:"three-dots"}),m("menu"))},[j,S,v,m,I]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(a.MenuButton,{"aria-label":"More Actions",className:g,shape:"square",svgOnly:!0,type:W.IS_DASH?"tertiary":"secondary",children:(0,t.jsx)(i.MoreHorizontal,{})}),(0,t.jsxs)(n.Menu,{width:213,children:["enterprise"!==S?(0,t.jsx)(r.MenuItem,{disabled:w,onClick:G,children:"hobby"===S?"Upgrade to Pro":j?"Go to Billing":"Upgrade to Plus"}):null,(0,t.jsx)(r.MenuItem,{external:!0,href:"/docs/analytics",isLink:!0,target:"_blank",children:"Go to Docs"}),V?null:(0,t.jsx)(r.MenuItem,{disabled:!H,onClick:()=>{O(!0),x(k.VercelActivityAction.DrainsModalOpened,{source:"web-analytics-options-menu"})},children:"Add Drain"}),(0,t.jsx)(r.MenuItem,{onClick:()=>f(!0),type:"error",children:"Disable Web Analytics"})]})]}),(0,t.jsx)(c.Suspense,{fallback:null,children:(0,t.jsx)(P,{active:y,close:()=>f(!1),revalidateFeatureState:h})}),B?.teamSlug?(0,t.jsx)(L.DrainModals,{isOpen:D,closeModal:()=>O(!1),teamSlug:B.teamSlug,projectIdOrSlug:B.project,onDrainCreated:$,drain:null,drainType:"analytics"}):null]})}e.s(["OptionsMenu",()=>O],3343953)},1187354,e=>{"use strict";var t=e.i(1146226),i=e.i(3343953),n=e.i(5610834),a=e.i(5924191),s=e.i(5343305),r=e.i(7952834);function l(){let e=(0,n.useRouter)(),{mutate:l}=(0,a.useSWRConfig)(),{data:o}=(0,s.useCurrentDashboardProject)();return(0,t.jsx)(i.OptionsMenu,{buttonClassName:"!w-[36px]",revalidateFeatureState:()=>{(0,r.revalidateProject)(l,o),e.refresh()}})}e.s(["default",()=>l])}]);

//# debugId=d24ddda0-e79d-6b13-cd54-38f4ae130e9f
//# sourceMappingURL=fb913770d806d196.js.map